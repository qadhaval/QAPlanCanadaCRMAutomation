(function(n){var i=0;n.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,noReusltsFunc:function(){},memberLookingToJoinGetCounts:!1,onBeforeHide:!1,addCampaignInfo:function(){return!1}},pending:0,_create:function(){var t=this,r=this.element[0].ownerDocument,i;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(r){if(!t.options.disabled&&!t.element.propAttr("readOnly")){i=!1;var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:t._move("previousPage",r);break;case u.PAGE_DOWN:t._move("nextPage",r);break;case u.UP:t._move("previous",r),r.preventDefault();break;case u.DOWN:t._move("next",r),r.preventDefault();break;case u.ENTER:case u.NUMPAD_ENTER:t.menu.active&&(i=!0,r.preventDefault());case u.TAB:if(!t.menu.active)return;t.menu.select(r);break;case u.ESCAPE:t.element.val(t.term),t.close(r);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,r))},t.options.delay)}}}).bind("keypress.autocomplete",function(n){i&&(i=!1,n.preventDefault())}).bind("focus.autocomplete",function(){t.options.disabled||(t.selectedItem=null,t.previous=t.element.val())}).bind("blur.autocomplete",function(n){t.options.disabled||(clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(n),t._change(n)},150))}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=n("<ul></ul>").addClass("autoCompleteOuter").appendTo(n("#"+n(this.element).attr("id")+"_cont"),r).mousedown(function(i){var r=t.menu.element[0];n(i.target).closest(".ui-menu-item").length||setTimeout(function(){n(document).one("mousedown",function(i){i.target===t.element[0]||i.target===r||n.ui.contains(r,i.target)||t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(n,i){var r=i.item.data("item.autocomplete");!1!==t._trigger("focus",n,{item:r})&&/^key/.test(n.originalEvent.type)&&r&&t.element.val(r.value)},selected:function(n,i){var u=i.item.data("item.autocomplete"),f=t.previous;if(t.element[0]!==r.activeElement&&(t.element.focus(),t.previous=f,setTimeout(function(){t.previous=f,t.selectedItem=u},1)),!u)return!1;!1!==t._trigger("select",n,{item:u})&&t.element.val(u.value),t.term=t.element.val(),t.selectedItem=u,t.close(n)},blur:function(){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),n.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),n.Widget.prototype.destroy.call(this)},_setOption:function(t,i){n.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(n(i||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,u;n.isArray(this.options.source)?(r=this.options.source,this.source=function(t,i){i(n.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(u=this.options.source,this.source=function(r,f){t.xhr&&t.xhr.abort(),t.xhr=n.ajax({url:u,data:r,dataType:"json",autocompleteRequest:++i,success:function(n){this.autocompleteRequest===i&&f(n)},error:function(){this.autocompleteRequest===i&&f([])}})}):this.source=this.options.source},search:function(n,t){return(n=n!=null?n:this.element.val(),this.term=this.element.val(),n.length<this.options.minLength)?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)===!1)?void 0:this._search(n)},_search:function(n){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:n.toLowerCase()},this.response)},_response:function(n){!this.options.disabled&&n&&n.length?(n=this._normalize(n),this._suggest(n),this._trigger("open")):this.options.noReusltsNoItem?this.close():this.options.disabled||(this._suggest([{Display:"See All",value:null}]),this._trigger("open")),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(n){if(clearTimeout(this.closing),this.menu.element.is(":visible")){if(this.options.onBeforeHide&&this.options.onBeforeHide(this)==!1)return;this.menu.element.slideUp(50),this.menu.deactivate(),this._trigger("close",n)}},_change:function(n){this.previous!==this.element.val()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return typeof t=="string"?{label:t,value:t}:n.extend({label:t.Display||t.value,value:t.Display||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.slideDown(50),this._resizeMenu(),i.position(n.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new n.Event("mouseover"))},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItem(t,i)})},_renderItem:function(t,i){var r;if(i&&i.value&&i.value!=null){var e=i.Type==1?"team":"member",f=!this.options.memberLookingToJoinGetCounts||i.TeamAllowedNewMembers||i.TeamAllowedNewMembers>0,u=n("<li />").append(n('<a title="'+i.label+'" />').html(i.Img+'<span class="autoCompleteSpan">'+(this.options.addCampaignInfo(i)||"")+i.label+(i.TeamAllowedNewMembers&&i.TeamAllowedNewMembers>0?" ("+i.TeamAllowedNewMembers+" spot"+(i.TeamAllowedNewMembers==1?"":"s")+" remaining)":this.options.memberLookingToJoinGetCounts?" (no spots remaining)":"")+'</span><span class="clear"></span>'));return f&&u.data("item.autocomplete",i),u.appendTo(t)}return r=this.options.noReusltsFunc(),typeof r=="string"?n(r).data("item.autocomplete",i).appendTo(t):n("<li class='noResults'>"+(this.options.noReuslts||jsTranslate("searchNoResults"))+"</li>").data("item.autocomplete",i).appendTo(t)},_move:function(n,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(n)||this.menu.last()&&/^next/.test(n)){this.element.val(this.term),this.menu.deactivate();return}this.menu[n](t)},widget:function(){return this.menu.element}}),n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}})})(jQuery);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var s,l,h,a,v=n,c,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i)),typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,c=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,s=0;s<a;s+=1)c[s]=u(s,e)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));else for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})}),typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),f.lastIndex=0,f.test(n)&&(n=n.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
function rewriteWepayErrors(n){var t,i=n.error_description||n;switch(i){case"address parameter is required":t=jsTranslate("wepayError_billingAddress");break;case"The user_name parameter is required":t=jsTranslate("wepayError_billingName");break;case"Full name is required":t=jsTranslate("wepayError_billingNameFull");break;case"Unable to charge payment method: general decline":t=jsTranslate("wepayError_cardDeclined");break;case"Invalid Token":t=jsTranslate("wepayError_invalidToken"),window._gaq&&_gaq.push(["a._trackEvent","Error","Invalid Token",location.href]);break;default:t=i}return t}function isScriptLoaded(n){return n&&rbLoadedScriptTypes.indexOf(n)>-1}function getJsonOrString(n){var t;try{t=JSON.parse(n)}catch(i){return n}return t}function ajaxError(n,t){for(var i=n[0],u={status:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders?i.getAllResponseHeaders():"",readyState:i.readyState},r=1;r<n.length;r++)u["args"+r]=n[r];$.post(errorAjaxLog,u),t||alert(jsTranslate("alert_unexpectedError")),window._gaq&&_gaq.push(["a._trackEvent","Error","ajaxError",location.href])}function ajaxLoadError(){alert(jsTranslate("alert_unexpectedErrorWithReload")),location.reload(!0)}function getCkeditorDataLocal(n){var t;try{t=n.getData()}catch(i){t=n.getData()}return t}function jsTranslate(){var r,t,n,i;if(!arguments.length)return"";if((r=window.jsTerms||{},t=arguments[0],!r[t])||(n=r[t][window.currentLanguage],!n&&(n=r[t].English,!n)))return"{"+t+"}";if(n.indexOf("{0}")!=-1)for(i=1;i<arguments.length;i++)n=n.replace(new RegExp("\\{"+(i-1)+"\\}","gm"),arguments[i]);return n=n.replace(new RegExp("\\\\n","gm"),"\n")}function htmlAttributeSafe(n){return n?n.replace(new RegExp('"',"gm"),"&quot;"):""}window.rbLoadScript=function(n,t,i,r){var u=document.createElement(n.elementType||"script"),f,e;if(u.type="text/"+(n.type||"javascript"),u.src=n.src||n,u.async=!0,i)for(f in i)u[f]=i[f];(t||r)&&(u.onload=u.onreadystatechange=function(){this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(r&&rbLoadedScriptTypes.push(r),t&&!t.done&&(t.done=!0,t()))}),e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(u,e)};var rbLoadedScriptTypes=[];window.rbLoadScriptIfNotLoaded=function(n,t,i,r){if(isScriptLoaded(r)){t&&!t.done&&(t.done=!0,t());return}rbLoadScript(n,t,i,r)},window.rbGoogleMapJsCallbacks=[],window.rbGoogleMapJsInitialized=!1,window.rbGoogleMapJsCompleted=!1,window.rbGoogleMapJsCallbacksDo=function(){rbGoogleMapJsCompleted=!0;for(var n=0;n<rbGoogleMapJsCallbacks.length;n++)rbGoogleMapJsCallbacks[n]()},window.rbLoadGoogleMapJs=function(n){if(rbGoogleMapJsCompleted){n();return}(rbGoogleMapJsCallbacks.push(n),rbGoogleMapJsInitialized)||(rbGoogleMapJsInitialized=!0,rbLoadScript("https://maps.googleapis.com/maps/api/js?libraries=places&key="+(window.googleApiKey||"AIzaSyCMoOY1kJl4urSsrMMTE1zNyR-J4KyQGHU"),rbGoogleMapJsCallbacksDo))},window.dataLayer=window.dataLayer||[];
function isReadOnlyMode(n){if(n.status===503&&n.responseText)try{return JSON.parse(n.responseText).appIsInReadOnlyMode}catch(t){}return!1}function reEnableActionInReadOnlyMode(n){return function(t){isReadOnlyMode(t)&&n()}}function showErrors(n,t){var u=t?"<br/>":"\r\n",r=jsTranslate("showErrorsStr")+u,i;for(n=[].concat(n),i=0;i<n.length;i++)r+=u+(n[i].error||(n[i].Value?[].concat(n[i].Value)[0]:"unknown error"));if(t)return r;alert(r)}function setErrorsDiv(n,t){n=[].concat(n);for(var i=0;i<n.length;i++)n[i].ID=t,n[i].Key=t}function showErrors2(n,t,i,r,u,f){var o,h,e,p,s,v,l,a,c,y,w;for(n=[].concat(n),h=0;h<n.length;h++){if(e=n[h].ID||n[h].Key,p=rewriteWepayErrors(n[h].error||n[h].Value[0]||"Please enter a valid value"),!u){PFR.Validators.Helper.showValidationError(e,p,i?"errorServer":"",undefined,t,undefined,undefined,f);continue}for(s=$("#"+e+"-error"),s.length<1&&(v="error",$("#"+e+"Fancy").length?o=$("#"+e+"Fancy"):(l=$((e.charAt(0)=="#"?"":"#")+e),l.length?o=l:(l=$("input[name="+e+"], select[name="+e+"]").first(),l.length&&(o=l,e=o.attr("id"))),o||(o=f||$("#"+t),v="error errorRight")),o.attr("data-errorParentSelector")&&(o=o.closest(o.attr("data-errorParentSelector"))),i&&(v+=" errorServer"),s=$("#"+e+"-error"),s.length?s.addClass(v):(s=$('<span id="'+e+'-error" class="'+v+'"></span>'),o.after(s))),s.html("<span><span></span>"+p+"</span>").click(function(n){return function(){PFR.Validators.Helper.clearValidationError("#"+n)}}(e)).show(),a=s.children("span"),c=-112;a.offset().left<0&&c<0;)a.css("left",c=c+5);if(y=a.closest(":overflowHidden"),y.length)while(a.offset().left<y.offset().left&&c<0)a.css("left",c=c+5)}r||(w=$(".error :visible:first"),w.length&&globalScrollTo(w.offset().top-30))}function rbSetCookieGlobalOnLocation(n,t,i){rbSetCookieGlobal(n,t,i,cookieLocationDomain,cookieLocationPath)}function rbSetCookieGlobal(n,t,i,r,u){var f,e;i&&(f=new Date,f.setDate(f.getDate()+i)),e=t.replace(/;/g,"%3B")+(i?"; expires="+f.toUTCString():"")+(r?"; domain="+r:"")+"; path="+(u||"/"),document.cookie=n+"="+e}function createAndRetrunGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}function numberWithCommas(n,t){var i=n.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",");return t&&i.length>2&&i.lastIndexOf(".")==i.length-2&&(i=i+"0"),i}function isTextSelected(n){var i=n.selectionStart,r=n.selectionEnd,t=document.selection;return t&&t.createRange().text.length!=0?!0:!t&&n.value.substring(i,r).length!=0?!0:!1}function ensureDateIsNumberAndAddSlashes(n,t){t&&n.keydown(function(t){if($.inArray(t.which,[46,8,9,27,13])===-1&&(t.which!=65||t.ctrlKey!==!0)&&(!(t.which>=35)||!(t.which<=40))){try{if(isTextSelected(n.get(0)))return}catch(u){}if(this.value.length==10&&t.preventDefault(),t.which==191||t.which==111){var i=this.value,r=this.value.length;if(r==1&&i>0){$(this).val("0"+i);return}if(r==4&&i.substring(3)>0){$(this).val(i.substring(0,3)+"0"+i.substring(3));return}t.preventDefault()}(t.shiftKey||t.which<48||t.which>57)&&(t.which<96||t.which>105)&&t.preventDefault(),this.value.length==2?$(this).val(this.value+"/"):this.value.length==5&&$(this).val(this.value+"/")}}),n.keyup(function(n){n.which!=8&&(this.value.length==2?$(this).val(this.value+"/"):this.value.length==5&&$(this).val(this.value+"/"))})}function globalScrollTo(n,t,i,r){var e=r&&r.length,f=e?r:$("html, body");t?f.scrollTop(n):i?f.animate({scrollTop:n},i):f.animate({scrollTop:n})}function ensureFirstErrorInViewport(n){if(n=n||PFR.Validators.Helper.getVisibleErrorDvs(!0),n.length){if(window.self!==window.top){globalScrollTo(n.offset().top-30);return}if(n[0].getBoundingClientRect){var t=n[0].getBoundingClientRect();if(t.top>=0&&t.bottom<=$(window).height())return;if(t.top>=0){globalScrollTo(n.offset().top-$(window).height()+60,undefined,undefined,$("#pageDonatePopInner"));return}}globalScrollTo(n.offset().top-30,undefined,undefined,$("#pageDonatePopInner"))}}function switchAccount(n,t){$.post(urlSwitchAccount,{userAccountId:t,memberId:n,fromProfile:window.isProfilePage},function(n){if(n.success){location.href=n.page||location.href;return}createPopAndShow(jsTranslate("popTitle_switchAccounts"),"<div><fieldset><label>"+jsTranslate("errorList_Title")+" <br/><br/><b>"+n.error+"</b><br/><br/>"+jsTranslate("msg_pleaseRefresh")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+jsTranslate("btn_ok")+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>')})}function setLanguage(n){var t="lan=",i;qsParm.lan?location.href=location.href.replace(t+qsParm.lan,t+n):(i=location.search?"&":"?",location.href=location.pathname+location.search+i+t+n+location.hash)}function getNamesFromSingleName(n){for(var i=n.split(" "),r="",t=0;t<i.length-1;t++)r+=(t>0?" ":"")+i[t];return{firstName:r,lastName:i[i.length-1]}}function debounce(n,t){return function i(){clearTimeout(i.timeout),i.timeout=setTimeout(n.bindArray(this,arguments),t)}}$(function(){$.ajaxSetup({beforeSend:function(n,t){window.pageMemberId&&(!window.admEdtUrl||t.url.indexOf(window.admEdtUrl)==-1)&&n.setRequestHeader("mId",pageMemberId)},error:function(n,t,i){isReadOnlyMode(n)?alert(JSON.parse(n.responseText).msg):t!="abort"&&ajaxError([n,t,i])}}),$.postJson=function(n,t,i,r){return $.ajax({type:"POST",url:n,data:JSON.stringify(t),contentType:"application/json",success:i,dataType:r})}}),$.expr[":"].overflowHidden=function(n){var t=$(n).css("overflow")||"";return t.toUpperCase()=="AUTO"||t.toUpperCase()=="HIDDEN"},$.fn.changeElementType=function(n,t,i){var r={},u;return $.each(this[0].attributes,function(n,u){r[u.nodeName]=t?u.nodeValue.replace(t,i):u.nodeValue}),u=$("<"+n+"/>",r).append($(this).contents()),this.replaceWith(function(){return u}),u},$.fn.valIgnorePlaceholder=function(){var n=this.val();return window.Placeholders&&n==this.attr("placeholder")?"":n},$.fn.getOffsetTopFromRootParent=function(){for(var n=this[0],t=0;n.offsetParent!=null;)t+=n.offsetTop,n=$(n.offsetParent)[0],n.offsetParent===null&&(t+=n.offsetTop);return t},PFR={},PFR.URL={},emailValidationRegex=/^[^@\s]+@[^@\s]+\.[^@\s]+$/,PFR.Validators={ErrorClass:"hasError",Helper:{hideAllErrorDvs:function(){var n=PFR.Validators.Helper.getVisibleErrorDvs();n.hide()},getVisibleErrorDvs:function(n){var t=$.mobile?$(".error :visible"):$("body > div.errorDv:visible, .isPopup > div.errorDv:visible, .popInnerCont > div.errorDv:visible");return n?t.first():t},positionAllErrorDvs:function(){var n=PFR.Validators.Helper.getVisibleErrorDvs();n.length&&n.trigger("reposition")},positionErrorDv:function(n,t){var r;if(!t.is(":visible"))return n.hide(),!1;var u=t.offset(),f=u.left,e=u.top+t.outerHeight(),i=n.data("pop");return i&&i.length&&(r=i.offset(),f-=r.left-i.scrollLeft(),e-=r.top-i.scrollTop()),n.css({left:f+5,top:e}),!0},showValidationError:function(n,t,i,r,u,f,e,o){var s,c,v,p,h,w,y,b,a,l,k;if(t=typeof t=="function"?t():t,u?(c=e||n,$("#"+c+"Fancy").length?s=$("#"+c+"Fancy"):(v=$(((c||"").charAt(0)=="#"?"":"#")+c),v.length?s=v:(v=$("input[name="+c+"], select[name="+c+"]").first(),v.length&&(s=v,c=s.attr("id"))),s||(s=o||$("#"+u)))):(s=$(n),c=e||s.attr("id"),p=$("#"+c+"Fancy"),p.length&&(s=p)),s.attr("data-errorParentSelector")&&(s=s.closest(s.attr("data-errorParentSelector"))),f||$.mobile?(h=$("#"+c+"-error"),h.length||(h=$('<span id="'+c+'-error" class="error'+(i?" "+i:"")+'"></span>'),r?s.append(h):s.after(h)),h.html("<span><span></span>"+t+"</span>").click(function(){PFR.Validators.Helper.clearValidationError(n,e)})):(h=$("#"+c+"-errorDv"),w=c||createAndRetrunGuid(),h.length?h.data("elm",s):(y=s.closest("div.popInnerCont, div.isPopup"),h=$('<div id="'+w+'-errorDv" class="errorDv'+(i?" "+i:"")+'"></div>').data({elm:s,pop:y}).on("reposition",function(){var n=$(this);PFR.Validators.Helper.positionErrorDv(n,n.data("elm"))}).hide().appendTo(y.length?y:"body")),b=s.closest("div.isPopup"),b.length&&h.addClass("errorInPop-"+b.attr("id")),h.html(t).click(function(){PFR.Validators.Helper.clearValidationError($(this).data("elm"),w)}),PFR.Validators.Helper.positionErrorDv(h,s)||$.post(window.errorAjaxLog||"/Error/AjaxLog",{error:"Error div was hidden",page:location.href,id:c}),h.show()),s.bind("click.afterErrorClick",function(){s.unbind("click.afterErrorClick"),PFR.Validators.Helper.clearValidationError(n,e)}),f||$.mobile){if(h.hasClass("errorRight"))return;for(a=h.children("span"),l=-112;a.offset().left<0&&l<0;)a.css("left",l=l+5);if(k=a.closest(":overflowHidden"),k.length)while(a.offset().left<k.offset().left&&l<0)a.css("left",l=l+5)}s.addClass(PFR.Validators.ErrorClass)},clearValidationError:function(n,t){var i=$(n),r=t||i.attr("id"),u=$("#"+r+"Fancy");u.length&&(i=u),i.attr("data-errorParentSelector")&&(i=i.closest(i.attr("data-errorParentSelector"))),$("#"+r+"-error").html(""),$("#"+r+"-errorDv").hide(),i.removeClass(PFR.Validators.ErrorClass)},insureElm:function(n){if(typeof n!="string")return n;if(n.length==0)return null;var t=$((n.charAt(0)=="#"?"":"#")+n);return t.length?t:(t=$("input[name="+n+"]"),t.length)?t:!1},set:function(n,t,r,u,f){var e,o;if(!(n.indexOf("@ID@")>-1)&&(!u||u!=window.ticketCustomValidationGroup||window.customTicketValidate)){if(e=PFR.Validators.Helper.insureElm(n),!e&&(f||(f=0),f++,f<40)){setTimeout(function(i){return function(){PFR.Validators.Helper.set(n,t,r,u,i)}}(f),10);return}if(o={isValid:!1,validate:function(n){return isValid=t(e,r,n)},id:n},e||!r.dontBreakIfNoElm){if(e.data("validator",o),e.change(function(n,t){t||o.validate()}),u)if(u.length&&$.isArray(u[0]))for(i=0;i<u.length;i++)u[i].push(o);else u.push(o);PFR.Validators.Helper.validatorsRequired.indexOf(t)>-1?e.addClass("rbFieldIsRequired"):PFR.Validators.Helper.validatorsDefaultRequired.indexOf(t)>-1?r.required!==!1&&e.addClass("rbFieldIsRequired"):r.required&&e.addClass("rbFieldIsRequired")}}},validate:function(n,t,i){for(var u,r=0;r<n.length;r++)if(u=n[r],u.id&&u.id==t)return u.validate(i)},clearChildrenErrors:function(n){for(var i,t=0;t<n.length;t++)i=n[t].id,PFR.Validators.Helper.clearValidationError("#"+i,i)},validateGroup:function(n,t){for(var r=!0,i=0;i<n.length;i++)n[i].validate(t)||(r=!1);return r}},NonEmpty:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("missingValue"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),r.length>0&&r!=$(n).attr("data-defaultval"))?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},SelectRequired:function(n,t,i){if(t=$.extend({},{message:jsTranslate("basicRadioButton"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),r&&r.length&&r!=$(n).attr("data-defaultval")&&r!=="0")?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},NgMultiSelectRequired:function(n,t,i){t=$.extend({},{message:jsTranslate("multiSelectReq"),whenVisible:!1},t);var r=t.getValue(),u=r&&r.length;return u?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},MultiSelectRequired:function(n,t,i){var r,u;t=$.extend({},{message:jsTranslate("multiSelectReq"),whenVisible:!1},t),elm=n._containerNode,r=!1;for(u in n.getSelectedItems()){r=!0;break}return r?(PFR.Validators.Helper.clearValidationError(elm),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(elm,t.message),!1)},MultiSelectInputRequired:function(n,t){var r,u,i,f;return(t=$.extend({},{message:jsTranslate("multiSelectReq"),whenVisible:!1},t),r=n.attr("id"),n=PFR.Validators.Helper.insureElm(r),u=n.data("msd"),!u)?(PFR.Validators.Helper.showValidationError(n,t.message),!1):(i=u._containerNode,t.whenVisible&&!$(i).is(":visible"))?!0:t.preCondition&&!t.preCondition()?(PFR.Validators.Helper.clearValidationError(i),!0):(f=$(n).valIgnorePlaceholder(),f&&f.length)?(PFR.Validators.Helper.clearValidationError(i),!0):PFR.Validators.Helper.showValidationError(i,t.message,undefined,undefined,undefined,undefined,r)},RadioRequired:function(n,t,i){return(t=$.extend({},{message:jsTranslate("basicRadioButton"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))?!0:t.preCondition&&!t.preCondition()?(PFR.Validators.Helper.clearValidationError(n),!0):$(n).find("input").andSelf().filter("input:checked").length?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},MediaRequired:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("basicRadioButton"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),validationElm=$(n).prev(".ecardSection"),t.whenVisible&&!$(validationElm).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),r)?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(validationElm,t.message,undefined,undefined,undefined,undefined,n.attr("id"),undefined),!1)},Text:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("basicValidation"),messageForNoHtml:jsTranslate("HTML"),required:!0,minLength:1,whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),!t.required&&r.length==0)?(PFR.Validators.Helper.clearValidationError(n),!0):t.noHtml&&!PFR.Validators.NoHtml(n,t)?(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.messageForNoHtml),!1):r.length>=t.minLength&&(typeof t.maxLength=="undefined"||r.length<=t.maxLength)&&r!=$(n).attr("data-defaultval")?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},Custom:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("basicValidation"),whenVisible:!1,validator:function(){return!1},showMessage:!0},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),t.validator(r,t))?(PFR.Validators.Helper.clearValidationError(n),!0):(t.showMessage&&!i&&PFR.Validators.Helper.showValidationError(n,t.message),!1)},Number:function(n,t,i){var r,u,f,e;return(t=$.extend({},{trim:!0,message:jsTranslate("basicNumberValidation"),minValue:Number.MIN_VALUE,maxValue:Number.MAX_VALUE,required:!0,allowDecimal:!0,allowZero:!0,replaceDollarSign:!1,whenVisible:!1,minLength:1,replaceCommas:!0,trimToFloat:!0},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))?!0:t.preCondition&&!t.preCondition()?(PFR.Validators.Helper.clearValidationError(n),!0):(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),(t.replaceDollarSign||t.replaceCommas||t.trimToFloat)&&r!=$(n).attr("data-defaultval")&&(t.replaceDollarSign&&(r=r.replace(/\$/g,"")),t.replaceCommas&&(r=r.replace(/\,/g,"")),t.trimToFloat&&(u=r.indexOf("."),u>-1&&(f=r.substring(0,u),e=r.substring(u+1,u+3),r=f+"."+e)),$(n).val(r)),t.trim&&(r=$.trim(r)),!t.required&&(r.length==0||r=="0"))?(PFR.Validators.Helper.clearValidationError(n),!0):r.length>=t.minLength&&(typeof t.maxLength=="undefined"||r.length<=t.maxLength)&&(t.allowDecimal||r.toString().indexOf(".")==-1)&&!isNaN(r)&&(t.allowZero&&r==0||r>=t.minValue)&&r<=t.maxValue&&(t.allowZero||r!=0)?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},RegEx:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("basicValidation"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),typeof t.expression=="string"&&(t.expression=new RegExp(t.expression)),t.expression.test(r))?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},Email:function(n,t,i){if(t=$.extend({},{trim:!0,message:jsTranslate("email"),whenVisible:!1,required:!0,showError:!0},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),t.trim&&(r=$.trim(r)),!t.required&&r.length==0)?(PFR.Validators.Helper.clearValidationError(n),!0):emailValidationRegex.test(r)?(PFR.Validators.Helper.clearValidationError(n),!0):(t.showError&&!i&&PFR.Validators.Helper.showValidationError(n,t.message),!1)},Phone:function(n,t,i){if(t=$.extend({},{message:jsTranslate("phone"),whenVisible:!1,required:!0},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),r=r.replace(/[-() ]/g,""),$(n).val(r),!t.required&&r.length==0)?(PFR.Validators.Helper.clearValidationError(n),!0):(r.length==11&&r.substring(0,1)==="1"&&(r=r.substring(1),$(n).val(r)),r.length==10&&PFR.Validators.Number(n,t))?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},Date:function(n,t,i){var r,u,h;if(t=$.extend({},{message:jsTranslate("date"),whenVisible:!1,required:!1},t),n=PFR.Validators.Helper.insureElm(n),r=t.elmForMsg||n,t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition()||(u=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),u=$.trim(u).replace(/-/g,"/"),!t.required&&u.length==0))return PFR.Validators.Helper.clearValidationError(r),!0;if(!/^(\d{2}|\d{1})\/(\d{2}|\d{1})\/\d{4}$/.test(u))return t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(r,t.message),!1;var o=u.split("/"),s=parseInt(o[1],10),e=parseInt(o[0],10),f=parseInt(o[2],10);return f<1e3||f>3e3||e==0||e>12?(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(r,t.message),!1):(h=[31,28,31,30,31,30,31,31,30,31,30,31],(f%400==0||f%100!=0&&f%4==0)&&(h[1]=29),s>0&&s<=h[e-1])?($(n).val(("0"+e).substr(-2,2)+"/"+("0"+s).substr(-2,2)+"/"+f),PFR.Validators.Helper.clearValidationError(r),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(r,t.message),!1)},CreditCard:function(n,t,i){if(t=$.extend({},{message:jsTranslate("creditCard"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r=$(n).valIgnorePlaceholder().replace(/-| /g,"");return($(n).val(r),/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|2(?:2(?:2[1-9]|[3-9]\d)|[3-6]\d\d|7(?:[01]\d|20))\d{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/.test(r))?(PFR.Validators.Helper.clearValidationError(n),!0):(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1)},NoHtml:function(n,t,i){if(t=$.extend({},{message:jsTranslate("HTML"),whenVisible:!1},t),n=PFR.Validators.Helper.insureElm(n),t.whenVisible&&!$(n).is(":visible"))return!0;if(t.preCondition&&!t.preCondition())return PFR.Validators.Helper.clearValidationError(n),!0;var r;return(r=t.getValue?t.getValue():$(n).valIgnorePlaceholder(),/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/.test(r))?(t.dontShowMessage||i||PFR.Validators.Helper.showValidationError(n,t.message),!1):(PFR.Validators.Helper.clearValidationError(n),!0)}},PFR.Validators.Helper.validatorsRequired=[PFR.Validators.NonEmpty,PFR.Validators.SelectRequired,PFR.Validators.NgMultiSelectRequired,PFR.Validators.MultiSelectRequired,PFR.Validators.MultiSelectInputRequired,PFR.Validators.RadioRequired,PFR.Validators.CreditCard],PFR.Validators.Helper.validatorsDefaultRequired=[PFR.Validators.Text,PFR.Validators.Number,PFR.Validators.Email,PFR.Validators.Phone],PFR.Ajax={globalHandlers:[],attachGlobalHandler:function(n){this.globalHandlers.push(n)},removeGlobalHandler:function(n){for(var i=!1,t=this.globalHandlers.length-1;t>=0;t--)this.globalHandlers[t]==n&&(this.globalHandlers.splice(t,1),i=!0);return i},removeAllGlobalHandlers:function(){this.globalHandlers.splice(0,this.globalHandlers.length)},createCallback:function(n,t){var i=this.globalHandlers;return function(r,u){for(var f=0;f<i.length;f++)if(!i[f](r,u))return typeof t!="undefined"&&t(r,u),!1;return n(r,u),!0}}},PFR.Formatters={Number:function(n){if(n==null||isNaN(n))return"";for(var r=n.toString(),i=r.split("."),t=i[0],u=i.length>1?"."+i[1]:"";/(\d+)(\d{3})/.test(t);)t=t.replace(/(\d+)(\d{3})/,"$1,$2");return t+u},Currency:function(n,t){if(n==null||isNaN(n))return"";var f=Math.abs(n).toString(),u=f.split("."),i=u[0],r=u.length>1?"."+u[1]:".00";for(r.length==2&&(r+="0");/(\d+)(\d{3})/.test(i);)i=i.replace(/(\d+)(\d{3})/,"$1,$2");return(t=t||"$",n<0)?"-"+t+i+r:t+i+r},Percent:function(n){return n+"%"}},Number.prototype.safePlus=function(n){var t=Math.max(this.getPrecision(),n.getPrecision());return(this+n).toFixedNumber(t)},Number.prototype.safeMinus=function(n){var t=Math.max(this.getPrecision(),n.getPrecision());return(this-n).toFixedNumber(t)},Number.prototype.toFixedNumber=function(n){return Number(this.toFixed(n))},Number.prototype.getPrecision=function(){var n=this.toString().split(".");return n.length>1?n[1].length:0},Function.prototype.bindArray=function(n,t){return this.bind.apply(this,[n].concat(Array.prototype.slice.call(t)))};
function IsNumeric(n){var u="0123456789.",t=!0,r;for(i=0;i<n.length&&t==!0;i++)r=n.charAt(i),u.indexOf(r)==-1&&(t=!1);return t}function updateUsername(n,t){if(t){var i;return i=document.all?t.keyCode:t.which,i>64&&i<91||i>96&&i<123||i==8||i>47&&i<58}return n.value=n.value.replace(/[^a-z|0-9]/gi,""),!0}function onBeforePopClose(){}function clearBeforePopClose(){onBeforePopClose=function(){}}function onPopClose(){}function clearPopClose(){onPopClose=function(){}}function closePop(n,t){onBeforePopClose(),clearBeforePopClose(),t||$("#overlay").fadeOut("fast",function(){onPopClose(),clearPopClose()}).unbind();var i=$("#"+n);i.length&&(i.hide(),overlayOnPopOff(i)),$(document).unbind("keydown.escWatch")}function showPop(n,t,i,r,u){if(!i){var f=$("#overlay");f.show(),r||f.bind("click",function(){closePop(n)})}sizePop(n,t),r||$(document).bind("keydown.escWatch",function(t){t.keyCode==27&&closePop(n,u)})}function sizePop(n,t,i,r,u){var a=$(window).height(),v=$(window).width(),e=$("#"+n),o=e.children(".popInnerCont"),y=0,p=o.get(0)&&o.get(0).scrollHeight>o.innerHeight(),s,h,c,l;p&&(y=o.scrollTop()),t||o.css({"max-height":"none"}),s=e.height(),h=a-(100+(n=="hqStepsPop"?160:0)),t||o.css({"max-height":h}),r||e.css("visibility","hidden").show(),s>h&&(t||o.css({"overflow-y":"auto"})),p&&o.scrollTop(y),s=e.height(),c=e.outerWidth(),l=a/2-s/2,i?(r||e.css({visibility:"visible"}),e.stop().animate({top:l},function(){e.css("overflow","visible"),PFR&&PFR.Validators.Helper.positionAllErrorDvs()})):(e.css({top:l}),r||e.css({visibility:"visible"})),t||o.css({"max-width":v-40}),c>v?(e.css({left:0,marginLeft:0}),t||o.css({"overflow-x":"auto"})):e.css({left:"50%",marginLeft:-(c/2)}),PFR&&PFR.Validators.Helper.positionAllErrorDvs(),u&&o.css({overflow:u==2?"auto":"visible"})}function createPop(n,t,i,r,u){$("#genericPop").length?($("#genericPop:visible").length&&!r&&closePop("genericPop",!0),$("#genericPopTitle").html(n),$("#genericPopContent").html(t),i?$("#genericPopClose").hide():$("#genericPopClose").show()):($('<div id="genericPop" class="isPopup" style="width: 380px; margin-left: -190px; padding: 10px 15px 15px 15px;"><div id="genericPopClose" class="closePopup"></div><h3 id="genericPopTitle">'+n+'</h3><div id="genericPopContent" class="popInnerCont">'+t+"</div></div>").appendTo("body"),i&&$("#genericPopClose").hide()),$("#genericPopClose").unbind("click").click(function(){closePop("genericPop",u)})}function createPopAndShow(n,t,i,r,u,f,e,o){createPop(n,t,i,u,o),showPop("genericPop",r,f,e,o)}function overlayOnPopOn(n){n.append('<div class="onPopOverlay"></div>')}function overlayOnPopOff(n){n.children(".onPopOverlay").remove()}function openPageInLightbox(n){var t=Math.min($(window).width()*.75,1050),i=$(window).height()*.75,r='<iframe src="'+n.href+'" width="'+t+'" height="'+i+'"></iframe>';return $("#iframePop").length?($("#iframePop:visible").length&&closePop("iframePop",!0),$("#iframePopContent").html(r).css("height",i),$("#iframePop").css({width:t,marginLeft:"-"+(t/2+15)+"px"})):$('<div id="iframePop" class="isPopup modal" style="width: '+t+"px; margin-left: -"+(t/2+15)+'px; padding: 10px 15px 15px 15px;"><div id="iframePopClose" class="closePopup" onclick="closePop(\'iframePop\');"></div><div id="iframePopContent" class="popInnerCont" style="height:'+i+'px;">'+r+"</div></div>").appendTo("body"),showPop("iframePop"),!1}function vGoRound(n,t,i){var r=t.attr("data-itm"),u=t.outerHeight(),f=r*u;n.children("li").removeClass("vCurrent"),t.addClass("vCurrent"),n.stop().animate({top:-f},500),i&&vRotateRound()}function vRotateRound(){vInterval=setInterval(vRotateRoundDo,2e3)}function vRotateRoundDo(){for(var t,n,i=0;i<vSlidesLsts.length;i++)t=$("#"+vSlidesLsts[i]),n=t.children("li.vCurrent").next(),(n.length===0||n.is(":nth-last-child("+vRotateRoundDoNumFromEndToRestart+")"))&&(n=t.children("li:first")),vGoRound(t,n,!1)}function intiVerticalSlides(n){var t=$("#"+n),i=t.children("li").height(),r=t.children("li").size(),u=i*r;t.css({height:u}),$("#"+n+"UpArrowBtn").click(function(){var n=t.children("li.vCurrent").prev();return n.length&&(clearInterval(vInterval),vGoRound(t,n,!0)),!1}),$("#"+n+"DownArrowBtn").click(function(){var n=t.children("li.vCurrent").next();return n.length&&!n.is(":last-child")&&(clearInterval(vInterval),vGoRound(t,n,!0)),!1})}function removeDefault(n){n.value==n.getAttribute("data-defaultVal")&&(n.value="",$(n).removeClass("inputOnDefault"))}function showDefault(n){var t=n.getAttribute("data-defaultVal");n.value==""?(n.value=t,$(n).addClass("inputOnDefault")):n.value==t?$(n).addClass("inputOnDefault"):$(n).removeClass("inputOnDefault")}function faqAttachClick(n){$("#"+n).find(".queAnsQuestionExpn").click(function(){faqShowHide($(this))}).addClass("queEnabled")}function faqShowHide(n){n.next().stop(!0,!0).slideToggle(function(){n.parent(".queAnsCont").toggleClass("queExpanded")})}function rbParseQueryStrAndApplyToObj(n,t){for(var r=n.split("&"),u,f,e,i=0;i<r.length;i++)u=r[i].indexOf("="),u>0&&(f=r[i].substring(0,u),e=r[i].substring(u+1),t[f]=e)}function doGodaddyCstmVerify(n){var t="460",i="593",r="https://seal.godaddy.com/verifySeal?sealID="+n;window.open(r,"SealVerfication","menubar=no,toolbar=no,personalbar=no,location=yes,status=no,resizable=yes,fullscreen=no,scrollbars=no,width="+i+",height="+t)}function doMeterAnimate(n,t,i,r,u,f,e){var o,s;t=t||window.amtReceived||0,i=i||window.amtExpected||0,r=r||window.$headerMeter,u=u||window.$headerMeterAmount,f=f||window.$headerMeterBubble,r.css({visibilty:"hidden",width:"100%",display:"block"}).progressbar({value:t/i*100}),o=r.children(".ui-progressbar-value").width(),r.css("width","1px").show(),s=t/o,!isFinite(s)||isNaN(s)||o<r.width()?(u.html(formatNumberForMeter(t)),r.delay(500).animate({width:o},{duration:2e3})):r.css("width","1px").delay(500).animate({width:o},{duration:2e3,step:function(){u.html(formatNumberForMeter(parseInt(this.style.width.replace("px","")*s),e))},complete:function(){var i,o;u.html(formatNumberForMeter(t,e)),n&&(i=r.width(),window.hideAddToWidthBubble&&(i+=f.position().left+f.width()),o=$("#headerMeter").width(),i>o-$("#headerMeterLabel").outerWidth()&&$("#headerMeterLabel").fadeOut(),i>=o&&$("#headerMeterBubbleCont").addClass("headerMeterBubbleFull"))}}),r.css("visibilty","visible").children("img").show(),f.delay(200).fadeIn()}function formatNumberForMeter(n,t){return t?PFR.Formatters.Currency(n,t).replace(".00",""):numberWithCommas(n)}function doMeterTextPlacement(n,t,i){var r=n.width(),f=t/i*100,u=f/100*r;doMeterLeftTextPlacement(n,u,t,i),doMeterRightTextPlacement(n,u,r)}function doMeterLeftTextPlacement(n,t,i){var u=n.find(".progress-widget-meter"),r=n.find(".progress-widget-progress-text"),f=n.find(".progress-widget-icon-container"),e=getProgressTextContainerFutureWidth(r,i),o=f.width();e+o<t&&r.addClass("in-meter").appendTo(u)}function doMeterRightTextPlacement(n,t,i){var r=n.find(".progress-widget-goal-text"),u=r.width(),f=20,e=i-t-f;e<u&&r.hide()}function getProgressTextContainerFutureWidth(n,t){var u=10,i=n.find(".progress-widget-amount"),f=i.html(),r;return i.html(formatNumberForMeter(t)),r=n.outerWidth()+u,i.html(f),r}function resendVerifyEmail(n){var i=$("#cmpManagerPops").length,t;i&&!n&&(t=function(n){createModalPopAndShow(jsTranslate("popTitle_verifyEmail"),"<div><fieldset><label>"+n+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="submit" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>')}),sendVerifyEmailDo(urlSendVerifyFundraiserEmail,memberEmailAdd,t)}function sendVerifyAccountEmail(n){sendVerifyEmailDo(urlSendVerifyAccountEmail,currentUserAccountEmail,n)}function sendVerifyEmailDo(n,t,i){$.post(n,function(n){var u=t?" "+jsTranslate("verifyEmail_to")+" "+t:"",r;r=n.success?jsTranslate("verifyEmail_verificationSent",u):jsTranslate("verifyEmail_verificationSentFail",u)+". <br/><br/>"+(n.error||n.errors.error),i?i(r):createPopAndShow(jsTranslate("popTitle_verifyEmail"),"<div><fieldset><label>"+r+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="submit" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',!1,!0)})}function iAmUsingTouch(){return typeof isUsingTouch!="undefined"&&isUsingTouch}function multiCurrencyChangedMain(n){rbSetCookieGlobalOnLocation("UseCurrency",n,1e3),location.reload()}function multiCurrencyChangedDonate(n){$("#multiCurrencySelect").val(n).change()}function multiCurrencySetFlagPos(n,t,i,r){r||n.find(".multiCurrencySwitchFlagSlctd").removeClass("multiCurrencySwitchFlagSlctd"),t.addClass("multiCurrencySwitchFlagSlctd"),n.children("ul").css("top",-(t.index()*i)),r&&n.css("visibility","visible")}function rbCreateBtnLoader(){return'<div class="btnLoaderContainer"><div class="btn-fading-circle"><div class="btn-circle1 btn-circle"></div><div class="btn-circle2 btn-circle"></div><div class="btn-circle3 btn-circle"></div><div class="btn-circle4 btn-circle"></div><div class="btn-circle5 btn-circle"></div><div class="btn-circle6 btn-circle"></div><div class="btn-circle7 btn-circle"></div><div class="btn-circle8 btn-circle"></div><div class="btn-circle9 btn-circle"></div><div class="btn-circle10 btn-circle"></div><div class="btn-circle11 btn-circle"></div><div class="btn-circle12 btn-circle"></div></div></div>'}function rbCreateLoader(n,t){$(n).append('<div id="'+t+'" class="loading-indicator"><div class="loader"><div class="dot1"></div><div class="dot2"></div><div class="dot3"></div></div></div>')}function rbRemoveLoader(n){$("#"+n).remove()}function getPixelLengthFromstring(n){var r=$("body"),t,i;return r.append('<span id="ruler" style="visibility: hidden; white-space: nowrap;">'+n+"</span>"),t=$("#ruler"),i=t.width(),t.remove(),i}function getTextFromHtmlString(n){return $("<div/>").html(n).text()}function getTextNodesIn(n,t){function r(n){if(n.nodeType==3)(t||u.test(n.nodeValue))&&i.push(n);else for(var f=0,e=n.childNodes.length;f<e;++f)r(n.childNodes[f])}var i=[],u=/\S/;return r(n),i}function loadIncludeFile(n,t,i){var r={name:t};n.load(urlGetInclude,r,function(t){i&&i(n,t)})}function EmbedIframeHandler(n){this.id=n,this.processMessage=function(n){var t,r,i;if(n.messageType=="ApplePayCheck"&&n.canUseApplePay&&(t=$("#"+window.rbApplePay.applePayElement),t.length&&(t.show(),this.tryApplePay=!0,toggleShowActivePaymentMethods(),t=$("#"+window.rbApplePay.applePayElement),r=t.data("processorType"),window.parent.postMessage({action:rbEmbedActions.CREATE_BUTTON,payload:{buttonType:"applePay",buttonId:t.attr("id"),offset:t.offset(),height:t.height(),width:t.width(),applePayConfig:window.rbApplePay.config,isTest:window.rbApplePay.credentials.isTest,jsFile:window.rbApplePay.credentials.embedJsFile,storeId:window.rbApplePay.credentials.storeId,merchantIdentifier:window.rbApplePay.credentials.merchantIdentifier,processorType:r}},"*"),window.applePayToggleDisplay=hideShowPaymentButton(window.rbApplePay.applePayElement))),n.messageType=="ValidateMerchant",n.messageType=="PaymentAuthorized")window.rbApplePay.onpaymentauthorized(n.ap);n.messageType=="ValidateDonationInput"&&(i=submitDonateForm(!0),i?$("#"+n.element).data("formData",i):this.postMessage({action:rbEmbedActions.ABORT_SESSION})),n.messageType=="ApplePaySessionCanceled"&&donationFormInvalid()},this.postMessage=function(n){window.parent.postMessage(n,"*")}}function PaymentIframeController(n,t,i,r,u){u=u||{},this.pageSource=n,this.iframes=t,this.controllerId=this.pageSource+i,this.$form=r,this.focusStyleString="",this.unsupportedBrowser=document.documentMode&&document.documentMode<9?!0:!1,this.loaded=!1,this.loadCheckCount=0,this.reloadCount=0,this.firstFocusElem="cardNumber",this.paymentElement=u.paymentElement,this.successFunc=u.successFunc,this.errorFunc=u.errorFunc,this.threeDsIframeLoaded=!1,this.init=function(){this.unsupportedBrowser&&displayUnsupportedBrowserMessage(),rbIframeController.loadPaymentServiceEventListener(iframeSrc),this.attachHiddenIframe({id:"iframeRoot",wrapperName:"Root",iframeName:"root",isRoot:!0}),$(".paymentIframeLoader").show(),iframeLoadCheck(this.controllerId)},this.attachIframe=function(){var i,r,u,e,o,t,s;this.focusStyleString=this.setFocusStyles(),i=["border-top-color","border-top-width","border-top-style","border-bottom-color","border-bottom-width","border-bottom-style","border-right-color","border-right-width","border-right-style","border-left-color","border-left-width","border-left-style","border-bottom-right-radius","border-top-right-radius","border-bottom-left-radius","border-top-left-radius","padding-top","padding-bottom","padding-right","padding-left","font-style","font-variant","font-size","line-height","font-family","background-color","background-repeat","background-size","background-position","background-origin","box-shadow","color","box-sizing"];for(r in this.iframes){var n=this.iframes[r].attachTo,h=n.height(),f=this.iframes[r].copy;if(wrapper=this.createWrapperDiv(!1),u={},f){e=document.getElementById(f);try{for(o=window.getComputedStyle(e),t=0;t<i.length;t++)n[0].style[i[t]]&&n[0].style[i[t]].length!==0||(u[i[t]]=o[i[t]].replace(/['"]/g,""))}catch(c){window.TrackJS&&TrackJS.track(c)}(this.pageSource=="newForm"||this.pageSource=="roleReg"||this.pageSource=="recurringChangeMethod")&&n.css(u),this.pageSource==="recurringChangeMethod"||h||n.height($("#"+f).outerHeight())}frame=this.createIframe(n,u,r),wrapper.appendChild(frame),this.iframes[r].styleString=this.getStyleString(u,n),this.pageSource!=="roleReg"?this.pageSource==="recurringChangeMethod"?(n.parent().append(wrapper),n.css({width:0,padding:0})):n.append(wrapper):(s=document.getElementById(n.attr("id")),angular.element(s).append(wrapper))}},this.createIframe=function(n,t,i){var s=this.setIframeHeight(n),f=document.createElement("iframe"),e,o,u,r;for(e in defaultIframeAttributes)f.setAttribute(e,defaultIframeAttributes[e]);return f.setAttribute("style","height:"+s+"; width: 1px !important; min-width: 100% !important"),f.setAttribute("id",n.attr("id")+"frame"),f.setAttribute("name",i+this.controllerId),o=iframeSrc+"/"+iframeController+n.attr("name"),u="?rb-url="+encodeURIComponent("https://"+location.host)+"&rb-pageSource="+encodeURIComponent(this.controllerId),u+="&rb-jsVersion="+encodeURIComponent(paymentIframeJsVersion),iframeWePayEndpoint&&(u+="&rb-wepayEndPoint="+encodeURIComponent(iframeWePayEndpoint)+"&rb-wepayCid="+encodeURIComponent(iframeWePayClientId)),iframeStripeKey&&(u+="&rb-stripeKey="+encodeURIComponent(iframeStripeKey)),r=n.data(),r&&(r.maxlength&&(u+="&rb-maxlength="+encodeURIComponent(r.maxlength)),r.placeholder&&(u+="&rb-placeholder="+encodeURIComponent(r.placeholder)),r.class&&(u+="&rb-class="+encodeURIComponent(r.class)),r.dropdown&&(u+="&rb-dropdown="+encodeURIComponent(r.dropdown)),r.angularinput&&(u+="&rb-angularinput=1"),r.showissuer&&(u+="&rb-showissuer=1"),r.storedinfo&&(u+="&stored=1")),f.src=o+u,f},this.getStyleString=function(n,t){var i=this.pageSource==="newForm"||this.pageSource==="roleReg"||this.pageSource==="recurringChangeMethod",u=this.setIframeHeight(t),f=i?"100%":t.width()+"px",r="";if(!i)for(key in n)r+=key+":"+n[key]+";";return".rbInput{height:"+u+";width:"+f+";font:"+t.css("font")+";background:"+t.css("background")+";color:"+t.css("color")+";"+r+"}.rbInput:focus{"+this.focusStyleString+"}"},this.setIframeHeight=function(n){var i=this.pageSource==="newForm"||this.pageSource==="roleReg"||this.pageSource==="recurringChangeMethod",t=(i?n.height():n.outerHeight())+"px",r=typeof isTicketsPage!="undefined"?isTicketsPage:!1;return r&&(t="38px"),t},this.attachHiddenIframe=function(n){var r=n.id,t=$("#"+r),i,u,f;t.length||(i=document.createElement("div"),i.setAttribute("id",r),i.setAttribute("name",n.wrapperName),n.createPop?createPop("3DSecure processing",i.outerHTML,!0):$("body").append(i),t=$("#"+r)),t.hide(),u=this.createWrapperDiv(n.isRoot),t.append(u),f=this.createIframe(t,"",n.iframeName),f.setAttribute("id",this.controllerId),u.appendChild(f)},this.createWrapperDiv=function(n){var t=document.createElement("div"),i="cryptoElement";return n&&(i+="root"),t.setAttribute("class",i),t},this.processMessage=function(n){var r,u,f,e,o,t,i,s;if(n.messageType===messageTypes.INVALID_MESSAGE)this.processDisplayValidators(n);else if(n.messageType===messageTypes.CLEAR_MESSAGE){if(this.pageSource==="roleReg"){u=this.iframes[n.element].errorElem,this.roleRegScope.billingInfo[u]="",this.roleRegScope.$apply();return}r=this.iframes[n.element].attachTo,PFR.Validators.Helper.clearValidationError(r)}else if(n.messageType===messageTypes.VALID_MESSAGE)f=this.pageSource==="donateSelf"?["#cardNumberDonateSelf","#billingDonateMonthDonateSelf","#billingDonateYearDonateSelf","#billingDonateCvvDonateSelf"]:this.pageSource==="recurringChangeMethod"?["#cardNumber","#cardMonth","#cardYear","#cardCvv"]:["#cardNumber","#billingDonateMonth","#billingDonateYear","#billingDonateCvv"],f.forEach(function(n){PFR.Validators.Helper.clearValidationError(n)});else if(n.messageType===messageTypes.TOKEN_MESSAGE)e=this.successFunc||window[this.$form.data("successFunc")],n.data.is3dsAuthorized&&(this.threeDsInfo={tokenRequestId:n.data.requestId}),e(n.data);else if(n.messageType===messageTypes.INVALID_TOKEN_REQUEST_MESSAGE)o=this.errorFunc||window[this.$form.data("errorFunc")],o(),"error"in n&&(n.error=="INVALID"&&($.post(window.errorAjaxLog||"/Error/AjaxLog",{Error:"Iframe sent back INVALID error",ErrorResponse:n.statusText}),n.error=""),n.error&&window.getWepayElm?t=getWepayElm(n.error):this.iframes.cardNumber?t=this.iframes.cardNumber.attachTo:this.iframes.bankNumber&&(t=this.iframes.bankNumber.attachTo),PFR.Validators.Helper.showValidationError(t,rewriteWepayErrors(n.error)||jsTranslate("cardCommunicationError")),window.checkTryGoToErrorSlide&&checkTryGoToErrorSlide());else{if(n.messageType===messageTypes.SUBMIT_MESSAGE){this.$form.submit();return}if(n.messageType===messageTypes.FOCUS_BACK)i=$("#iframeHiddenTab").prev("input"),i&&i.focus();else if(n.messageType===messageTypes.FOCUS_FORWARD)this.submitBtn&&this.submitBtn.focus();else if(n.messageType===messageTypes.ROOT_LOADED)this.loaded=!0,this.attachIframe();else if(n.messageType===messageTypes.LOADED_MESSAGE){this.iframes[n.element].loaded=!0,this.messageToIframe({messageType:messageTypes.CSS_MESSAGE,styles:this.iframes[n.element].styleString,element:n.element},n.element);for(s in this.iframes)if(!this.iframes[s].loaded)return;this.paymentElement&&this.messageToIframe({messageType:messageTypes.TOGGLE_PAYMENT_ELEMENT,paymentElement:this.paymentElement}),window.processorHash&&this.loadThreeDsFrame(),$(".paymentIframeLoader").hide()}else n.messageType===messageTypes.SHOW_3DS_IFRAME?this.threeDsTimeoutFunc=setTimeout(function(){$("#iframe3ds").show(),showPop("genericPop",!1,!1,!0)},5e3):n.messageType===messageTypes.HIDE_3DS_IFRAME&&(this.threeDsTimeoutFunc&&window.clearTimeout(this.threeDsTimeoutFunc),closePop("genericPop"))}},this.loadThreeDsFrame=function(){var n=this;n.threeDsIframeLoaded||(n.attachHiddenIframe({id:"iframe3ds",wrapperName:"3ds",iframeName:"3ds",isRoot:!1,createPop:!0}),$("#iframe3ds").find("iframe").removeAttr("scrolling"),$("#iframe3ds").find("iframe").height("350"),n.threeDsIframeLoaded=!0)},this.messageToIframe=function(n,t){if(n.messageType===messageTypes.TOGGLE_PAYMENT_ELEMENT&&(this.paymentElement=n.paymentElement),n.messageType===messageTypes.RELOAD_MESSAGE&&this.reloadCount++,!this.loaded){if(n.messageType===messageTypes.TOKEN_MESSAGE){var i=this.$form.data("errorFunc");window[i]()}return}t=(t||"root")+this.controllerId,n.pageSource=this.controllerId,n.prefix="_rb",window.frames[t].postMessage(JSON.stringify(n),iframeSrc)},this.validationRequest=function(){return this.messageToIframeWithResponse({messageType:messageTypes.VALIDATE_FOR_PARENT_MESSAGE,requestId:(new Date).valueOf()})},this.messageToIframeWithResponse=function(n,t){var i=$.Deferred(),u=new PostMessageResponder(i,2e3),r=(new Date).valueOf();return rbIframeController.promiseCollection[r]=u,n.respondToMessage=!0,n.promiseId=r,this.messageToIframe(n,t),i.promise()},this.tokenRequest=function(n,t){var r,u,i;if(this.unsupportedBrowser){displayUnsupportedBrowserMessage();return}r=(new Date).valueOf(),u=messageTypes.TOKEN_MESSAGE,this.threeDsInfo&&this.threeDsInfo.tokenRequestId&&(u=messageTypes.THREE_DS_TOKEN_RETRY,r=this.threeDsInfo.tokenRequestId),i={messageType:u,paymentType:n.paymentType||tokenChargeTypes.card,data:n,processor:t,requestId:r},i.processor==Processors.credomatic?i.threeDsInfo={eventId:n.eventId||getAnalyticsData().eventID,processorHash:window.processorHash||n.processorHash,currencyCode:n.currencyType||defaultCurrency}:i.processor==Processors.wepay&&(i.wepayCid=window.iframeWePayClientId,i.wepayEndPoint=window.iframeWePayEndpoint),this.messageToIframe(i)},this.reTokenizeRequest=function(n,t){var r,i;switch(t){case"5":case"25":r=Processors.stripe;break;case"7":r=Processors.wepay;break;default:r=Processors.none}i={messageType:messageTypes.RETOKENIZE_MESSAGE,paymentType:n.paymentType||tokenChargeTypes.card,data:n,processor:r},i.processor==Processors.wepay&&(i.wepayCid=window.iframeWePayClientId,i.wepayEndPoint=window.iframeWePayEndpoint),this.messageToIframe(i)},this.setFocusStyles=function(){var n=document.createElement("input"),r,t,u,i,f;if(n.setAttribute("type","text"),n.setAttribute("id","iframeCopyFocusStyle"),n.setAttribute("style","position:absolute;top:-1000px;"),document.body.appendChild(n),r="",this.pageSource!=="newForm"&&this.pageSource!=="roleReg"&&this.pageSource!=="reEnterPaymentForm"&&this.pageSource!=="recurringChangeMethod"){for(t=$("#iframeCopyFocusStyle"),u=["border-top-color","border-top-width","border-top-style","border-bottom-color","border-bottom-width","border-bottom-style","border-right-color","border-right-width","border-right-style","border-left-color","border-left-width","border-left-style","background-color","background-repeat","background-size","background-position","background-origin"],t.focus(),i=0;i<u.length;i++)f=u[i],r+=f+":"+t.css(f)+";";t.blur()}return r},this.removeIframes=function(){this.threeDsIframeLoaded=!1,$(".cryptoElement").remove()},this.processDisplayValidators=function(n){if(n.element)this.displayErrorMessages(n.element);else if(n.validatedElements&&!n.validatedElements.isValid){var t=this;$.each(n.validatedElements.data,function(n,i){i.valid||t.displayErrorMessages(n)})}},this.displayErrorMessages=function(n){var i=this.iframes[n]||this.iframes.cardNumber||this.iframes.bankNumber,t=i.attachTo;switch(n){case"cardNumber":if(this.pageSource==="roleReg"){this.roleRegScope.billingInfo.errorcardNumber=jsTranslate("creditCard"),this.roleRegScope.$apply();return}PFR.Validators.Helper.showValidationError(t,jsTranslate("creditCard"));break;case"cardMonth":if(this.pageSource==="roleReg"){this.roleRegScope.billingInfo.errorExMonth=jsTranslate("expMonth"),this.roleRegScope.$apply();return}PFR.Validators.Helper.showValidationError(t,jsTranslate("expMonth"));break;case"cardYear":if(this.pageSource==="roleReg"){this.roleRegScope.billingInfo.errorExYear=jsTranslate("expYear"),this.roleRegScope.$apply();return}PFR.Validators.Helper.showValidationError(t,jsTranslate("expYear"));break;case"cardCvv":if(this.pageSource==="roleReg"){this.roleRegScope.billingInfo.errorcvv=jsTranslate("CVV"),this.roleRegScope.$apply();return}PFR.Validators.Helper.showValidationError(t,jsTranslate("CVV"));break;case"routingNumber":PFR.Validators.Helper.showValidationError(t,jsTranslate("routingNumber"));break;case"bankNumber":PFR.Validators.Helper.showValidationError(t,jsTranslate("bankNumber"))}}}function iframeLoadCheck(n){setTimeout(function(){iframeNotLoaded(n)},2e4)}function iframeNotLoaded(n){var t=rbIframeController.messageListeningHandlers[n],i=[],r;if(t){t.loaded||i.push("root iframe not loaded");for(r in t.iframes)t.iframes[r].loaded||i.push(r+" not loaded")}else i.push("Handler Not Found");i.length?($.post(window.errorAjaxLog||"/Error/AjaxLog",{Message:"iframe not loading",error:i.toString(),iframeControllerId:n,interval:t.loadCheckCount,reloadCount:t.reloadCount,"iframe URL":iframeSrc,"page URL":window.location.href}),t.loadCheckCount===1&&(createPopAndShow(jsTranslate("PaymentIframe_LoadError_Title"),jsTranslate("PaymentIframe_LoadError")),$.post(window.errorAjaxLog||"/Error/AjaxLog",{Message:"Iframe not loading alert displayed",iframeControllerId:n,interval:t.loadCheckCount,reloadCount:t.reloadCount,"iframe URL":iframeSrc,"page URL":window.location.href})),t.loadCheckCount<3&&(t.loadCheckCount++,iframeLoadCheck(n))):t.loadCheckCount>0&&$.post(window.errorAjaxLog||"/Error/AjaxLog",{Message:"iframe loaded after initial error",iframeControllerId:n,interval:t.loadCheckCount,reloadCount:t.reloadCount,"iframe URL":iframeSrc,"page URL":window.location.href})}function displayUnsupportedBrowserMessage(){createPopAndShow(jsTranslate("popTitle_unsupportedBrowser"),"<div><fieldset><label>"+jsTranslate("popBody_unsupportedBrowser")+"</label></fieldset></div>")}function PostMessageResponder(n,t){this.resolved=!1,this.rejected=!1,this.deferred=n;var i=this;this.timeoutFunction=setTimeout(function(){i.rejected=!0,i.deferred.reject("No Response")},t),this.clearRequestTimeout=function(){window.clearTimeout(this.timeoutFunction)},this.resolve=function(){this.resolved||this.rejected||(this.clearRequestTimeout(),this.resolved=!0,this.deferred.resolve())}}function setupTabs(n,t){var f=n.attr("id"),r="openTab"+f,u=n.find('[data-toggle="tab"]'),i;u.filter(":visible").length===1&&n.addClass("has-one-tab");u.on("click",function(i){i.preventDefault();var f=$(this),e=f.parent(),u=f.attr("href").replace("#",""),h=e.siblings(),o=n.parent(),s=o.find('[data-tab-id="'+u+'"]'),c=s.siblings();e.addClass("active"),s.addClass("active"),h.removeClass("active"),c.removeClass("active"),o.attr("data-pane-open",u),localStorage.setItem(r,u),t(u)});i=localStorage.getItem(r),i&&(n.find('[data-toggle="tab"][href="#'+i+'"]').click(),t(i,!0))}function setupPaneToggle(n){n.pane={isOpen:!0,showPane:function(){this.isOpen=!0,n.addClass("visible"),this.$pane.addClass("visible"),localStorage.setItem(this.localStorageKey,"visible")},hidePane:function(){this.isOpen=!1,n.removeClass("visible"),this.$pane.removeClass("visible"),localStorage.setItem(this.localStorageKey,"hidden")},init:function(){var t=this,i;this.elId=n.attr("id"),this.localStorageKey="paneVisibility"+this.elId,this.paneName=n.attr("href").replace("#",""),this.$outerContainer=n.parent(),this.$pane=this.$outerContainer.find('[data-pane-id="'+this.paneName+'"]');n.on("click",function(i){i.preventDefault();var r=n.hasClass("visible");r?t.hidePane():t.showPane()});i=localStorage.getItem(this.localStorageKey),i==="hidden"?this.hidePane():this.showPane()}},n.pane.init(),n.data("pane",n.pane)}function scrollToBottom(n){n.scrollTop(n[0].scrollHeight+10)}function animateToNumber(n,t,i){$({count:t}).animate({count:i},{duration:500,step:function(t){n.text(formatNumberForMeter(Math.round(t)))},complete:function(){n.text(formatNumberForMeter(Math.round(i)))}})}function providerSupportsChat(n){return n.find(":checked").data("supports-chat")}function getLivestreamPreview(n,t){switch(parseInt(t)){case 1:return'<iframe width="100%" height="220" src="https://player.twitch.tv/?channel='+n+"&autoplay=false&background=true&parent="+window.location.hostname+'&allowfullscreen=false" frameborder="0"></iframe>';case 2:return'<iframe width="100%" height="220" src="https://www.youtube.com/embed/'+n+'?rel=0&amp;showinfo=0" frameborder="0"></iframe>';case 3:return'<iframe src="https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/'+n+'&show_text=0" width="100%" height="220" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>'}}var vInterval,vRotateRoundDoNumFromEndToRestart,vSlidesLsts,qsParm,query,multiCurrencyChanged,refreshThisTop,rbIframeController;$(window).bind("popstate",function(n){n.originalEvent&&n.originalEvent.state&&n.originalEvent.state.rallybound&&(n.originalEvent.state.func?window[n.originalEvent.state.func]?window[n.originalEvent.state.func](n.originalEvent.state.funcParam):$(function(){window[n.originalEvent.state.func](n.originalEvent.state.funcParam)}):location.reload(!0))}).resize(function(){var n=$("body > div.isPopup:visible");n.length&&n.each(function(){sizePop(this.id,!1,!0,!0)}),PFR&&PFR.Validators.Helper.positionAllErrorDvs()}),hasPopupToResize=!1,vRotateRoundDoNumFromEndToRestart=1,vSlidesLsts=[];$(document).on({focus:function(){removeDefault(this)},blur:function(){showDefault(this)}},"input[data-defaultVal], textarea[data-defaultVal]");qsParm={},window.location.search.length>1&&(query=window.location.search.substring(1),rbParseQueryStrAndApplyToObj(query,qsParm)),multiCurrencyChanged=function(){var n=0;return function(n,t,i){var r=$("#multiCurrencySwitchCont"+i),e=$(n.target),o=e.closest(".multiCurrencySwitchCont"+i).length,u,f;if(r.hasClass("multiCurrencySwitchContExpanded")){if(r.removeClass("multiCurrencySwitchContExpanded").parent().removeClass("multiCurrencySwitchOuterContExpanded"),r.css("max-height","22px"),!o)return;if(u=e.closest("li.multiCurrencySwitchFlag"),!u.length||u.hasClass("multiCurrencySwitchFlagSlctd"))return;multiCurrencySetFlagPos(r,u,t),f=window["multiCurrencyChanged"+i],f&&f(u.find(".multiCurrencySwitchFlagCode").text().trim()),(window.isStandalone||window.isPlugin)&&$("#donationAmountNumber").css("padding-left",$("#donationAmountContDollarSign").width()+initialSpace)}else o&&(r.addClass("multiCurrencySwitchContExpanded").parent().addClass("multiCurrencySwitchOuterContExpanded"),r.css("max-height",r.find("> ul").css("height")),initialSpace=(parseInt($("#donationAmountNumber").css("padding-left").replace(/\D/g,""))||0)-$("#donationAmountContDollarSign").width())}}();
/*!
 * Autolinker.js
 * 0.15.0
 *
 * Copyright(c) 2014 Gregory Jacobs <greg@greg-jacobs.com>
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 *
 * https://github.com/gregjacobs/Autolinker.js
 */
!function(n,t){"function"==typeof define&&define.amd?define([],function(){return n.returnExportsGlobal=t()}):"object"==typeof exports?module.exports=t():n.Autolinker=t()}(this,function(){var n=function(t){n.Util.assign(this,t),this.matchValidator=new n.MatchValidator};return n.prototype={constructor:n,urls:!0,email:!0,twitter:!0,newWindow:!0,stripPrefix:!0,className:"",htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;)/gi,matcherRegex:function(){var i=/(^|[^\w])@(\w{1,15})/,r=/(?:[\-;:&=\+\$,\w\.]+@)/,u=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,f=/(?:www\.)/,n=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,t=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,e=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",i.source,")","|","(",r.source,n.source,t.source,")","|","(","(?:","(",u.source,n.source,")","|","(?:","(.?//)?",f.source,n.source,")","|","(?:","(.?//)?",n.source,t.source,")",")","(?:"+e.source+")?",")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,link:function(t){var u=this,f=this.getHtmlParser(),e=this.htmlCharacterEntitiesRegex,i=0,r=[];return f.parse(t,{processHtmlNode:function(n,t,u){"a"===t&&(u?i=Math.max(i-1,0):i++),r.push(n)},processTextNode:function(t){var s,h;if(0===i)for(var o=n.Util.splitAndCapture(t,e),f=0,c=o.length;c>f;f++)s=o[f],h=u.processTextNode(s),r.push(h);else r.push(t)}}),r.join("")},getHtmlParser:function(){var t=this.htmlParser;return t||(t=this.htmlParser=new n.HtmlParser),t},getTagBuilder:function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new n.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t},processTextNode:function(n){var t=this;return n.replace(this.matcherRegex,function(n,i,r,u,f,e,o,s,h){var c=t.processCandidateMatch(n,i,r,u,f,e,o,s,h),l;return c?(l=t.createMatchReturnVal(c.match,c.matchStr),c.prefixStr+l+c.suffixStr):n})},processCandidateMatch:function(t,i,r,u,f,e,o,s,h){var c,l=s||h,a="",y="",v;return i&&!this.twitter||f&&!this.email||e&&!this.urls||!this.matchValidator.isValidMatch(e,o,l)?null:((this.matchHasUnbalancedClosingParen(t)&&(t=t.substr(0,t.length-1),y=")"),f)?c=new n.match.Email({matchedText:t,email:f}):i?(r&&(a=r,t=t.slice(1)),c=new n.match.Twitter({matchedText:t,twitterHandle:u})):(l&&(v=l.match(this.charBeforeProtocolRelMatchRegex)[1]||"",v&&(a=v,t=t.slice(1))),c=new n.match.Url({matchedText:t,url:t,protocolUrlMatch:!!o,protocolRelativeMatch:!!l,stripPrefix:this.stripPrefix})),{prefixStr:a,suffixStr:y,matchStr:t,match:c})},matchHasUnbalancedClosingParen:function(n){var r=n.charAt(n.length-1);if(")"===r){var t=n.match(/\(/g),i=n.match(/\)/g),u=t&&t.length||0,f=i&&i.length||0;if(f>u)return!0}return!1},createMatchReturnVal:function(t,i){var r,u,f;return(this.replaceFn&&(r=this.replaceFn.call(this,this,t)),"string"==typeof r)?r:r===!1?i:r instanceof n.HtmlTag?r.toString():(u=this.getTagBuilder(),f=u.build(t),f.toString())}},n.link=function(t,i){var r=new n(i);return r.link(t)},n.match={},n.Util={abstractMethod:function(){throw"abstract";},assign:function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},extend:function(t,i){var f=t.prototype,e=function(){},r,u;return e.prototype=f,r=i.hasOwnProperty("constructor")?i.constructor:function(){f.constructor.apply(this,arguments)},u=r.prototype=new e,u.constructor=r,u.superclass=f,delete i.constructor,n.Util.assign(u,i),r},ellipsis:function(n,t,i){return n.length>t&&(i=null==i?"..":i,n=n.substring(0,t-i.length)+i),n},indexOf:function(n,t){if(Array.prototype.indexOf)return n.indexOf(t);for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},splitAndCapture:function(n,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var i,r=[],u=0;i=t.exec(n);)r.push(n.substring(u,i.index)),r.push(i[0]),u=i.index+i[0].length;return r.push(n.substring(u)),r}},n.HtmlParser=n.Util.extend(Object,{htmlRegex:function(){var i=/[0-9a-zA-Z][0-9a-zA-Z:]*/,r=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,n=/(?:".*?"|'.*?'|[^'"=<>`\s]+)/,t=r.source+"(?:\\s*=\\s*"+n.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",t,"|",n.source+")",")*",">",")","|","(?:","<(/)?","("+i.source+")","(?:","\\s+",t,")*","\\s*/?",">",")"].join(""),"gi")}(),parse:function(n,t){var u;t=t||{};for(var i,s=t.processHtmlNode||function(){},f=t.processTextNode||function(){},h=this.htmlRegex,r=0;null!==(i=h.exec(n));){var e=i[0],c=i[1]||i[3],l=!!i[2],o=n.substring(r,i.index);o&&f(o),s(e,c.toLowerCase(),l),r=i.index+e.length}r<n.length&&(u=n.substring(r),u&&f(u))}}),n.HtmlTag=n.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(t){n.Util.assign(this,t),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(n){return this.tagName=n,this},getTagName:function(){return this.tagName||""},setAttr:function(n,t){var i=this.getAttrs();return i[n]=t,this},getAttr:function(n){return this.getAttrs()[n]},setAttrs:function(t){var i=this.getAttrs();return n.Util.assign(i,t),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(n){return this.setAttr("class",n)},addClass:function(t){for(var i,u=this.getClass(),f=this.whitespaceRegex,e=n.Util.indexOf,r=u?u.split(f):[],o=t.split(f);i=o.shift();)-1===e(r,i)&&r.push(i);return this.getAttrs()["class"]=r.join(" "),this},removeClass:function(t){for(var r,u,f=this.getClass(),e=this.whitespaceRegex,o=n.Util.indexOf,i=f?f.split(e):[],s=t.split(e);i.length&&(u=s.shift());)r=o(i,u),-1!==r&&i.splice(r,1);return this.getAttrs()["class"]=i.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(n){return-1!==(" "+this.getClass()+" ").indexOf(" "+n+" ")},setInnerHtml:function(n){return this.innerHtml=n,this},getInnerHtml:function(){return this.innerHtml||""},toString:function(){var t=this.getTagName(),n=this.buildAttrsStr();return n=n?" "+n:"",["<",t,n,">",this.getInnerHtml(),"</",t,">"].join("")},buildAttrsStr:function(){var n,i,t;if(!this.attrs)return"";n=this.getAttrs(),i=[];for(t in n)n.hasOwnProperty(t)&&i.push(t+'="'+n[t]+'"');return i.join(" ")}}),n.MatchValidator=n.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(n,t,i){return t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(n,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(n,t)||this.isInvalidProtocolRelativeMatch(i)?!1:!0},isValidUriScheme:function(n){var t=n.match(this.uriSchemeRegex)[0];return"javascript:"!==t&&"vbscript:"!==t},urlMatchDoesNotHaveProtocolOrDot:function(n,t){return!(!n||t&&this.hasFullProtocolRegex.test(t)||-1!==n.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(n,t){return n&&t?!this.hasWordCharAfterProtocolRegex.test(n):!1},isInvalidProtocolRelativeMatch:function(n){return!!n&&this.invalidProtocolRelMatchRegex.test(n)}}),n.AnchorTagBuilder=n.Util.extend(Object,{constructor:function(t){n.Util.assign(this,t)},build:function(t){return new n.HtmlTag({tagName:"a",attrs:this.createAttrs(t.getType(),t.getAnchorHref()),innerHtml:this.processAnchorText(t.getAnchorText())})},createAttrs:function(n,t){var i={href:t},r=this.createCssClass(n);return r&&(i["class"]=r),this.newWindow&&(i.target="_blank"),i},createCssClass:function(n){var t=this.className;return t?t+" "+t+"-"+n:""},processAnchorText:function(n){return n=this.doTruncate(n)},doTruncate:function(t){return n.Util.ellipsis(t,this.truncate||Number.POSITIVE_INFINITY)}}),n.match.Match=n.Util.extend(Object,{constructor:function(t){n.Util.assign(this,t)},getType:n.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:n.Util.abstractMethod,getAnchorText:n.Util.abstractMethod}),n.match.Email=n.Util.extend(n.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),n.match.Twitter=n.Util.extend(n.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),n.match.Url=n.Util.extend(n.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var n=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(n=this.url="http://"+n,this.protocolPrepended=!0),n},getAnchorHref:function(){var n=this.getUrl();return n.replace(/&amp;/g,"&")},getAnchorText:function(){var n=this.getUrl();return this.protocolRelativeMatch&&(n=this.stripProtocolRelativePrefix(n)),this.stripPrefix&&(n=this.stripUrlPrefix(n)),n=this.removeTrailingSlash(n)},stripUrlPrefix:function(n){return n.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(n){return n.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(n){return"/"===n.charAt(n.length-1)&&(n=n.slice(0,-1)),n}}),n});var slctLsts=[],radioLsts=[],setTabbingForElms=[];window.suggestmeyes_loaded=!0,refreshThisTop="",rbIframeController={rbMessagePrefix:"_rb",hasMessageEventListener:!1,messageListeningHandlers:{},promiseCollection:{},trustedSources:[],loadPaymentServiceEventListener:function(n){(this.trustedSources.indexOf(n)<0&&this.trustedSources.push(n),this.hasMessageEventListener)||(window.addEventListener("message",this.processMessage,!1),this.hasMessageEventListener=!0)},processMessage:function(n){var t=rbIframeController,i,r,u,f,e;if(n.origin&&!(t.trustedSources.indexOf(n.origin)<0)){if(i=JSON.parse(n.data),r=i.pageSource,!r||!1){$.post(window.errorAjaxLog||"/Error/AjaxLog",{PostMessagePageSourceError:"Messages missing pageSource or rb Prefix",Origin:n.origin||"",Message:n.data||""});return}if(u=t.messageListeningHandlers[r.replace(t.rbMessagePrefix,"")],u)u.processMessage(i),i.respondToMessage&&(f=t.promiseCollection[i.promiseId],f&&f.resolve());else{e=$.map(t.messageListeningHandlers||{},function(n,t){return t}),$.post(window.errorAjaxLog||"/Error/AjaxLog",{PostMessageHandlerError:"No handler found for message",Origin:n.origin||"",Message:n.data||"",Handlers:e});return}}},removeListener:function(){window.removeEventListener("message",this.processMessage,!1),this.hasMessageEventListener=!1,this.messageListeningHandlers={}},addHandler:function(n,t){this.messageListeningHandlers[n]=t},getHandler:function(n,t){if(!n){$.post(window.errorAjaxLog||"/Error/AjaxLog",{Error:"getHandler no submittingForm"});return}var i=rbIframeController.messageListeningHandlers[$(n).data("iframeControllerId")];if(!i){t||$.post(window.errorAjaxLog||"/Error/AjaxLog",{Error:"getHandler no handler"});return}return i}};var socialIntegrationManager={loadHandler:function(n,t){var i=new this.SocialSignInMessageHandler(n,t);rbIframeController.addHandler(n,i)},SocialSignInMessageHandler:function(n,t){this.id=n,this.processMessage=t},getMessageProcessor:function(n,t){return function(i){_gaq.push(["a._trackEvent","Social Sign In",socialProviderName,"Success"]),clearInterval(window.socialProxyTimer);var r=i.data,u=i.isReg,f=i.isAccountCreation;r.messageType=="code"?$.post(t,r,function(t){r.uid=t.userId,r.emailAddress=t.emailAddress,r.firstName=t.firstName,r.lastName=t.lastName,r.signature=t.signature,n(r,u,f)}):n(r,u,f)}},openProxyWindow:function(n,t){var t=t||{},i=t.proxyWindow||window.open("","_blank","location=no"),r;i.location=n,r=this,window.socialProxyTimer=setInterval(function(){(!i||i.closed)&&(_gaq.push(["a._trackEvent","Social Sign In",t.providerName||socialProviderName,"Cancel"]),clearInterval(window.socialProxyTimer),r.removeSocialLoader())},1e3)},createSocialLoader:function(n){rbCreateLoader(n||"#mainWrap","socialSignOnLoader")},removeSocialLoader:function(){window.processingSocialProxy=!1,$("#socialSignOnLoader").remove()}},Processors={none:"",wepay:"wepay",stripe:"stripe",credomatic:"credomatic"},tokenChargeTypes={card:"A",bank:"G"},defaultIframeAttributes={frameborder:"0",allowTransparency:"true",scrolling:"no","min-width":"100%",allowpaymentrequest:"true"},iframeController="iframe/",messageTypes={INVALID_MESSAGE:"invalid",TOKEN_MESSAGE:"token",VALID_MESSAGE:"validCard",VALIDATE_FOR_PARENT_MESSAGE:"checkValidation",INVALID_TOKEN_REQUEST_MESSAGE:"requestInvalid",CLEAR_MESSAGE:"clear",RELOAD_MESSAGE:"reload",SUBMIT_MESSAGE:"submit",FOCUS_BACK:"focusBack",FOCUS_FORWARD:"focusForward",CSS_MESSAGE:"css",ROOT_LOADED:"rootLoaded",LOADED_MESSAGE:"loaded",RETOKENIZE_MESSAGE:"retokenize",TOGGLE_PAYMENT_ELEMENT:"togglePaymentElement",THREE_DS_TOKEN_RETRY:"3dsReTokenTry",SHOW_3DS_IFRAME:"show3dsIframe",HIDE_3DS_IFRAME:"hide3dsIframe"};
function renderAllCaptchas(){windowCaptchas.forEach(function(n){var t=$("#"+n);t.data("captcha").render()}),captchaLoaded=!0}function RbCaptcha(n,t,i){if((!windowCaptchas.length||t!="generalRecaptchaBadge")&&$("#"+t).length){windowCaptchas.push(t);var r=this;if(!captchaV3On&&n.RecaptchaType!=RecaptchaTypes.CHECKBOX){r.recaptchaType=RecaptchaTypes.NONE;return}if(r.updateSettings(n),r.containerId=t,r.clientId,r.token,r.renderedV2=!1,r.renderedV3=!1,r.hideDefaultRecaptchaBadge(),$("#"+t).data("captcha",r),i&&(r.onCaptchaSuccess=i.onCaptchaSuccess,r.onCaptchaSet=i.onCaptchaSet),!r.containerId)throw"containerId must contain a value!";if(r.addV2andV3Containers(),captchaLoaded&&r.render(),!$("#"+r.containerId).length)throw"containerId must be a valid element id!";}}var RecaptchaTypes={NONE:0,CHECKBOX:1,INVISIBLE_V3:2},windowCaptchas=[],captchaLoaded=!1;RbCaptcha.prototype.getV2ContainerId=function(){return this.containerId+"_v2"},RbCaptcha.prototype.getV3ContainerId=function(){return this.containerId+"_v3"},RbCaptcha.prototype.addV2andV3Containers=function(){$("#"+this.containerId).append('<div id="'+this.getV2ContainerId()+'"></div>'),$("#"+this.containerId).append('<div id="'+this.getV3ContainerId()+'"></div>')},RbCaptcha.prototype.destroyContainers=function(){$("#"+this.getV2ContainerId()).remove(),$("#"+this.getV3ContainerId()).remove(),this.renderedV2=!1,this.renderedV3=!1},RbCaptcha.prototype.hideDefaultRecaptchaBadge=function(){$("#"+this.containerId).hide(),$(".grecaptcha-badge").css({visibility:"hidden"})},RbCaptcha.prototype.showRecaptchaBadge=function(){var t=$(".recaptchaBranding"),n;if(t.length){t.css("display","inline-block");return}if(n=$(".recaptchaImgBranding"),n.length){n.css("display","inline-block");return}window.isPlugin||window.isEmbed||this.containerId=="miniLoginCaptcha"||$("#"+this.containerId).show(),$(".grecaptcha-badge").css({visibility:"inherit","z-index":"1000"})},RbCaptcha.prototype.setInvisibleRecaptcha=function(){var n=this,t;return $("#"+n.getV3ContainerId()).show(),$("#"+n.getV2ContainerId()).hide(),grecaptcha.ready(function(){n.renderedV3||(n.renderedV3=!0,n.clientId=grecaptcha.render(n.getV3ContainerId(),{sitekey:n.siteKey,size:"invisible",callback:function(t){n.showRecaptchaBadge(),n.onCaptchaSuccess&&n.onCaptchaSuccess(t)}}))}),n.onCaptchaSet&&n.onCaptchaSet(),t=$.Deferred(),grecaptcha.ready(function(){grecaptcha.execute(n.clientId,{action:n.action}).then(function(i){n.token=i,t.resolve(i)})}),t.promise()},RbCaptcha.prototype.setCheckboxRecaptcha=function(){var n=this,t;if(!window.isPlugin)return $("#"+n.containerId).show(),$("#"+n.getV2ContainerId()).show(),$("#"+n.getV3ContainerId()).hide(),t=$.Deferred(),grecaptcha.ready(function(){n.renderedV2?(grecaptcha.reset(n.clientId),t.resolve()):(n.renderedV2=!0,n.clientId=grecaptcha.render(n.getV2ContainerId(),{sitekey:n.siteKey,callback:function(i){n.onCaptchaSuccess&&n.onCaptchaSuccess(i),n.token=i,PFR.Validators.Helper.clearValidationError("#"+n.getV2ContainerId()),t.resolve()}})),n.onCaptchaSet&&n.onCaptchaSet()}),t.promise()},RbCaptcha.prototype.getToken=function(){var t=this,n;return t.recaptchaType==RecaptchaTypes.INVISIBLE_V3?t.setInvisibleRecaptcha():t.recaptchaType==RecaptchaTypes.CHECKBOX?(n=$.Deferred(),n.resolve(t.token),n.promise()):(n=$.Deferred(),n.resolve(""),n.promise())},RbCaptcha.prototype.getData=function(){var n=this,t=$.Deferred();return n.getToken().then(function(i){t.resolve({recaptchaType:n.recaptchaType,token:i})}),t.promise()},RbCaptcha.prototype.getDataForReg=function(n,t,i){var u=this,r=$.Deferred();return u.getData().then(function(u){r.resolve({recaptchaValidationRequest:u,email:n,isReturningUser:t,names:i})}),r.promise()},RbCaptcha.prototype.getDataForDonation=function(n,t){var r=this,i=$.Deferred();return r.getData().then(function(r){i.resolve({data:n,form:t,recaptchaValidationRequest:r})}),i.promise()},RbCaptcha.prototype.render=function(){return this.recaptchaType==RecaptchaTypes.INVISIBLE_V3?this.setInvisibleRecaptcha():this.recaptchaType==RecaptchaTypes.CHECKBOX?this.setCheckboxRecaptcha():void 0},RbCaptcha.prototype.createOverlayAndPopup=function(n,t){var i=this,u=(new Date).valueOf(),f='<div id="popupOverlay"></div>',e='<div class="overlayText" id="'+u+'"><a onclick="return false;">'+jsTranslate("recaptcha_overlayText")+"</a></div>",o={position:"fixed",width:"100%",height:"100%",top:0,left:0,right:0,bottom:0,"background-color":"rgba(0, 0, 0, 0.85)",background:"-moz-radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.85) 100%)",background:"-ms-radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.85) 100%)",background:"radial-gradient(50% 50%, ellipse closest-corner, rgba(0,0,0,1) 1%, rgba(0,0,0,0.85) 100%)","z-index":2e3,cursor:"pointer"},r;return $(window.parent.document).find("body").append(f),r=$(window.parent.document).find("#popupOverlay"),r.html(e),r.css(o),r.find(".overlayText a").css({"font-size":"15px",color:"white","max-width":"500px",display:"inline-block"}),r.find(".overlayText").css({width:"100%","vertical-align":"middle","margin-top":"calc(50vh - 45px)","line-height":"1.4"}),n=n+"?rbId="+u,i.captchaPopupWindow=i.openCaptchaPopup(n,t),r.click(function(){i.captchaPopupWindow&&i.captchaPopupWindow.opener?i.captchaPopupWindow.focus():i.captchaPopupWindow=i.openCaptchaPopup(n,t)}),window[u]=$.Deferred(),window[u].promise()},RbCaptcha.prototype.openCaptchaPopup=function(n,t){var i=window.open(n,"captchaPopupWindow","location=1,status=1,scrollbars=1,width=400,height=600");return i&&(i.moveTo(window.screenLeft+(window.outerWidth-i.outerWidth)/2,window.screenTop+(window.outerHeight-i.outerHeight)/2),i.onbeforeunload=function(){$(window.parent.document).find("#popupOverlay").remove()},i.addEventListener("load",function(){$(i.document).find(".verifyMessage").html(t)},!1),i.focus()),i},RbCaptcha.prototype.updateSettings=function(n){if(this.siteKey!=n.SiteKey&&this.recaptchaType==n.RecaptchaType&&(this.destroyContainers(),this.addV2andV3Containers()),this.action=n.Action,this.siteKey=n.SiteKey,this.recaptchaType=n.RecaptchaType,!this.recaptchaType)throw"recaptchaType must contain a value!";if(this.recaptchaType==RecaptchaTypes.INVISIBLE_V3&&!this.action)throw"action must contain a value!";if(!this.siteKey)throw"siteKey must contain a value!";};
