function updateVideoImage(){$("#videoImageRadio .fancyRadioBtn").css("left")=="0px"?($("#socialImage").hide(),$("#socialVideo").show(),$("#socialVideoImage").val("video")):($("#socialVideo").hide(),$("#socialImage").show(),$("#socialVideoImage").val("image"))}function addContactBookEmails(){$("#contactBookPopInner").prepend($("#tblConatctBookList")),$("#contactBookPop").modal("show")}function getContactIdsFromStr(){contactIdsGlobal=contactIdsStr!=""?contactIdsStr.split(splitStr):[],$("#lotOfEmailWarning").hide();var n=$("#emailAdded");contactIdsGlobal.length>0?(n.html((contactIdsGlobal.length==1?jsTranslate("email_oneContactSelected"):jsTranslate("email_ContactsSelected",contactIdsGlobal.length))+" "+jsTranslate("emailContactsSelectedPre")+' <a href="#" onclick="addContactBookEmails(); return false;">'+jsTranslate("clickHereTitleCase")+"</a> "+jsTranslate("emailContactsSelectedPost")),dashboard&&updateContactBook(contactIdsGlobal),contactIdsGlobal.length>contactCountLimit&&($("#lotOfEmailWarning").show().length||$('<div id="lotOfEmailWarning" class="toolTipCont" style="display:none"><div class="toolTipArrow"></div><div class="toolTipInner">We\'ve noticed that you selected a lot of contacts. <br/>While we encourage sending out emails to friends and family, sending excessive emails to invalid or expired email addresses, or to unknown recipients that may result in them reporting your email as spam, may suspend your privilege in sending emails from our system.</div></div>').appendTo(n).css({top:-68,right:-276,width:263}).fadeIn()),PFR.Validators.Helper.clearValidationError("#manualTo")):n.empty()}function updateContactBook(n){for(var t=0;t<n.length;t++)$("#rowConatctBook"+n[t]).find("input").prop("checked",!0)}function contactsDoneSelecting(){$("#contactBookPop").modal("hide"),contactIdsStr=getCheckedContacts(),getContactIdsFromStr()}function clearCheckedContacts(){$("#tblConatctBookList .emailRowInput:checked").prop("checked",!1)}function ckeditorMessage(){return window.CKEDITOR&&CKEDITOR.instances&&CKEDITOR.instances.message&&CKEDITOR.env.isCompatible}function loadEmailTemplate(n){n==0?(document.getElementById("subject").value="",ckEditorInitVal=templateEmptyText,ckeditorMessage()?CKEDITOR.instances.message.setData(templateEmptyText):$("#message").val(templateEmptyText)):typeof memberTemplates[n]!="undefined"?(document.getElementById("subject").value=memberTemplates[n].subject,ckEditorInitVal=memberTemplates[n].message,ckeditorMessage()?CKEDITOR.instances.message.setData($("<div/>").html(memberTemplates[n].message).text()):$("#message").val($("<div/>").html(memberTemplates[n].message).text()),memberTemplates[n].showImportedMessage&&(dashboard?createModalPopAndShow(jsTranslate("popTitle_importedTemplate"),"<div><fieldset><label>"+jsTranslate("importedTemplate_fromOtherCampaignNote")+'</label><br/><br/><br/><input type="checkbox" id="dontShowImportedTemplateWarning"><label style="display: inline;" for="dontShowImportedTemplateWarning">'+jsTranslate("importedTemplate_fromOtherCampaignNote_dontShow")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="checkPostDontShowImportedWarning('+n+'); return false;" /></div>'):createPopAndShow("Imported Template",'<div><fieldset><label>Note: This template was imported from a different campaign.<br/><br/>Please review the content of the email to ensure accuracy.</label><br/><br/><br/><input type="checkbox" id="dontShowImportedTemplateWarning"><label style="display: inline;" for="dontShowImportedTemplateWarning">Do not show me the warning for this template again.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="checkPostDontShowImportedWarning('+n+'); return false;" /></div>'))):$.post(urlLoadTemplate.replace("-id-",n),function(n){n.success&&(document.getElementById("subject").value=n.subject,ckEditorInitVal=n.message,ckeditorMessage()?CKEDITOR.instances.message.setData(n.message):$("#message").val(n.message))})}function checkPostDontShowImportedWarning(n){n&&memberTemplates[n]&&memberTemplates[n].showImportedMessage&&(memberTemplates[n].showImportedMessage=!1,document.getElementById("dontShowImportedTemplateWarning").checked&&$.post(urlIgnoreImportedTemplate.replace("-id-",n),function(){})),closePop("genericPop")}function initSaveEmailTemplate(){var n,t;if(PFR.Validators.Helper.clearValidationError("#subject"),PFR.Validators.Helper.clearValidationError("#messageCont"),n=!0,$("#subject").val()==""&&(PFR.Validators.Helper.showValidationError("#subject","A subject is required"),n=!1),t=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message):$("#message").val(),t==""&&(PFR.Validators.Helper.showValidationError("#messageCont","A message is required"),n=!1),!n){ensureFirstErrorInViewport();return}$("#saveTemplateName").val(""),memberTemplates[$("#template").val()]?dashboard?($("#replaceTemp").html(jsTranslate("saveTemplate_replace")+$("#template :selected").html()),$("#ReplaceEmailTemp").show(),$("#overlay").show()):createPopAndShow(jsTranslate("popTitle_saveTemplate"),'<div style="text-align: center;"><fieldset><label for="saveTemplateName">'+jsTranslate("saveTemplate_saveTemplate")+" "+$("#template :selected").text()+'"</label></fieldset><fieldset><input type="text" id="saveTemplateName"/></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_save"))+'" class="btn" onclick="saveEmailTemplate($(\'#saveTemplateName\').val());" />&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_replace"))+'" class="btn" onclick="saveEmailTemplate($(\'#saveTemplateName\').val(), '+$("#template").val()+');">',!1,!0):dashboard?($("#SaveEmailTemp").show(),$("#overlay").show()):createPopAndShow(jsTranslate("popTitle_saveTemplate"),'<div style="text-align: center;"><fieldset><label for="saveTemplateName">'+jsTranslate("saveTemplate_enterName")+'</label></fieldset><fieldset><input type="text" id="saveTemplateName"/></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_save"))+'" class="btn" onclick="saveEmailTemplate($(\'#saveTemplateName\').val());" />',!1,!0),$(".saveTemplateName").attr("id","saveTemplateName")}function saveEmailTemplate(n,t){PFR.Validators.Helper.clearValidationError("#saveTemplateName");var r=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message).replace(/&nbsp;/g," "):$("#message").val(),i={subject:$("#subject").val(),message:r,templateName:n};if(t)i.replaceId=t;else if(!$.trim(n).length){PFR.Validators.Helper.showValidationError("#saveTemplateName","A name is required");return}$.post(urlSaveTemplate,i,function(r){if(r.success){dashboard?($("#ReplaceEmailTemp").hide(),$("#SaveEmailTemp").hide(),$("#emailTempSavedSuccess").show()):createPop(jsTranslate("popTitle_saveTemplate"),"<div><fieldset><label>"+jsTranslate("saveTemplate_templateSaved")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',!1,!0),memberTemplates[r.emailTemplateId]={subject:i.subject,message:$("<div/>").text(i.message).html(),showImportedMessage:!1},t||($("#template").append($('<option value="'+r.emailTemplateId+'"/>').text($.trim(n))),$("#templateUl").append($('<li id="template||'+r.emailTemplateId+'" />').click(fancyLiClick).append($('<span class="liText"></span>').text($.trim(n)),'<span class="liValue">'+r.emailTemplateId+"</span>").click()));return}dashboard?($("#ReplaceEmailTemp").hide(),$("#SaveEmailTemp").hide(),$("#emailTempSavedFail").show()):createPopAndShow(jsTranslate("popTitle_saveTemplate"),"<div><fieldset><label>"+jsTranslate("saveTemplate_templateNotSaved")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',!1,!0)})}function getGreeting(n){return n.salu&&n.salu!=""?n.salu:getBackupGreeting(n.firstName)}function getBackupGreeting(n){return n&&n!=""?saluFirstNamePre+n+saluFirstNameSuf:saluDefault}function appendToContactBook(n,t,i){$("#tblConatctBookList").find("#noContactsRow").remove().end().children(".tableBody").append('<div class="tableRow" id="rowConatctBook'+t.id+'"><div class="tableCol tableColSortCheckbox tableColCheckbox" data-valuefield="Checkbox" data-sort="0" style="width:40px"><input type="checkbox" class="emailRowInput" data-id="'+t.id+'" '+(i?' checked="checked"':"")+'/></div><div class="tableCol tableColSortFirstName tableColEditable" data-valuefield="FirstName" style="width:100px">'+(n.firstName&&n.firstName!=""?n.firstName:"")+'</div><div class="tableCol tableColSortLastName tableColEditable" data-valuefield="LastName" style="width:100px">'+(n.lastName&&n.lastName!=""?n.lastName:"")+'</div><div class="tableCol tableColSortEmail tableColEditable" data-valuefield="Email" style="width:150px">'+n.email+'</div><div class="tableCol tableColSortLastEmailed" data-valuefield="LastEmailed" style="width:109px;"></div><div class="tableCol tableColSortGreeting tableColEditable'+(n.salu&&n.salu!=""?"":" isFakeGreet")+'" data-valuefield="Salu" style="width:180px; border-right:0">'+getGreeting(n)+"</div></div>")}function addManualEmail(n){if(!doingAddInviteContact){if(doingAddInviteContact=!0,!PFR.Validators.Email("manualTo")){doingAddInviteContact=!1,n&&globalScrollTo($("#manualTo").offset().top-30);return}var i=$("#manualToSalu"),t={email:$("#manualTo").val(),salu:i.val()!=i.attr("data-defaultVal")?i.val():"",updateSend:!0};$.post(urlAddContact,t,function(i){if(i.success){$("#manualTo, #manualToSalu").val(""),contactIdsStr=contactIdsStr==""?i.id+"":contactIdsStr+splitStr+i.id,getContactIdsFromStr(),appendToContactBook(t,i,!0),doingAddInviteContact=!1,n&&(dashboard?createModalPopAndShow(jsTranslate("popTitle_addContact"),'<div class="appended"><fieldset><label>'+t.email+" "+jsTranslate("addContact_contactAdded")+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'):createPopAndShow("Add Contact","<div><fieldset><label>"+t.email+' has been added to your contacts.<br/>Please review your email and click \'Send\'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'));return}PFR.Validators.Helper.showValidationError("#manualTo",i.error),doingAddInviteContact=!1,n&&globalScrollTo($("#manualTo").offset().top-30)})}}function isEmailTeam(){return $("#emailWholeTeam").is(":checked")}function isEmailDonor(){return $("#emailDonors").is(":checked")}function isEmailTeamOrDonor(){return isEmailTeam()||isEmailDonor()}function sendEmail(){var t=isEmailTeamOrDonor(),r=$("#manualTo").val(),i,e,n,u;if(dashboard){if(!t&&!manEmailIgnore&&r!=""&&PFR.Validators.Email("manualTo",{showError:!1})){createModalPopAndShow("<div><fieldset><label>"+jsTranslate("addContact_addContactConfirm",r)+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_yes"))+'" class="btn" onclick="addManualEmail(true); closePop(\'genericPop\'); return false;">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_no"))+'" class="btn" onclick="manEmailIgnore = true; sendEmail(); closePop(\'genericPop\'); return false;"></div>');return}if(pageIsInactive){createModalPopAndShow("<div><fieldset><label>"+jsTranslate("msg_email_pageNotActive")+"</label></fieldset></div>");return}if(senderAccountIsYahooBlocked){if(t){createModalPopAndShow("<div><fieldset><label>"+jsTranslate("msg_email_yahoo")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_changeMyEmail"))+'" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createModalPopAndShow("<div><fieldset><label>"+jsTranslate("msg_email_yahoo_alt")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_changeEmail"))+'" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_sendInYahoo"))+'" class="btn" onclick="sendEmailInYahoo(); return false;"></div>');return}if(0){if(t){createModalPopAndShow('<div><fieldset><label>Sorry, as of April 22nd, 2014, AOL no longer allows its users to send emails from any site other than AOL\'s own.<br/><br/>AOL made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non AOL one (Gmail and Outlook are great alternatives). <br/><br/>You can read more about this <a href="http://postmaster-blog.aol.com/2014/04/22/aol-mail-updates-dmarc-policy-to-reject/" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change My Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createModalPopAndShow('<div><fieldset><label>Sorry, as of April 22nd, 2014, AOL no longer allows its users to send emails from any site other than AOL\'s own.<br/><br/>AOL made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non AOL one (Gmail and Outlook are great alternatives). <br/><br/>You can also try to send this email in AOL Mail. Html (images and links) will be lost <br/><br/>You can read more about this <a href="http://postmaster-blog.aol.com/2014/04/22/aol-mail-updates-dmarc-policy-to-reject/" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="Send in AOL Mail" class="btn" onclick="sendEmailInAOL(); return false;"></div>');return}}else{if(!t&&!manEmailIgnore&&r!=""&&PFR.Validators.Email("manualTo",{showError:!1})){createPopAndShow("Email Address",'<div><fieldset><label>Would you like to add "'+r+'" to the email recipients?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="addManualEmail(true); closePop(\'genericPop\'); return false;">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="manEmailIgnore = true; sendEmail(); closePop(\'genericPop\'); return false;"></div>',!0);return}if(pageIsInactive){createPopAndShow("Send Email",'<div><fieldset><label>Sorry, your fundraising page is inactive and only visible to you and the campaign admin. <br/>Once your page gets activated, you\'ll be able to send emails.<br/><br/> Please <a href="/Static/Contact">contact us</a> to get it activated.</label></fieldset></div>');return}if(senderAccountIsYahooBlocked){if(t){createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of early April 2014, Yahoo no longer allows its users to send emails from any site other than Yahoo\'s own.<br/><br/>Yahoo made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non Yahoo one (Gmail and Outlook are great alternatives). <br/><br/>You can read more about this <a href="https://help.yahoo.com/kb/mail/SLN24016.html" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change My Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of early April 2014, Yahoo no longer allows its users to send emails from any site other than Yahoo\'s own.<br/><br/>Yahoo made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non Yahoo one (Gmail and Outlook are great alternatives). <br/><br/>You can also try to send this email in Yahoo Mail. Html (images and links) will be lost <br/><br/>You can read more about this <a href="https://help.yahoo.com/kb/mail/SLN24016.html" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="Send in Yahoo Mail" class="btn" onclick="sendEmailInYahoo(); return false;"></div>');return}if(0){if(t){createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of April 22nd, 2014, AOL no longer allows its users to send emails from any site other than AOL\'s own.<br/><br/>AOL made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non AOL one (Gmail and Outlook are great alternatives). <br/><br/>You can read more about this <a href="http://postmaster-blog.aol.com/2014/04/22/aol-mail-updates-dmarc-policy-to-reject/" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change My Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of April 22nd, 2014, AOL no longer allows its users to send emails from any site other than AOL\'s own.<br/><br/>AOL made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non AOL one (Gmail and Outlook are great alternatives). <br/><br/>You can also try to send this email in AOL Mail. Html (images and links) will be lost <br/><br/>You can read more about this <a href="http://postmaster-blog.aol.com/2014/04/22/aol-mail-updates-dmarc-policy-to-reject/" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="Send in AOL Mail" class="btn" onclick="sendEmailInAOL(); return false;"></div>');return}}if(PFR.Validators.Helper.clearValidationError("#manualTo"),PFR.Validators.Helper.clearValidationError("#subject"),PFR.Validators.Helper.clearValidationError("#messageCont"),i=!0,$("#subject").val()==""&&(PFR.Validators.Helper.showValidationError("#subject",jsTranslate("validation_subjectRequired")),i=!1),e=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message):$("#message").val(),e==""&&(PFR.Validators.Helper.showValidationError("#messageCont",jsTranslate("validation_msgRequired")),i=!1),!t&&contactIdsGlobal.length<1&&(PFR.Validators.Helper.showValidationError("#manualTo",jsTranslate("validation_emailMin")),i=!1),!i){ensureFirstErrorInViewport();return}if(n=contactIdsStr.match(new RegExp(splitStr,"g")),!1&&!t&&n&&n.length>2500){createPopAndShow("Email Address",'<div><fieldset><label>You are trying to send more than 2,500 emails.<br/>Please remove some and try again.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',!0);return}var s=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message).replace(/&nbsp;/g," "):$("#message").val(),f=$('<div style="font-family: arial,sans-serif; color: rgb(34, 34, 34); word-wrap: break-word;" />').html("<div>"+s+"</div>"),o=getTextNodesIn(f.get(0));o.length?$(o[0]).parent().prepend(saluThisMember+"<br/><br/>"):f.prepend(saluThisMember+"<br/><br/>"),$("#previewEmailBox").remove(),dashboard?($("#previewEmailPopLabel .appended, #previewEmailPopinput .appended").remove(),$("#previewEmailPopLabel").append('<div class="appended"><fieldset><label>'+jsTranslate("previewEmail_reviewMsg",contactBookGreeting)+'</label></fieldset></div><div id="previewEmailBox" class="appended"></div>'),$("#previewEmailPopinput").append('<div class="btnCont btnCenterCont appended"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_cancel"))+'" class="btn btn2" onclick="hidePopUp({popToHide: this, hideOverlay: true}); return false" />&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_sendEmailCount",sendEmailCount(n),!n||n.length+1==1?"":"s"))+'" class="btn" onclick="sendEmailDo(); hidePopUp({popToHide: this, hideOverlay: true}); return false;" /></div>'),$("#previewEmailPopUp, #overlay").show(0,function(){$("body").css("overflow","hidden")}),previewEmailPopUpContHeightNewHQ()):(createPop("Preview Email",'<div id="previewEmailPopUpContWrap"><div class="previewEmailContArea"><fieldset><label>Please review the email you are about to send in its entirety.<br/><br/>&#60;&#60;First Name&#62;&#62; will be replaced by each respective recipient\'s name. If the recipient has a '+contactBookGreeting+' we\'ll use it in place of the entire line.<br/><br/><b>Important: Emails with too many font sizes and styles will most likely get caught by spam filters.</b></label></fieldset></div><div id="previewEmailBox"></div></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Cancel" class="btn btn2" onclick="closePop(\'genericPop\'); return false" />&nbsp;&nbsp;<input type="button" value="Send '+sendEmailCount(n)+" Email"+(!n||n.length+1==1?"":"s")+'" class="btn" onclick="sendEmailDo(); closePop(\'genericPop\'); return false;" /></div>'),previewEmailPopUpContHeightHQ()),u=$('<iframe id="emailHtmlPreview" class="mobileHeight" src="'+(window.eventPath||"")+'/Static/Frame" />'),u.load(function(){u.contents().find("body").html(f)}),u.appendTo($("#previewEmailBox")),$(window).width()<480&&$("#emailHtmlPreview").attr("scrolling","no"),dashboard||($("#genericPop").css({width:700,marginLeft:-365}),onPopClose=function(){$("#genericPop").css({width:380,marginLeft:-207})},showPop("genericPop"))}function previewEmailPopUpContHeightHQ(){var t=$(window).height(),n=60*t/100;$(window).width()<480?(n=parseInt(n)+"px",$("#previewEmailPopUpContWrap").css("height",n).addClass("overflowAuto"),$("body").addClass("overflowHidden")):($("#previewEmailPopUpContWrap").attr("style","").removeClass("overflowAuto"),$("body").removeClass("overflowHidden"))}function previewEmailPopUpContHeightNewHQ(){var t=$(window).height(),n=55*t/100;$(window).width()<480?(n=parseInt(n)+"px",$("#previewEmailPopLabel").css("height",n).addClass("overflowAuto")):$("#previewEmailPopLabel").attr("style","").removeClass("overflowAuto")}function sendEmailNewHQ(){var n=EmailWholeTeamEnabled,u=getDictLength(selectedContacts),i=$("#manualTo").val(),t,o,f,r;if(dashboard){if(!n&&!manEmailIgnore&&i!=""&&PFR.Validators.Email("manualTo",{showError:!1})){createModalPopAndShow(jsTranslate("popTitle_EmailAddress"),"<div><fieldset><label>"+jsTranslate("addContact_addContactConfirm",i)+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_yes"))+'" class="btn" onclick="addManualEmail(true); closePop(\'genericPop\'); return false;">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_no"))+'" class="btn" onclick="manEmailIgnore = true; sendEmail(); closePop(\'genericPop\'); return false;"></div>',!0);return}if(pageIsInactive){createModalPopAndShow(jsTranslate("popTitle_sendEmail"),"<div><fieldset><label>"+jsTranslate("msg_email_pageNotActive")+"</label></fieldset></div>");return}if(senderAccountIsYahooBlocked){if(n){createModalPopAndShow(jsTranslate("popTitle_sendEmail"),"<div><fieldset><label>"+jsTranslate("msg_email_yahoo")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_changeMyEmail"))+'" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createModalPopAndShow(jsTranslate("popTitle_sendEmail"),"<div><fieldset><label>"+jsTranslate("msg_email_yahoo_alt")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_changeEmail"))+'" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_sendInYahoo"))+'" class="btn" onclick="sendEmailInYahoo(); return false;"></div>');return}}else{if(!n&&!manEmailIgnore&&i!=""&&PFR.Validators.Email("manualTo",{showError:!1})){createPopAndShow("Email Address",'<div><fieldset><label>Would you like to add "'+i+'" to the email recipients?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="addManualEmail(true); closePop(\'genericPop\'); return false;">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="manEmailIgnore = true; sendEmail(); closePop(\'genericPop\'); return false;"></div>',!0);return}if(pageIsInactive){createPopAndShow("Send Email",'<div><fieldset><label>Sorry, your fundraising page is inactive and only visible to you and the campaign admin. <br/>Once your page gets activated, you\'ll be able to send emails.<br/><br/> Please <a href="/Static/Contact">contact us</a> to get it activated.</label></fieldset></div>');return}if(senderAccountIsYahooBlocked){if(n){createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of early April 2014, Yahoo no longer allows its users to send emails from any site other than Yahoo\'s own.<br/><br/>Yahoo made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non Yahoo one (Gmail and Outlook are great alternatives). <br/><br/>You can read more about this <a href="https://help.yahoo.com/kb/mail/SLN24016.html" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change My Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;"></div>');return}createPopAndShow("Send Email",'<div><fieldset><label>Sorry, as of early April 2014, Yahoo no longer allows its users to send emails from any site other than Yahoo\'s own.<br/><br/>Yahoo made this change because they were experiencing too much email forgery.<br/><br/>If you would like to send out emails through this site, please change your email address to a non Yahoo one (Gmail and Outlook are great alternatives). <br/><br/>You can also try to send this email in Yahoo Mail. Html (images and links) will be lost <br/><br/>You can read more about this <a href="https://help.yahoo.com/kb/mail/SLN24016.html" target="_blank">clicking here</a>.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:18px;"><input type="button" value="Change Email Address" class="btn" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">&nbsp;&nbsp;<input type="button" value="Send in Yahoo Mail" class="btn" onclick="sendEmailInYahoo(); return false;"></div>');return}}if(PFR.Validators.Helper.clearValidationError("#manualTo"),PFR.Validators.Helper.clearValidationError("#subject"),PFR.Validators.Helper.clearValidationError("#message"),PFR.Validators.Helper.clearValidationError("#message-error"),t=!0,$("#subject").val()==""&&(PFR.Validators.Helper.showValidationError("#subject","A subject is required"),t=!1),o=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message):$("#message").val(),o==""&&(PFR.Validators.Helper.showValidationError("#message","A message is required"),t=!1),!n&&u<1&&(PFR.Validators.Helper.showValidationError("#manualTo","Please enter at least one email,<br/> Or select emails from your contact book above."),t=!1),!t){f=$(".error :visible:first"),f.length&&globalScrollTo(f.offset().top-30);return}var h=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message).replace(/&nbsp;/g," "):$("#message").val(),e=$('<div style="font-family: arial,sans-serif; color: rgb(34, 34, 34); word-wrap: break-word;" />').html("<div>"+h+"</div>"),s=e.find(":parent").first();s.length?s.prepend(saluThisMember+"<br/><br/>"):e.prepend(saluThisMember+"<br/><br/>"),$("#previewEmailBox").remove(),createPop("Preview Email","<div><fieldset><label>Please review the email you are about to send in its entirety.<br/><br/>&#60;&#60;First Name&#62;&#62; will be replaced by each respective recipient's name. If the recipient has a "+contactBookGreeting+' we\'ll use it in place of the entire line.<br/><br/><b>Important: Emails with too many font sizes and styles will most likely get caught by spam filters.</b></label></fieldset></div><div id="previewEmailBox"></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Cancel" class="btn btn2" onclick="closePop(\'genericPop\'); return false" />&nbsp;&nbsp;<input type="button" value="Send '+sendEmailCountNewHQ(u)+" Email"+(u==1?"":"s")+'" class="btn" onclick="sendEmailDoNewHQ(); closePop(\'genericPop\'); return false;" /></div>'),r=$('<iframe id="emailHtmlPreview" src="/Static/Frame" />'),r.load(function(){r.contents().find("body").html(e)}),r.appendTo($("#previewEmailBox")),showPop("genericPop")}function sendEmailDo(){sendingContactEmail||($("#btnLoaderInvite").show(),sendingContactEmail=!0,document.getElementById("contactsTo").value=contactIdsStr,ckeditorMessage()&&$("#message").val(getCkeditorDataLocal(CKEDITOR.instances.message).replace(/&nbsp;/g," ")),$.post(urlSendEmail,$("#emailForm").serialize(),function(n){var i,t,r;if(sendingContactEmail=!1,$("#btnLoaderInvite").hide(),n.success&&(isEmailTeamOrDonor()&&!n.errorCount||n.sentCount==contactIdsGlobal.length)){if(contactIdsStr="",getContactIdsFromStr(),clearCheckedContacts(),$("#template").val("0").change(),$("#manualTo, #manualToSalu, #subject").val(""),ckeditorMessage()?CKEDITOR.instances.message.setData(templateEmptyText):$("#message").val(templateEmptyText),onPopClose=function(){globalScrollTo($("#hqContentWrap").offset().top)},dashboard){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+(n.sentCount==1?jsTranslate("promoteViaEmail_oneEmailSent"):jsTranslate("promoteViaEmail_emailsSent",n.sentCount))+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}createPopAndShow("Promote via Email","<div><fieldset><label>Thanks!<br/>"+n.sentCount+" email"+(n.sentCount==1?" was":"s were")+' sent.<br/><br/>Note: It may take up to an hour for the email(s) to be delivered.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(dashboard){if($("#sendEmailFailPopInner .appended").remove(),n.sentCount==0&&n.error=="NO_EMAILS_TO_SEND"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_noEmails")+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error=="SPAN_SCORE"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_spamEmails")+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error=="MEMBER_TEMP_BLOCKED"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_accountBlocked")+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error=="EMAIL_NOT_VERIFIED"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_emailNotVerified",memberEmailAdd)+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error=="NOT_TEAM_CAPTAIN"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_notTeamCaptain",teamAdj,captainNoun)+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error=="EMAIL_TOO_LARGE"){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_emailTooLarge")+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}if(n.error==""){$("#sendEmailFailPopInner").append('<div class="appended"><fieldset><label>'+jsTranslate("promoteViaEmail_emailNotVerified",memberEmailAdd)+'</label></fieldset></div><div class="btnCont btnCenterCont appended" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'sendEmailFailPop\'); return false;" /></div>'),showPop("sendEmailFailPop",!0,!1,!1,!1);return}}else{if(n.sentCount==0&&n.error=="NO_EMAILS_TO_SEND"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, an error occurred - there were no emails to be sent.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(n.error=="SPAN_SCORE"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, our spam-detection score for your email came back too high.<br/><br/>Please try removing excessive images, punctuations and formatting from your email and try again.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(n.error=="MEMBER_TEMP_BLOCKED"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your account has been temporarily blocked from sending emails. This is due to excessive sending to invalid email addresses or to people who reporterted your email as spam.<br/><br/>Please try again tomorrow or <a href="/Static/Contact">contact us</a> for more info.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(n.error=="EMAIL_NOT_VERIFIED"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your email address has not yet been verified. <br/><br/>Please <a href="#" onclick="resendVerifyEmail(true); return false;">click here</a> and we\'ll send another verification email to '+memberEmailAdd+' <br/><br/><small>If you\'d like to change your email address, please <a href="#" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">click here</a>.</small></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(n.error=="NOT_TEAM_CAPTAIN"){createPopAndShow("Promote via Email","<div><fieldset><label>Sorry, only "+teamAdj+" "+captainNoun+"s can send "+teamAdj+' emails.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}if(n.error=="EMAIL_TOO_LARGE"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, the email is too large, please try removing images or uploading them instead of pasting them into the body.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error==""){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your email address has not yet been verified. <br/><br/>Please <a href="#" onclick="resendVerifyEmail(true); return false;">click here</a> and we\'ll send another verification email to '+memberEmailAdd+' <br/><br/><small>If you\'d like to change your email address, please <a href="#" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">click here</a>.</small></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0);return}}for(contactIdsStr="",getContactIdsFromStr(),clearCheckedContacts(),i="",t=0;t<n.errors.length;t++)r=$("#rowConatctBook"+n.errors[t]+" > .tableColSortEmail").text(),i+="<li>"+(r&&r!=""?r:"unknown (id #"+n.errors[t]+")")+"</li>";dashboard?createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+(n.sentCount==1?jsTranslate("promoteViaEmail_oneEmailSent"):jsTranslate("promoteViaEmail_emailsSent",n.sentCount))+"<br/><br/>"+jsTranslate("promoteViaEmail_someEmailsFailed",n.errorCount,n.errorCount==1?jsTranslate("text_email"):jsTranslate("text_email_plural"))+"<ul>"+i+'</ul></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'):createPopAndShow("Promote via Email","<div><fieldset><label>Thanks, "+n.sentCount+" email"+(n.sentCount==1?" was":"s were")+" sent.<br/><br/>Note: It may take up to an hour for the email(s) to be delivered.<br/><br/>Important: We were unable to send "+n.errorCount+" email"+(n.errorCount==1?"":"s")+"<br/>The following email"+(n.errorCount==1?" was":"s were")+" not sent:<ul>"+i+'</ul></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>',undefined,undefined,undefined,undefined,!0)}))}function sendEmailDoNewHQ(){if(!sendingContactEmail){$("#btnLoaderInvite").show(),sendingContactEmail=!0,ckeditorMessage()&&$("#message").val(getCkeditorDataLocal(CKEDITOR.instances.message).replace(/&nbsp;/g," "));var n={subject:$("#subject").val(),message:$("#message").val(),contactsTo:prepareContactsForEmailSend(),saluDefault:saluDefault,saluFirstNamePre:saluFirstNamePre,saluFirstNameSuf:saluFirstNameSuf,emailWholeTeam:EmailWholeTeamEnabled};$.post(urlSendEmail,n,function(n){var i,t,r;if(sendingContactEmail=!1,$("#btnLoaderInvite").hide(),n.success&&(EmailWholeTeamEnabled&&!n.errorCount||n.sentCount==getDictLength(selectedContacts))){selectedContacts={},$("#selectedOuter").empty(),$("#template").val("0").change(),$("#manualTo, #manualToSalu, #subject").val(""),ckeditorMessage()?CKEDITOR.instances.message.setData(templateEmptyText):$("#message").val(templateEmptyText),onPopClose=function(){globalScrollTo($("#contentWrap").offset().top)},dashboard?createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+(n.sentCount==1?jsTranslate("promoteViaEmail_oneEmailSent"):jsTranslate("promoteViaEmail_emailsSent",n.sentCount))+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'):createPopAndShow("Promote via Email","<div><fieldset><label>Thanks!<br/>"+n.sentCount+" email"+(n.sentCount==1?" was":"s were")+' sent.<br/><br/>Note: It may take up to an hour for the email(s) to be delivered.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(dashboard){if(n.sentCount==0&&n.error=="NO_EMAILS_TO_SEND"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),'<div><fieldset><label>Sorry, an error occurred and no emails were sent.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="SPAN_SCORE"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+jsTranslate("promoteViaEmail_spamEmails")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="MEMBER_TEMP_BLOCKED"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+jsTranslate("promoteViaEmail_accountBlocked")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="EMAIL_NOT_VERIFIED"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>"+jsTranslate("promoteViaEmail_emailNotVerified",memberEmailAdd)+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="NOT_TEAM_CAPTAIN"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),"<div><fieldset><label>Sorry, only "+teamAdj+" "+captainNoun+"s can send "+teamAdj+' emails.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="EMAIL_TOO_LARGE"){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),'<div><fieldset><label>Sorry, the email is too large, please try removing images or uploading them instead of pasting them into the body.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error==""){createModalPopAndShow(jsTranslate("popTitle_promoteViaEmail"),'<div><fieldset><label>Sorry, your email address has not yet been verified. <br/><br/>Please <a href="#" onclick="resendVerifyEmail(true); return false;">click here</a> and we\'ll send another verification email to '+memberEmailAdd+' <br/><br/><small>If you\'d like to change your email address, please <a href="#" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">click here</a>.</small></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}}else{if(n.sentCount==0&&n.error=="NO_EMAILS_TO_SEND"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, an error occurred and no emails were sent.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="SPAN_SCORE"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, our spam-detection score for your email came back too high.<br/><br/>Please try removing excessive punctuations and formatting from your email and try again.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="MEMBER_TEMP_BLOCKED"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your account has been temporarily blocked from sending emails. This is due to excessive sending to invalid email addresses or to people who reporterted your email as spam.<br/><br/>Please try again tomorrow or <a href="/Static/Contact">contact us</a> for more info.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="EMAIL_NOT_VERIFIED"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your email address has not yet been verified. <br/><br/>Please <a href="#" onclick="resendVerifyEmail(true); return false;">click here</a> and we\'ll send another verification email to '+memberEmailAdd+' <br/><br/><small>If you\'d like to change your email address, please <a href="#" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">click here</a>.</small></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="NOT_TEAM_CAPTAIN"){createPopAndShow("Promote via Email","<div><fieldset><label>Sorry, only "+teamAdj+" "+captainNoun+"s can send "+teamAdj+' emails.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error=="EMAIL_TOO_LARGE"){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, the email is too large, please try removing images or uploading them instead of pasting them into the body.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n.error==""){createPopAndShow("Promote via Email",'<div><fieldset><label>Sorry, your email address has not yet been verified. <br/><br/>Please <a href="#" onclick="resendVerifyEmail(true); return false;">click here</a> and we\'ll send another verification email to '+memberEmailAdd+' <br/><br/><small>If you\'d like to change your email address, please <a href="#" onclick="closePop(\'genericPop\'); showAccountManage(); return false;">click here</a>.</small></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}}for(contactIdsStr="",getContactIdsFromStr(),clearCheckedContacts(),i="",t=0;t<n.errors.length;t++)r=$("#rowConatctBook"+n.errors[t]+" > .tableColSortEmail").text(),i+="<li>"+(r&&r!=""?r:"unknown (id #"+n.errors[t]+")")+"</li>";dashboard?createModalPopAndShow("Promote via Email","<div><fieldset><label>Thanks, "+n.sentCount+" email"+(n.sentCount==1?" was":"s were")+" sent.<br/><br/>Note: It may take up to an hour for the email(s) to be delivered.<br/><br/>Important: We were unable to send "+n.errorCount+" email"+(n.errorCount==1?"":"s")+"<br/>The following email"+(n.errorCount==1?" was":"s were")+" not sent:<ul>"+i+'</ul></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'):createPopAndShow("Promote via Email","<div><fieldset><label>Thanks, "+n.sentCount+" email"+(n.sentCount==1?" was":"s were")+" sent.<br/><br/>Note: It may take up to an hour for the email(s) to be delivered.<br/><br/>Important: We were unable to send "+n.errorCount+" email"+(n.errorCount==1?"":"s")+"<br/>The following email"+(n.errorCount==1?" was":"s were")+" not sent:<ul>"+i+'</ul></label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>')})}}function toggleContactActions(){var n=$("#contactBookActionBtn"),t=n.position();$("#contactBookActionsCont").css({left:t.left,top:t.top+n.height(),width:n.outerWidth()-6}).toggle()}function checkUncheckAll(n){if(!n)var n=window.event;if(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),$("#tblConatctBookList .emailRowInput:visible").length>contactCountLimit)return dashboard?createModalPopAndShow("Contact Book - Check All",'<div><fieldset><label>Sorry, you can not check all your contacts. <br/><br/>Address books contain old, stale addresses that ISPs use as spam traps. A "spam trap" is an address that doesn\'t send mail, and marks the mail it does receive as spam. If your invitations hit spam traps, the ISPs will <b>send your subsequent messages to spam</b>. <br/><br/>Please only check the contacts you feel will be interested in the content of your email and are likely to respond. This will reduce the risk of your email being reported as spam by uninterested recipients. If enough people report your email as spam, <b>your email will be blocked or filtered</b>&mdash;not what you intended.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'):createPopAndShow("Contact Book - Check All",'<div><fieldset><label>Sorry, you can not check all your contacts. <br/><br/>Address books contain old, stale addresses that ISPs use as spam traps. A "spam trap" is an address that doesn\'t send mail, and marks the mail it does receive as spam. If your invitations hit spam traps, the ISPs will <b>send your subsequent messages to spam</b>. <br/><br/>Please only check the contacts you feel will be interested in the content of your email and are likely to respond. This will reduce the risk of your email being reported as spam by uninterested recipients. If enough people report your email as spam, <b>your email will be blocked or filtered</b>&mdash;not what you intended.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'),!1;$("#tblConatctBookList .emailRowInput:visible").prop("checked",!checkboxesChecked),checkboxesChecked=!checkboxesChecked}function editContactInfo(n){if(dashboard&&!$editContactRow.length&&($editContactRow=$("#editContactRow")),!doingSavingContact){var t=$(n);if($curEditingElm!=""&&t[0]==$curEditingElm[0]){closeEditingContactDiv();return}PFR.Validators.Helper.clearValidationError("#editContactValue"),$curEditingElm=t,$("#tblConatctBookList .beingEdited").removeClass("beingEdited"),$("#editContactId").val($curEditingElm.parent().attr("id").replace("rowConatctBook","")),$("#editContactField").val($curEditingElm.attr("data-valuefield")),$("#editContactValue").val($curEditingElm.text()),$curEditingElm.addClass("beingEdited"),$editContactRow.hide().appendTo($curEditingElm.parent()).stop(!0,!0).slideDown(),$("#editContactValue").focus()}}function saveContactInfo(){if(!doingSavingContact&&$curEditingElm!=""){var n={idParam:$("#editContactId").val(),field:$("#editContactField").val(),value:getTextFromHtmlString($("#editContactValue").val())};if(PFR.Validators.Helper.clearValidationError("#editContactValue"),n.value==$curEditingElm.text()){closeEditingContactDiv();return}if(n.field=="Email"&&!PFR.Validators.Email("editContactValue")){$editContactRow.css("overflow","visible");return}doingSavingContact=!0,$.post(urlEditContact,n,function(t){if(t.success){if($curEditingElm.html(n.value),n.field=="FirstName"&&$curEditingElm.siblings(".isFakeGreet").length)$curEditingElm.siblings(".isFakeGreet").html(getBackupGreeting(n.value));else if(n.field=="Salu")n.value!=""?$curEditingElm.removeClass("isFakeGreet"):$curEditingElm.addClass("isFakeGreet").html(getBackupGreeting($curEditingElm.siblings(".tableColSortFirstName").text()));else if(n.field=="Email"){var i=$curEditingElm.siblings(".tableColCheckbox");i.children("img").length&&(i.children("img").remove(),i.children("input").show())}doingSavingContact=!1,closeEditingContactDiv();return}PFR.Validators.Helper.showValidationError("#editContactValue",t.error||"An error occurred. Please ensure that you're logged in."),$editContactRow.css("overflow","visible"),doingSavingContact=!1})}}function closeEditingContactDiv(){PFR.Validators.Helper.clearValidationError("#editContactValue"),$editContactRow.stop(!0,!0).slideUp(function(){$curEditingElm="",$("#editContactValue").val(""),$("#tblConatctBookList .beingEdited").removeClass("beingEdited")})}function addContact(){if(PFR.Validators.Email("newEmail")&&(PFR.Validators.Helper.clearValidationError("#newEmail"),!doingAddContact)){doingAddContact=!0,$("#btnLoaderAddContact").show();var n={firstName:$("#newFirstName").val(),lastName:$("#newLastName").val(),email:$("#newEmail").val(),salu:$("#newSalu").val()};$.post(urlAddContact,n,function(t){if(t.success){appendToContactBook(n,t),$("#newFirstName, #newLastName, #newEmail, #newSalu").val(""),doingAddContact=!1,$("#btnLoaderAddContact").hide();var i=$('<div class="submissionAlert">Contact added.</div>');$("#addContactBtnCont").prepend(i),i.delay(1e3).fadeOut("slow",function(){i.remove()});return}PFR.Validators.Helper.showValidationError("#newEmail",t.error),doingAddContact=!1,$("#btnLoaderAddContact").hide()})}}function getCheckedContacts(){var n=[];return $("#tblConatctBookList .emailRowInput:checked").each(function(){n.push($(this).attr("data-id"))}),n.join(splitStr)}function deleteContact(n){dashboard?createModalPopAndShow(jsTranslate("popTitle_EmailAddress"),"<div><fieldset><label>"+jsTranslate("emailAddress_deleteContactConfirm")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_yes"))+'" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+n+'\');">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_no"))+'" class="btn" onclick="closePop(\'genericPop\');"></div>',!0):createPopAndShow("Email Address",'<div><fieldset><label>Are you sure you\'d like to delete this contact?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+n+'\');">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}function deleteContacts(n){var t=[];if(n||(n="tblConatctBookList"),$("#"+n+" .emailRowInput:checked").each(function(){t.push($(this).attr("data-id"))}),dashboard){if(t.length<1){createModalPopAndShow(jsTranslate("popTitle_contactBook"),"<div><fieldset><label>"+jsTranslate("contactBook_deleteOne")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}createModalPopAndShow("Email Address","<div><fieldset><label>Are you sure you'd like to delete the "+t.length+" selected contact"+(t.length==1?"":"s")+'?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+t.join(splitStr)+'\');">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}else{if(t.length<1){createPopAndShow("Contact Book",'<div><fieldset><label>Please select at least one contact to delete.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}createPopAndShow("Email Address","<div><fieldset><label>Are you sure you'd like to delete the "+t.length+" selected contact"+(t.length==1?"":"s")+'?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+t.join(splitStr)+'\');">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}}function deleteAllContacts(n){var t=[];if(n||(n="tblConatctBookList"),$("#"+n+" .emailRowInput").each(function(){t.push($(this).attr("data-id"))}),dashboard){if(t.length<1){createModalPopAndShow(jsTranslate("popTitle_contactBook"),'<div><fieldset><label>No contacts to delete.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}createModalPopAndShow("Email Address",'<div><fieldset><label>Are you sure you\'d like to delete all your contacts?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+t.join(splitStr)+'\');">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}else{if(t.length<1){createPopAndShow("Contact Book",'<div><fieldset><label>No contacts to delete.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}createPopAndShow("Email Address",'<div><fieldset><label>Are you sure you\'d like to delete all your contacts?</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="Yes" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+t.join(splitStr)+'\');">&nbsp;&nbsp;<input type="button" value="No" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}}function doDeleteContacts(n){$.post(urlDeleteContact,{ids:n},function(t){if(!1&&window.deleteSelectedContact){deleteSelectedContact(t,n);return}if(t.success){var i=n.split(splitStr),r=i.length;$(i).each(function(){$("#rowConatctBook"+this).slideUp(function(){$(this).remove(),--r||(contactIdsStr="",getContactIdsFromStr(),clearCheckedContacts(),$("#tblConatctBookList .emailRowInput").length||$("#tblConatctBookList .tableBody").append('<div class="tableRow tableRowEmptyTable" id="noContactsRow">No contacts yet. <a href="#" onclick="showPop(\'addNewContactPop\'); return false;">Click here</a> to add one manually, or <a href="#" onclick="showPop(\'contactBookSocialPop\'); return false;">click here</a> to import them from your email client.</div>'))})});return}alert(jsTranslate("generalError"))})}function sendEmails(){if(contactIdsStr=getCheckedContacts(),contactIdsStr=="")if(dashboard)createModalPopAndShow(jsTranslate("popTitle_contactBook"),"<div><fieldset><label>"+jsTranslate("contactBook_selectOne")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');else{createPopAndShow("Contact Book",'<div><fieldset><label>Please select at least one contact.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}dashboard?showSelectedCategory("Email"):(getContactIdsFromStr(),changeTab(1))}function plaxo(n){if(dashboard){if(n=="addressbook"&&$.client.os!="Mac"){createModalPopAndShow(jsTranslate("popTitle_importEmailAddress"),"<div><fieldset><label>"+jsTranslate("importEmailAddress_appleNeedsMac")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n=="outlook"&&$.client.os!="Windows"){createModalPopAndShow(jsTranslate("popTitle_importEmailAddress"),"<div><fieldset><label>"+jsTranslate("importEmailAddress_outlookNeedsWindows")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}}else{if(n=="addressbook"&&$.client.os!="Mac"){createPopAndShow("Import Email Addresses",'<div><fieldset><label>Sorry, but Apple Address Book contacts can only be uploaded using a Mac operating system.<br/>Please try importing email addresses by clicking a different button.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}if(n=="outlook"&&$.client.os!="Windows"){createPopAndShow("Import Email Addresses",'<div><fieldset><label>Sorry, but Microsoft Outlook contacts can only be uploaded using a Windows operating system.<br/>Please try importing email addresses by clicking a different button.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}}cloudsponge.launch(n)}function getContacts_callback2(n,t){saveEmails(n,t)}function saveEmails(n){var r,u,i,f;if(!savingContacts){for(savingContacts=!0,r=[],u=0;u<n.length;u++)i=n[u],r.push(i.selectedEmail()+splitStrPrp+(typeof i.first_name!="undefined"?i.first_name:"")+splitStrPrp+(typeof i.last_name!="undefined"?i.last_name:""));if(r.length==0){if(closePop("contactBookSocialPop"),savingContacts=!1,dashboard){createModalPopAndShow("Import Email Addresses",'<div><fieldset><label>Sorry, an error occurred and no emails added to your contact book.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}createPopAndShow("Import Email Addresses",'<div><fieldset><label>Sorry, an error occurred and no emails added to your contact book.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}f=encodeURIComponent(r.join(splitStr)),$.post(urlSaveContact,{contactsStr:f},function(n){var u,i,t;if($("#contactBookSocialPop").hide(),savingContacts=!1,u=function(){if(window.addContactsType){addContactsType=="Email"?n.contactsList.length>0&&(contactsList=contactsList.concat(n.contactsList)):addContactsType=="Contacts"?showSelectedCategory("Tools"):location.href=eventPath+"/Dashboard?tab=contactbook";return}location.href=eventPath+"/Dashboard?tab=contactbook"},n.success&&r.length==n.savedCount){onPopClose=function(){u(n)},createPopAndShow("Import Email Addresses","<div><fieldset><label>Thanks!<br/>"+n.savedCount+" contact"+(n.savedCount==1?" was":"s were")+' added to your contact book.<br/><br/>This page will now reload.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>'),setTimeout(function(){u(n)},5e3);return}for(i="",t=0;t<n.errorsInvalid.length;t++)i+="<li>"+n.errorsInvalid[t]+" - invalid email</li>";for(t=0;t<n.errorDups.length;t++)i+="<li>"+n.errorDups[t]+" - duplicate email</li>";if(!n.success){createPopAndShow("Import Email Addresses","<div><fieldset><label>Sorry, no contacts were added to your contact book."+(n.errorCount&&n.errorCount>0?"<br/>The following email"+(n.errorCount==1?" was":"s were")+" not saved:<ul>"+i+"</ul>":"")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}onPopClose=function(){u(n)},createPopAndShow("Import Email Addresses","<div><fieldset><label>Thanks, "+n.savedCount+" contact"+(n.savedCount==1?" was":"s were")+" added to your contact book.<br/><br/>However, we were unable to save "+n.errorCount+" contact"+(n.errorCount==1?"":"s")+"<br/>The following email"+(n.errorCount==1?" was":"s were")+" not saved:<ul>"+i+'</ul><br/><br/>Clicking "OK" will refresh this page.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="OK" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>')})}}function sendEmailCount(n){return isEmailTeam()?teamAdjTitle:isEmailDonor()?"Donor":n?n.length+1:1}function sendEmailCountNewHQ(n){return EmailWholeTeamEnabled?teamAdjTitle:n}function sendEmailInYahoo(){var e=window.open("","yahoo"),t,u="",n=contactIdsStr.split(splitStr),i,r,f;if(n&&n.length&&(n.length!=1||n[0]!="")){for(i=[],r=0;r<n.length;r++)i.push(encodeURIComponent($("#rowConatctBook"+n[r]+" .tableColSortEmail").html()));n.length==1?(t="To="+i.join()+"&",u=encodeURIComponent($("#rowConatctBook"+n[0]+" .tableColSortGreeting").html()+"  ")):(t="Bcc="+i.join()+"&",u=encodeURIComponent(saluDefault+"  "))}else t="&";f=ckeditorMessage()?getCkeditorDataLocal(CKEDITOR.instances.message):$("#message").val(),e.location.href="https://compose.mail.yahoo.com/?"+t+"Subj="+encodeURIComponent($("#subject").val())+"&Body="+u+encodeURIComponent(f.replace(/\r\n|\r|\n/g,""))}function checkTryImportContactBookInImportPop(n){(window.addContactsType&&(addContactsType=n),checkOtherToImportContactsFrom)&&$.post(hqGetOtherToImportContactsFrom,function(n){var t,i;if(checkOtherToImportContactsFrom=!1,n.success){for($addFriendsContactOtherMember=$('<select id="addFriendsContactOtherMember" />').appendTo("<div />"),t=0;t<n.info.length;t++)i=n.info[t],$addFriendsContactOtherMember.append('<option value="'+i.EventID+'">'+i.EventName+" ("+i.EventYear+")</option>");$("#addFriendsContactOtherMemberCont").css({padding:10,border:"solid 1px lightgray",margin:6}).html('<label for="addFriendsContactOtherMember">Or if you\'d like to import your contacts from another campaign, please select the campaign and click Import.</label>&nbsp; &nbsp;'+$addFriendsContactOtherMember.parent().html()+'&nbsp; &nbsp;<input type="submit" value="Import" class="btn" onclick="importContactBookFromOther();"/>'),$("#contactBookSocialPop:visible").length&&sizePop("contactBookSocialPop")}})}function showImportContactBookPop(n){$("#contactBookSocialPop").modal("show"),checkTryImportContactBookInImportPop(n)}function importContactBookFromOther(){$.post(hqImportContactBookFromOther+"?evntIDImportFrom="+$("#addFriendsContactOtherMember").val(),function(n){if(!n.success){alert(jsTranslate("generalError")+"("+n.error+")");return}onPopClose=function(){location.href=location.href},$("#addFriendsContactCont").html('<div><fieldset><label>Thanks!<br/><br/>This page will now reload.</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="submit" value="OK" class="btn" onclick="closePop(\'hqRsvpPop\'); return false;"></div>'),setTimeout(function(){location.href=location.href},3e3)})}function downloadContactBookCSV(){window.open(urlDownloadContacts)}var FBInvitesQueue=[],FBInvitesSending=!1,dashboard,contactCountLimit,contactIdsStr,contactIdsGlobal,doingAddInviteContact,sendingContactEmail,checkboxesChecked,doingAddContact,csPageOptions,savingContacts,checkOtherToImportContactsFrom,refreshThisInvite;if($(function(){dashboard=$("#cmpManagerPops").length}),$("#socialImageContainer li").length>1){$(document).on("click",function(n){$(n.target).closest("#socialImageContainer, #socialImageContainerOuter").length||$("#socialImageContainer").hide()});$("#socialImageContainerOuter").click(function(){$("#socialImageContainer").toggle()}),$("#socialImageContainer").find("li").click(function(){$("#socialImage").attr("src",$(this).children().attr("src"))})}else $("#socialImageContainerOuter").css("cursor","default");contactCountLimit=20,contactIdsStr="",contactIdsGlobal=[],getContactIdsFromStr(),doingAddInviteContact=!1,sendingContactEmail=!1,manEmailIgnore=!1,checkboxesChecked=!1;var $curEditingElm="",$editContactRow=$("#editContactRow"),doingSavingContact=!1;doingAddContact=!1,csPageOptions={afterSubmitContacts:getContacts_callback2,afterInit:function(){cloudNotLoaded=!1,$("#addFriendsContactWrap > .friendsSocialCloudLoading").removeClass("friendsSocialCloudLoading")},skipAddressBooks:!0,skipSourceMenu:!0,floatbox:{framed:window.self!==window.top},sources:["gmail","yahoo","windowslive","aol","outlook","addressbook","icloud","linkedin"],locale:currentLanguage=="French"?"fr":""},function(n){var i=document,r="script",t=i.createElement(r),u=i.getElementsByTagName(r)[0];t.async=1,t.src=n,u.parentNode.insertBefore(t,u)}("//api.cloudsponge.com/widget/KeZ2kiBhmoI9bEkBBONuBg.js"),$(function(){$("#hqContentWrap").css("min-height",600)}),savingContacts=!1,checkOtherToImportContactsFrom=!0,refreshThisInvite="";
(function(n){n.color={},n.color.make=function(t,i,r,u){var f={};return f.r=t||0,f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r),255),f.g=n(0,parseInt(f.g),255),f.b=n(0,parseInt(f.b),255),f.a=n(0,f.a,1),f},f.clone=function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()},n.color.extract=function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!=""&&r!="transparent")break;t=t.parent()}while(t.length&&!n.nodeName(t.get(0),"body"));return r=="rgba(0, 0, 0, 0)"&&(r="transparent"),n.color.parse(r)},n.color.parse=function(i){var r,u=n.color.make,f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))?u(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(f=n.trim(i).toLowerCase(),f=="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(n){function t(t,i){var r=i.children("."+t)[0];if(r==null&&(r=document.createElement("canvas"),r.className=t,n(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var u=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,e=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;this.pixelRatio=f/e,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function r(i,r,f,e){function nt(n,t){t=[l].concat(t);for(var i=0;i<n.length;++i)n[i].apply(this,t)}function ei(){for(var u={Canvas:t},r,i=0;i<e.length;++i)r=e[i],r.init(l,u),r.options&&n.extend(!0,o,r.options)}function oi(t){var f;n.extend(!0,o,t),t&&t.colors&&(o.colors=t.colors),o.xaxis.color==null&&(o.xaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=n.color.parse(o.grid.color).scale("a",.22).toString());for(var r,s=i.css("font-size"),c=s?+s.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*c),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")},e=o.xaxes.length||1,u=0;u<e;++u)r=o.xaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.xaxis,r),o.xaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(e=o.yaxes.length||1,u=0;u<e;++u)r=o.yaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.yaxis,r),o.yaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=n.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=n.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&n.extend(!0,o.series.lines,o.lines),o.points&&n.extend(!0,o.series.points,o.points),o.bars&&n.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),u=0;u<o.xaxes.length;++u)et(y,u+1).options=o.xaxes[u];for(u=0;u<o.yaxes.length;++u)et(w,u+1).options=o.yaxes[u];for(f in p)o.hooks[f]&&o.hooks[f].length&&(p[f]=p[f].concat(o.hooks[f]));nt(p.processOptions,[o])}function ni(n){c=si(n),ci(),li()}function si(t){for(var u=[],r,i=0;i<t.length;++i)r=n.extend(!0,{},o.series),t[i].data!=null?(r.data=t[i].data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);return u}function ft(n,t){var i=n[t+"axis"];return typeof i=="object"&&(i=i.n),typeof i!="number"&&(i=1),i}function tt(){return n.grep(y.concat(w),function(n){return n})}function ti(n){for(var i={},t,r=0;r<y.length;++r)t=y[r],t&&t.used&&(i["x"+t.n]=t.c2p(n.left));for(r=0;r<w.length;++r)t=w[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function hi(n){for(var u={},t,i,r=0;r<y.length;++r)if(t=y[r],t&&t.used&&(i="x"+t.n,n[i]==null&&t.n==1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<w.length;++r)if(t=w[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n==1&&(i="y"),n[i]!=null)){u.top=t.p2c(n[i]);break}return u}function et(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==y?"x":"y",options:n.extend(!0,{},t==y?o.xaxis:o.yaxis)}),t[i-1]}function ci(){for(var f=c.length,e=-1,u,h,t,l,a,i=0;i<c.length;++i)u=c[i].color,u!=null&&(f--,typeof u=="number"&&u>e&&(e=u));f<=e&&(f=e+1);var v,s=[],p=o.colors,b=p.length,r=0;for(i=0;i<f;i++)v=n.color.parse(p[i%b]||"#666"),i%b==0&&i&&(r=r>=0?r<.5?-r-.2:0:-r),s[i]=v.scale("rgb",1+r);for(h=0,i=0;i<c.length;++i){if(t=c[i],t.color==null?(t.color=s[h].toString(),++h):typeof t.color=="number"&&(t.color=s[t.color].toString()),t.lines.show==null){a=!0;for(l in t)if(t[l]&&t[l].show){a=!1;break}a&&(t.lines.show=!0)}t.lines.zero==null&&(t.lines.zero=!!t.lines.fill),t.xaxis=et(y,ft(t,"x")),t.yaxis=et(w,ft(t,"y"))}}function li(){function k(n,t,i){t<n.datamin&&t!=-v&&(n.datamin=t),i>n.datamax&&i!=v&&(n.datamax=i)}var g=Number.POSITIVE_INFINITY,rt=Number.NEGATIVE_INFINITY,v=Number.MAX_VALUE,o,l,f,r,ct,t,u,h,ht,st,lt,i,s,ut,ft,e,et,ot,b,a;for(n.each(tt(),function(n,t){t.datamin=g,t.datamax=rt,t.used=!1}),o=0;o<c.length;++o)t=c[o],t.datapoints={points:[]},nt(p.processRawData,[t,t.data,t.datapoints]);for(o=0;o<c.length;++o)if(t=c[o],ft=t.data,e=t.datapoints.format,e||(e=[],e.push({x:!0,number:!0,required:!0}),e.push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(et=!!(t.bars.show&&t.bars.zero||t.lines.show&&t.lines.zero),e.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:et}),t.bars.horizontal&&(delete e[e.length-1].y,e[e.length-1].x=!0)),t.datapoints.format=e),t.datapoints.pointsize==null)for(t.datapoints.pointsize=e.length,h=t.datapoints.pointsize,u=t.datapoints.points,ot=t.lines.show&&t.lines.steps,t.xaxis.used=t.yaxis.used=!0,l=f=0;l<ft.length;++l,f+=h){if(ut=ft[l],b=ut==null,!b)for(r=0;r<h;++r)i=ut[r],s=e[r],s&&(s.number&&i!=null&&(i=+i,isNaN(i)?i=null:i==Infinity?i=v:i==-Infinity&&(i=-v)),i==null&&(s.required&&(b=!0),s.defaultValue!=null&&(i=s.defaultValue))),u[f+r]=i;if(b)for(r=0;r<h;++r)i=u[f+r],i!=null&&(s=e[r],s.autoscale!==!1&&(s.x&&k(t.xaxis,i,i),s.y&&k(t.yaxis,i,i))),u[f+r]=null;else if(ot&&f>0&&u[f-h]!=null&&u[f-h]!=u[f]&&u[f-h+1]!=u[f+1]){for(r=0;r<h;++r)u[f+h+r]=u[f+r];u[f+1]=u[f-h+1],f+=h}}for(o=0;o<c.length;++o)t=c[o],nt(p.processDatapoints,[t,t.datapoints]);for(o=0;o<c.length;++o){t=c[o],u=t.datapoints.points,h=t.datapoints.pointsize,e=t.datapoints.format;var w=g,y=g,d=rt,it=rt;for(l=0;l<u.length;l+=h)if(u[l]!=null)for(r=0;r<h;++r)(i=u[l+r],s=e[r],s&&s.autoscale!==!1&&i!=v&&i!=-v)&&(s.x&&(i<w&&(w=i),i>d&&(d=i)),s.y&&(i<y&&(y=i),i>it&&(it=i)));if(t.bars.show){switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}t.bars.horizontal?(y+=a,it+=a+t.bars.barWidth):(w+=a,d+=a+t.bars.barWidth)}k(t.xaxis,w,d),k(t.yaxis,y,it)}n.each(tt(),function(n,t){t.datamin==g&&(t.datamin=null),t.datamax==rt&&(t.datamax=null)})}function ai(){i.css("padding",0).children().filter(function(){return!n(this).hasClass("flot-overlay")&&!n(this).hasClass("flot-base")}).remove(),i.css("position")=="static"&&i.css("position","relative"),a=new t("flot-base",i),it=new t("flot-overlay",i),s=a.context,v=it.context,g=n(it.element).unbind();var r=i.data("plot");r&&(r.shutdown(),it.clear()),i.data("plot",l)}function yi(){o.grid.hoverable&&(g.mousemove(kt),g.bind("mouseleave",vt)),o.grid.clickable&&g.click(at),nt(p.bindEvents,[g])}function ii(){rt&&clearTimeout(rt),g.unbind("mousemove",kt),g.unbind("mouseleave",vt),g.unbind("click",at),nt(p.shutdown,[g])}function sr(n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;n.direction=="x"?(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(n.min))):(i=n.scale=b/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min))),n.p2c=t==u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i},n.c2p=f?function(n){return f(r+n/i)}:function(n){return r+n/i}}function hr(n){for(var t=n.options,u=n.ticks||[],i=t.labelWidth||0,f=t.labelHeight||0,s=i||(n.direction=="x"?Math.floor(a.width/(u.length||1)):null),h=n.direction+"Axis "+n.direction+n.n+"Axis",c="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+h,l=t.font||"flot-tick-label tickLabel",e,o,r=0;r<u.length;++r)(e=u[r],e.label)&&(o=a.getTextInfo(c,e.label,l,null,s),i=Math.max(i,o.width),f=Math.max(f,o.height));n.labelWidth=t.labelWidth||i,n.labelHeight=t.labelHeight||f}function tr(t){var r=t.labelWidth,u=t.labelHeight,e=t.options.position,l=t.direction==="x",f=t.options.tickLength,i=o.grid.axisMargin,s=o.grid.labelMargin,v=!0,p=!0,b=!0,c=!1;n.each(l?y:w,function(n,i){i&&(i.show||i.reserveSpace)&&(i===t?c=!0:i.options.position===e&&(c?p=!1:v=!1),c||(b=!1))}),p&&(i=0),f==null&&(f=b?"full":5),isNaN(+f)||(s+=+f),l?(u+=s,e=="bottom"?(h.bottom+=u+i,t.box={top:a.height-h.bottom,height:u}):(t.box={top:h.top+i,height:u},h.top+=u+i)):(r+=s,e=="left"?(t.box={left:h.left+i,width:r},h.left+=r+i):(h.right+=r+i,t.box={left:a.width-h.right,width:r})),t.position=e,t.tickLength=f,t.box.padding=s,t.innermost=v}function rr(n){n.direction=="x"?(n.box.left=h.left-n.labelWidth/2,n.box.width=a.width-h.left-h.right+n.labelWidth):(n.box.top=h.top-n.labelHeight/2,n.box.height=a.height-h.bottom-h.top+n.labelHeight)}function ur(){var i=o.grid.minBorderMargin,u,r,t;if(i==null)for(i=0,r=0;r<c.length;++r)i=Math.max(i,2*(c[r].points.radius+c[r].points.lineWidth/2));t={left:i,right:i,top:i,bottom:i},n.each(tt(),function(n,i){i.reserveSpace&&i.ticks&&i.ticks.length&&(i.direction==="x"?(t.left=Math.max(t.left,i.labelWidth/2),t.right=Math.max(t.right,i.labelWidth/2)):(t.bottom=Math.max(t.bottom,i.labelHeight/2),t.top=Math.max(t.top,i.labelHeight/2)))}),h.left=Math.ceil(Math.max(t.left,h.left)),h.right=Math.ceil(Math.max(t.right,h.right)),h.top=Math.ceil(Math.max(t.top,h.top)),h.bottom=Math.ceil(Math.max(t.bottom,h.bottom))}function ri(){var r,e=tt(),u=o.grid.show,f,t,i;for(t in h)f=o.grid.margin||0,h[t]=typeof f=="number"?f:f[t]||0;nt(p.processOffset,[h]);for(t in h)h[t]+=typeof o.grid.borderWidth=="object"?u?o.grid.borderWidth[t]:0:u?o.grid.borderWidth:0;if(n.each(e,function(n,t){var i=t.options;t.show=i.show==null?t.used:i.show,t.reserveSpace=i.reserveSpace==null?t.show:i.reserveSpace,ui(t)}),u){for(i=n.grep(e,function(n){return n.show||n.reserveSpace}),n.each(i,function(n,t){or(t),er(t),fr(t,t.ticks),hr(t)}),r=i.length-1;r>=0;--r)tr(i[r]);ur(),n.each(i,function(n,t){rr(t)})}d=a.width-h.left-h.right,b=a.height-h.bottom-h.top,n.each(e,function(n,t){sr(t)}),u&&nr(),pi()}function ui(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin),i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f==0?(e=i==0?1:.01,t.min==null&&(r-=e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=null&&n.datamax<=0&&(i=0)))),n.min=r,n.max=i}function or(t){var i=t.options,l,p,h,r,f,s,b,c;l=typeof i.ticks=="number"&&i.ticks>0?i.ticks:.3*Math.sqrt(t.direction=="x"?a.width:a.height);var v=(t.max-t.min)/l,o=-Math.floor(Math.log(v)/Math.LN10),e=i.tickDecimals;if(e!=null&&o>e&&(o=e),p=Math.pow(10,-o),h=v/p,h<1.5?r=1:h<3?(r=2,h>2.25&&(e==null||o+1<=e)&&(r=2.5,++o)):r=h<7.5?5:10,r*=p,i.minTickSize!=null&&r<i.minTickSize&&(r=i.minTickSize),t.delta=v,t.tickDecimals=Math.max(0,e!=null?e:o),t.tickSize=i.tickSize||r,i.mode=="time"&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");t.tickGenerator||(t.tickGenerator=function(n){var i=[],e=u(n.min,n.tickSize),r=0,t=Number.NaN,f;do f=t,t=e+r*n.tickSize,i.push(t),++r;while(t<n.max&&t!=f);return i},t.tickFormatter=function(n,t){var u=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(n*u)/u,f,r;return t.tickDecimals!=null&&(f=i.indexOf("."),r=f==-1?0:i.length-f-1,r<t.tickDecimals)?(r?i:i+".")+(""+u).substr(1,t.tickDecimals-r):i}),n.isFunction(i.tickFormatter)&&(t.tickFormatter=function(n,t){return""+i.tickFormatter(n,t)}),i.alignTicksWithAxis!=null&&(f=(t.direction=="x"?y:w)[i.alignTicksWithAxis-1],f&&f.used&&f!=t&&(s=t.tickGenerator(t),s.length>0&&(i.min==null&&(t.min=Math.min(t.min,s[0])),i.max==null&&s.length>1&&(t.max=Math.max(t.max,s[s.length-1]))),t.tickGenerator=function(n){for(var r=[],t,i=0;i<f.ticks.length;++i)t=(f.ticks[i].v-f.min)/(f.max-f.min),t=n.min+t*(n.max-n.min),r.push(t);return r},t.mode||i.tickDecimals!=null||(b=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),c=t.tickGenerator(t),c.length>1&&/\..*0$/.test((c[1]-c[0]).toFixed(b))||(t.tickDecimals=b))))}function er(t){var i=t.options.ticks,u=[],o,f,e,r;for(i==null||typeof i=="number"&&i>0?u=t.tickGenerator(t):i&&(u=n.isFunction(i)?i(t):i),t.ticks=[],o=0;o<u.length;++o)e=null,r=u[o],typeof r=="object"?(f=+r[0],r.length>1&&(e=r[1])):f=+r,e==null&&(e=t.tickFormatter(f,t)),isNaN(f)||t.ticks.push({v:f,label:e})}function fr(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.max(n.max,t[t.length-1].v)))}function dt(){var n,t;for(a.clear(),nt(p.drawBackground,[s]),n=o.grid,n.show&&n.backgroundColor&&ir(),n.show&&!n.aboveData&&ct(),t=0;t<c.length;++t)nt(p.drawSeries,[s,c[t]]),gi(c[t]);nt(p.draw,[s]),n.show&&n.aboveData&&ct(),a.render(),ut()}function yt(n,t){for(var f,i,r,u,o=tt(),s,e=0;e<o.length;++e)if(f=o[e],f.direction==t&&(u=t+f.n+"axis",n[u]||f.n!=1||(u=t+"axis"),n[u])){i=n[u].from,r=n[u].to;break}return n[u]||(f=t=="x"?y[0]:w[0],i=n[t+"1"],r=n[t+"2"]),i!=null&&r!=null&&i>r&&(s=i,i=r,r=s),{from:i,to:r,axis:f}}function ir(){s.save(),s.translate(h.left,h.top),s.fillStyle=gt(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)"),s.fillRect(0,0,d,b),s.restore()}function ct(){var v,f,t,e,g,ft,et,ot,nt,rt,p;if(s.save(),s.translate(h.left,h.top),g=o.grid.markings,g)for(n.isFunction(g)&&(f=l.getAxes(),f.xmin=f.xaxis.min,f.xmax=f.xaxis.max,f.ymin=f.yaxis.min,f.ymax=f.yaxis.max,g=g(f)),v=0;v<g.length;++v){var it=g[v],i=yt(it,"x"),r=yt(it,"y");(i.from==null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),r.from==null&&(r.from=r.axis.min),r.to==null&&(r.to=r.axis.max),i.to<i.axis.min||i.from>i.axis.max||r.to<r.axis.min||r.from>r.axis.max)||(i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),ft=i.from===i.to,et=r.from===r.to,ft&&et)||(i.from=Math.floor(i.axis.p2c(i.from)),i.to=Math.floor(i.axis.p2c(i.to)),r.from=Math.floor(r.axis.p2c(r.from)),r.to=Math.floor(r.axis.p2c(r.to)),ft||et?(ot=it.lineWidth||o.grid.markingsLineWidth,nt=ot%2?.5:0,s.beginPath(),s.strokeStyle=it.color||o.grid.markingsColor,s.lineWidth=ot,ft?(s.moveTo(i.to+nt,r.from),s.lineTo(i.to+nt,r.to)):(s.moveTo(i.from,r.to+nt),s.lineTo(i.to,r.to+nt)),s.stroke()):(s.fillStyle=it.color||o.grid.markingsColor,s.fillRect(i.from,r.to,i.to-i.from,r.from-r.to)))}for(f=tt(),t=o.grid.borderWidth,rt=0;rt<f.length;++rt){var u=f[rt],ut=u.box,k=u.tickLength,a,c,y,w;if(u.show&&u.ticks.length!=0){for(s.lineWidth=1,u.direction=="x"?(a=0,c=k=="full"?u.position=="top"?0:b:ut.top-h.top+(u.position=="top"?ut.height:0)):(c=0,a=k=="full"?u.position=="left"?0:d:ut.left-h.left+(u.position=="left"?ut.width:0)),u.innermost||(s.strokeStyle=u.options.color,s.beginPath(),y=w=0,u.direction=="x"?y=d+1:w=b+1,s.lineWidth==1&&(u.direction=="x"?c=Math.floor(c)+.5:a=Math.floor(a)+.5),s.moveTo(a,c),s.lineTo(a+y,c+w),s.stroke()),s.strokeStyle=u.options.tickColor,s.beginPath(),v=0;v<u.ticks.length;++v)(p=u.ticks[v].v,y=w=0,isNaN(p)||p<u.min||p>u.max||k=="full"&&(typeof t=="object"&&t[u.position]>0||t>0)&&(p==u.min||p==u.max))||(u.direction=="x"?(a=u.p2c(p),w=k=="full"?-b:k,u.position=="top"&&(w=-w)):(c=u.p2c(p),y=k=="full"?-d:k,u.position=="left"&&(y=-y)),s.lineWidth==1&&(u.direction=="x"?a=Math.floor(a)+.5:c=Math.floor(c)+.5),s.moveTo(a,c),s.lineTo(a+y,c+w));s.stroke()}}t&&(e=o.grid.borderColor,typeof t=="object"||typeof e=="object"?(typeof t!="object"&&(t={top:t,right:t,bottom:t,left:t}),typeof e!="object"&&(e={top:e,right:e,bottom:e,left:e}),t.top>0&&(s.strokeStyle=e.top,s.lineWidth=t.top,s.beginPath(),s.moveTo(0-t.left,0-t.top/2),s.lineTo(d,0-t.top/2),s.stroke()),t.right>0&&(s.strokeStyle=e.right,s.lineWidth=t.right,s.beginPath(),s.moveTo(d+t.right/2,0-t.top),s.lineTo(d+t.right/2,b),s.stroke()),t.bottom>0&&(s.strokeStyle=e.bottom,s.lineWidth=t.bottom,s.beginPath(),s.moveTo(d+t.right,b+t.bottom/2),s.lineTo(0,b+t.bottom/2),s.stroke()),t.left>0&&(s.strokeStyle=e.left,s.lineWidth=t.left,s.beginPath(),s.moveTo(0-t.left/2,b+t.bottom),s.lineTo(0-t.left/2,0),s.stroke())):(s.lineWidth=t,s.strokeStyle=o.grid.borderColor,s.strokeRect(-t/2,-t/2,d+t,b+t))),s.restore()}function nr(){n.each(tt(),function(n,t){var i=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,v=t.options.font||"flot-tick-label tickLabel",r,u,f,o,s,e;if(a.removeText(c),t.show&&t.ticks.length!=0)for(e=0;e<t.ticks.length;++e)(r=t.ticks[e],!r.label||r.v<t.min||r.v>t.max)||(t.direction=="x"?(o="center",u=h.left+t.p2c(r.v),t.position=="bottom"?f=i.top+i.padding:(f=i.top+i.height-i.padding,s="bottom")):(s="middle",f=h.top+t.p2c(r.v),t.position=="left"?(u=i.left+i.width-i.padding,o="right"):u=i.left+i.padding),a.addText(c,u,f,r.label,v,null,null,o,s))})}function gi(n){n.lines.show&&di(n),n.bars.show&&wi(n),n.points.show&&ki(n)}function di(n){function u(n,t,i,r,u){var l=n.points,a=n.pointsize,v=null,y=null,c;for(s.beginPath(),c=a;c<l.length;c+=a){var f=l[c-a],e=l[c-a+1],o=l[c],h=l[c+1];if(f!=null&&o!=null){if(e<=h&&e<u.min){if(h<u.min)continue;f=(u.min-e)/(h-e)*(o-f)+f,e=u.min}else if(h<=e&&h<u.min){if(e<u.min)continue;o=(u.min-e)/(h-e)*(o-f)+f,h=u.min}if(e>=h&&e>u.max){if(h>u.max)continue;f=(u.max-e)/(h-e)*(o-f)+f,e=u.max}else if(h>=e&&h>u.max){if(e>u.max)continue;o=(u.max-e)/(h-e)*(o-f)+f,h=u.max}if(f<=o&&f<r.min){if(o<r.min)continue;e=(r.min-f)/(o-f)*(h-e)+e,f=r.min}else if(o<=f&&o<r.min){if(f<r.min)continue;h=(r.min-f)/(o-f)*(h-e)+e,o=r.min}if(f>=o&&f>r.max){if(o>r.max)continue;e=(r.max-f)/(o-f)*(h-e)+e,f=r.max}else if(o>=f&&o>r.max){if(f>r.max)continue;h=(r.max-f)/(o-f)*(h-e)+e,o=r.max}(f!=v||e!=y)&&s.moveTo(r.p2c(f)+t,u.p2c(e)+i),v=o,y=h,s.lineTo(r.p2c(o)+t,u.p2c(h)+i)}}s.stroke()}function e(n,t,i){for(var c=n.points,o=n.pointsize,b=Math.min(Math.max(0,i.min),i.max),h=0,k,l=!1,a=1,w=0,p=0,v,y;;){if(o>0&&h>c.length+o)break;h+=o;var r=c[h-o],u=c[h-o+a],f=c[h],e=c[h+a];if(l){if(o>0&&r!=null&&f==null){p=h,o=-o,a=2;continue}if(o<0&&h==w+o){s.fill(),l=!1,o=-o,a=1,h=w=p+o;continue}}if(r!=null&&f!=null){if(r<=f&&r<t.min){if(f<t.min)continue;u=(t.min-r)/(f-r)*(e-u)+u,r=t.min}else if(f<=r&&f<t.min){if(r<t.min)continue;e=(t.min-r)/(f-r)*(e-u)+u,f=t.min}if(r>=f&&r>t.max){if(f>t.max)continue;u=(t.max-r)/(f-r)*(e-u)+u,r=t.max}else if(f>=r&&f>t.max){if(r>t.max)continue;e=(t.max-r)/(f-r)*(e-u)+u,f=t.max}if(l||(s.beginPath(),s.moveTo(t.p2c(r),i.p2c(b)),l=!0),u>=i.max&&e>=i.max){s.lineTo(t.p2c(r),i.p2c(i.max)),s.lineTo(t.p2c(f),i.p2c(i.max));continue}else if(u<=i.min&&e<=i.min){s.lineTo(t.p2c(r),i.p2c(i.min)),s.lineTo(t.p2c(f),i.p2c(i.min));continue}v=r,y=f,u<=e&&u<i.min&&e>=i.min?(r=(i.min-u)/(e-u)*(f-r)+r,u=i.min):e<=u&&e<i.min&&u>=i.min&&(f=(i.min-u)/(e-u)*(f-r)+r,e=i.min),u>=e&&u>i.max&&e<=i.max?(r=(i.max-u)/(e-u)*(f-r)+r,u=i.max):e>=u&&e>i.max&&u<=i.max&&(f=(i.max-u)/(e-u)*(f-r)+r,e=i.max),r!=v&&s.lineTo(t.p2c(v),i.p2c(u)),s.lineTo(t.p2c(r),i.p2c(u)),s.lineTo(t.p2c(f),i.p2c(e)),f!=y&&(s.lineTo(t.p2c(f),i.p2c(e)),s.lineTo(t.p2c(y),i.p2c(e)))}}}var t,i,r,f;s.save(),s.translate(h.left,h.top),s.lineJoin="round",t=n.lines.lineWidth,i=n.shadowSize,t>0&&i>0&&(s.lineWidth=i,s.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),s.lineWidth=i/2,u(n.datapoints,Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis)),s.lineWidth=t,s.strokeStyle=n.color,f=ot(n.lines,n.color,0,b),f&&(s.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis)),t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis),s.restore()}function ki(n){function r(n,t,i,r,u,f,e,o){for(var a=n.points,v=n.pointsize,h,c,l=0;l<a.length;l+=v)(h=a[l],c=a[l+1],h==null||h<f.min||h>f.max||c<e.min||c>e.max)||(s.beginPath(),h=f.p2c(h),c=e.p2c(c)+r,o=="circle"?s.arc(h,c,t,0,u?Math.PI:Math.PI*2,!1):o(s,h,c,t,u),s.closePath(),i&&(s.fillStyle=i,s.fill()),s.stroke())}var t;s.save(),s.translate(h.left,h.top);var i=n.points.lineWidth,e=n.shadowSize,u=n.points.radius,f=n.points.symbol;i==0&&(i=.0001),i>0&&e>0&&(t=e/2,s.lineWidth=t,s.strokeStyle="rgba(0,0,0,0.1)",r(n.datapoints,u,null,t+t/2,!0,n.xaxis,n.yaxis,f),s.strokeStyle="rgba(0,0,0,0.2)",r(n.datapoints,u,null,t/2,!0,n.xaxis,n.yaxis,f)),s.lineWidth=i,s.strokeStyle=n.color,r(n.datapoints,u,ot(n.points,n.color),0,!1,n.xaxis,n.yaxis,f),s.restore()}function lt(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v,p,w,b,k,d;(h?(k=w=b=!0,p=!1,l=i,y=n,v=t+r,a=t+u,y<l&&(d=y,y=l,l=d,p=!0,w=!1)):(p=w=b=!0,k=!1,l=n+r,y=n+u,a=i,v=t,v<a&&(d=v,v=a,a=d,k=!0,b=!1)),y<e.min||l>e.max||v<o.min||a>o.max)||(l<e.min&&(l=e.min,p=!1),y>e.max&&(y=e.max,w=!1),a<o.min&&(a=o.min,k=!1),v>o.max&&(v=o.max,b=!1),l=e.p2c(l),a=o.p2c(a),y=e.p2c(y),v=o.p2c(v),f&&(s.fillStyle=f(a,v),s.fillRect(l,v,y-l,a-v)),c>0&&(p||w||b||k)&&(s.beginPath(),s.moveTo(l,a),p?s.lineTo(l,v):s.moveTo(l,v),b?s.lineTo(y,v):s.moveTo(y,v),w?s.lineTo(y,a):s.moveTo(y,a),k?s.lineTo(l,a):s.moveTo(l,a),s.stroke()))}function wi(n){function r(t,i,r,u,f,e){for(var h=t.points,c=t.pointsize,o=0;o<h.length;o+=c)h[o]!=null&&lt(h[o],h[o+1],h[o+2],i,r,u,f,e,s,n.bars.horizontal,n.bars.lineWidth)}var t,i;s.save(),s.translate(h.left,h.top),s.lineWidth=n.bars.lineWidth,s.strokeStyle=n.color;switch(n.bars.align){case"left":t=0;break;case"right":t=-n.bars.barWidth;break;default:t=-n.bars.barWidth/2}i=n.bars.fill?function(t,i){return ot(n.bars,n.color,t,i)}:null,r(n.datapoints,t,t+n.bars.barWidth,i,n.xaxis,n.yaxis),s.restore()}function ot(t,i,r,u){var e=t.fill,f;return e?t.fillColor?gt(t.fillColor,r,u,i):(f=n.color.parse(i),f.a=typeof e=="number"?e:.4,f.normalize(),f.toString()):null}function pi(){var g,r,w,b,v,t,k;if(o.legend.container!=null?n(o.legend.container).html(""):i.find(".legend").remove(),o.legend.show){var f=[],e=[],y=!1,d=o.legend.labelFormatter,s,p;for(r=0;r<c.length;++r)s=c[r],s.label&&(p=d?d(s.label,s):s.label,p&&e.push({label:p,color:s.color}));for(o.legend.sorted&&(n.isFunction(o.legend.sorted)?e.sort(o.legend.sorted):o.legend.sorted=="reverse"?e.reverse():(g=o.legend.sorted!="descending",e.sort(function(n,t){return n.label==t.label?0:n.label<t.label!=g?1:-1}))),r=0;r<e.length;++r)w=e[r],r%o.legend.noColumns==0&&(y&&f.push("</tr>"),f.push("<tr>"),y=!0),f.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+w.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+w.label+"</td>");if(y&&f.push("</tr>"),f.length!=0)if(b='<table style="font-size:smaller;color:'+o.grid.color+'">'+f.join("")+"</table>",o.legend.container!=null)n(o.legend.container).html(b);else{var l="",a=o.legend.position,u=o.legend.margin;u[0]==null&&(u=[u,u]),a.charAt(0)=="n"?l+="top:"+(u[1]+h.top)+"px;":a.charAt(0)=="s"&&(l+="bottom:"+(u[1]+h.bottom)+"px;"),a.charAt(1)=="e"?l+="right:"+(u[0]+h.right)+"px;":a.charAt(1)=="w"&&(l+="left:"+(u[0]+h.left)+"px;"),v=n('<div class="legend">'+b.replace('style="','style="position:absolute;'+l+";")+"</div>").appendTo(i),o.legend.backgroundOpacity!=0&&(t=o.legend.backgroundColor,t==null&&(t=o.grid.backgroundColor,t=t&&typeof t=="string"?n.color.parse(t):n.color.extract(v,"background-color"),t.a=1,t=t.toString()),k=v.children(),n('<div style="position:absolute;width:'+k.width()+"px;height:"+k.height()+"px;"+l+"background-color:"+t+';"> </div>').prependTo(v).css("opacity",o.legend.backgroundOpacity))}}}function vi(n,t,i){for(var k=o.grid.mouseActiveRadius,it=k*k+1,v=null,et=!1,r,h,e,s,a,tt,u=c.length-1;u>=0;--u)if(i(c[u])){var f=c[u],b=f.xaxis,w=f.yaxis,l=f.datapoints.points,p=b.c2p(n),y=w.c2p(t),g=k/b.scale,nt=k/w.scale;if(h=f.datapoints.pointsize,b.options.inverseTransform&&(g=Number.MAX_VALUE),w.options.inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<l.length;r+=h)if((e=l[r],s=l[r+1],e!=null)&&!(e-p>g)&&!(e-p<-g)&&!(s-y>nt)&&!(s-y<-nt)){var rt=Math.abs(b.p2c(e)-n),ut=Math.abs(w.p2c(s)-t),ft=rt*rt+ut*ut;ft<it&&(it=ft,v=[u,r/h])}if(f.bars.show&&!v){switch(f.bars.align){case"left":a=0;break;case"right":a=-f.bars.barWidth;break;default:a=-f.bars.barWidth/2}for(tt=a+f.bars.barWidth,r=0;r<l.length;r+=h){var e=l[r],s=l[r+1],d=l[r+2];e!=null&&(c[u].bars.horizontal?p<=Math.max(d,e)&&p>=Math.min(d,e)&&y>=s+a&&y<=s+tt:p>=e+a&&p<=e+tt&&y>=Math.min(d,s)&&y<=Math.max(d,s))&&(v=[u,r/h])}}}return v?(u=v[0],r=v[1],h=c[u].datapoints.pointsize,{datapoint:c[u].datapoints.points.slice(r*h,(r+1)*h),dataIndex:r,series:c[u],seriesIndex:u}):null}function kt(n){o.grid.hoverable&&st("plothover",n,function(n){return n.hoverable!=!1})}function vt(n){o.grid.hoverable&&st("plothover",n,function(){return!1})}function at(n){st("plotclick",n,function(n){return n.clickable!=!1})}function st(n,t,r){var e=g.offset(),l=t.pageX-e.left-h.left,a=t.pageY-e.top-h.top,c=ti({left:l,top:a}),u,s,f;if(c.pageX=t.pageX,c.pageY=t.pageY,u=vi(l,a,r),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+h.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+h.top,10)),o.grid.autoHighlight){for(s=0;s<k.length;++s)f=k[s],f.auto!=n||u&&f.series==u.series&&f.point[0]==u.datapoint[0]&&f.point[1]==u.datapoint[1]||bt(f.series,f.point);u&&wt(u.series,u.datapoint,n)}i.trigger(n,[c,u])}function ut(){var n=o.interaction.redrawOverlayInterval;if(n==-1){pt();return}rt||(rt=setTimeout(pt,n))}function pt(){rt=null,v.save(),it.clear(),v.translate(h.left,h.top);for(var n,t=0;t<k.length;++t)n=k[t],n.series.bars.show?bi(n.series,n.point):fi(n.series,n.point);v.restore(),nt(p.drawOverlay,[v])}function wt(n,t,i){var r,u;typeof n=="number"&&(n=c[n]),typeof t=="number"&&(r=n.datapoints.pointsize,t=n.datapoints.points.slice(r*t,r*(t+1))),u=ht(n,t),u==-1?(k.push({series:n,point:t,auto:i}),ut()):i||(k[u].auto=!1)}function bt(n,t){var i,r;if(n==null&&t==null){k=[],ut();return}typeof n=="number"&&(n=c[n]),typeof t=="number"&&(i=n.datapoints.pointsize,t=n.datapoints.points.slice(i*t,i*(t+1))),r=ht(n,t),r!=-1&&(k.splice(r,1),ut())}function ht(n,t){for(var r,i=0;i<k.length;++i)if(r=k[i],r.series==n&&r.point[0]==t[0]&&r.point[1]==t[1])return i;return-1}function fi(t,i){var r=i[0],u=i[1],f=t.xaxis,e=t.yaxis,h=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),o,s;r<f.min||r>f.max||u<e.min||u>e.max||(o=t.points.radius+t.points.lineWidth/2,v.lineWidth=o,v.strokeStyle=h,s=1.5*o,r=f.p2c(r),u=e.p2c(u),v.beginPath(),t.points.symbol=="circle"?v.arc(r,u,s,0,2*Math.PI,!1):t.points.symbol(v,r,u,s,!1),v.closePath(),v.stroke())}function bi(t,i){var u=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f=u,r;switch(t.bars.align){case"left":r=0;break;case"right":r=-t.bars.barWidth;break;default:r=-t.bars.barWidth/2}v.lineWidth=t.bars.lineWidth,v.strokeStyle=u,lt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,function(){return f},t.xaxis,t.yaxis,v,t.bars.horizontal,t.bars.lineWidth)}function gt(t,i,r,u){var h,e,c,f,o;if(typeof t=="string")return t;for(h=s.createLinearGradient(0,r,0,i),e=0,c=t.colors.length;e<c;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.a*=f.opacity),f=o.toString()),h.addColorStop(e/(c-1),f);return h}var c=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},a=null,it=null,g=null,s=null,v=null,y=[],w=[],h={left:0,right:0,top:0,bottom:0},d=0,b=0,p={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},l=this,k,rt;l.setData=ni,l.setupGrid=ri,l.draw=dt,l.getPlaceholder=function(){return i},l.getCanvas=function(){return a.element},l.getPlotOffset=function(){return h},l.width=function(){return d},l.height=function(){return b},l.offset=function(){var n=g.offset();return n.left+=h.left,n.top+=h.top,n},l.getData=function(){return c},l.getAxes=function(){var t={},i;return n.each(y.concat(w),function(n,i){i&&(t[i.direction+(i.n!=1?i.n:"")+"axis"]=i)}),t},l.getXAxes=function(){return y},l.getYAxes=function(){return w},l.c2p=ti,l.p2c=hi,l.getOptions=function(){return o},l.highlight=wt,l.unhighlight=bt,l.triggerRedrawOverlay=ut,l.pointOffset=function(n){return{left:parseInt(y[ft(n,"x")-1].p2c(+n.x)+h.left,10),top:parseInt(w[ft(n,"y")-1].p2c(+n.y)+h.top,10)}},l.shutdown=ii,l.destroy=function(){ii(),i.removeData("plot").empty(),c=[],o=null,a=null,it=null,g=null,s=null,v=null,y=[],w=[],p=null,k=[],l=null},l.resize=function(){var n=i.width(),t=i.height();a.resize(n,t),it.resize(n,t)},l.hooks=p,ei(l),oi(f),ai(),ni(r),ri(),dt(),yi(),k=[],rt=null}function u(n,t){return t*Math.floor(n/t)}var i=Object.prototype.hasOwnProperty;n.fn.detach||(n.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),t.prototype.resize=function(n,t){if(n<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+n+", height = "+t);var i=this.element,u=this.context,r=this.pixelRatio;this.width!=n&&(i.width=n*r,i.style.width=n+"px",this.width=n),this.height!=t&&(i.height=t*r,i.style.height=t+"px",this.height=t),u.restore(),u.save(),u.scale(r,r)},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){var h=this._textCache,r,u,f,c,t,e,o,s,n;for(r in h)if(i.call(h,r)){u=this.getTextLayer(r),f=h[r],u.hide();for(c in f)if(i.call(f,c)){t=f[c];for(e in t)if(i.call(t,e)){for(o=t[e].positions,s=0;n=o[s];s++)n.active?n.rendered||(u.append(n.element),n.rendered=!0):(o.splice(s--,1),n.rendered&&n.element.detach());o.length==0&&delete t[e]}}u.show()}},t.prototype.getTextLayer=function(t){var i=this.text[t];return i==null&&(this.textContainer==null&&(this.textContainer=n("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=n("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},t.prototype.getTextInfo=function(t,i,r,u,f){var o,s,h,c,e;return i=""+i,o=typeof r=="object"?r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:r,s=this._textCache[t],s==null&&(s=this._textCache[t]={}),h=s[o],h==null&&(h=s[o]={}),c=h[i],c==null&&(e=n("<div></div>").html(i).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(t)),typeof r=="object"?e.css({font:o,color:r.color}):typeof r=="string"&&e.addClass(r),c=h[i]={width:e.outerWidth(!0),height:e.outerHeight(!0),element:e,positions:[]},e.detach()),c},t.prototype.addText=function(n,t,i,r,u,f,e,o,s){var h=this.getTextInfo(n,r,u,f,e),l=h.positions,a,c;for(o=="center"?t-=h.width/2:o=="right"&&(t-=h.width),s=="middle"?i-=h.height/2:s=="bottom"&&(i-=h.height),a=0;c=l[a];a++)if(c.x==t&&c.y==i){c.active=!0;return}c={active:!0,rendered:!1,element:l.length?h.element.clone():h.element,x:t,y:i},l.push(c),c.element.css({top:Math.round(i),left:Math.round(t),"text-align":o})},t.prototype.removeText=function(n,t,r,u,f,e){var h,a,c,v,l,o,s;if(u==null){if(h=this._textCache[n],h!=null)for(a in h)if(i.call(h,a)){c=h[a];for(v in c)if(i.call(c,v))for(l=c[v].positions,o=0;s=l[o];o++)s.active=!1}}else for(l=this.getTextInfo(n,u,f,e).positions,o=0;s=l[o];o++)s.x==t&&s.y==r&&(s.active=!1)},n.plot=function(t,i,u){return new r(n(t),i,u,n.plot.plugins)},n.plot.version="0.8.3",n.plot.plugins=[],n.fn.plot=function(t,i){return this.each(function(){n.plot(this,t,i)})}}(jQuery);
(function(n,t,i){"$:nomunge";function l(i){var v,s;for(e===!0&&(e=i||1),v=r.length-1;v>=0;v--)if(s=n(r[v]),s[0]==t||s.is(":visible")){var y=s.width(),p=s.height(),h=s.data(o);h&&(y!==h.w||p!==h.h)&&(s.trigger(c,[h.w=y,h.h=p]),e=i||!0)}else h=s.data(o),h.w=0,h.h=0;f!==null&&(e&&(i==null||i-e<1e3)?f=t.requestAnimationFrame(l):(f=setTimeout(l,u[a]),e=!1))}var r=[],u=n.resize=n.extend(n.resize,{}),f,e=!1,h="setTimeout",c="resize",o=c+"-special-event",a="pendingDelay",v="activeDelay",s="throttleWindow";u[a]=200,u[v]=20,u[s]=!0,n.event.special[c]={setup:function(){if(!u[s]&&this[h])return!1;var t=n(this);r.push(this),t.data(o,{w:t.width(),h:t.height()}),r.length===1&&(f=i,l())},teardown:function(){var i,t;if(!u[s]&&this[h])return!1;for(i=n(this),t=r.length-1;t>=0;t--)if(r[t]==this){r.splice(t,1);break}i.removeData(o),r.length||(e?cancelAnimationFrame(f):clearTimeout(f),f=null)},add:function(t){function f(t,u,f){var e=n(this),s=e.data(o)||{};s.w=u!==i?u:e.width(),s.h=f!==i?f:e.height(),r.apply(this,arguments)}if(!u[s]&&this[h])return!1;var r;if(n.isFunction(t))return r=t,f;r=t.handler,t.handler=f}},t.requestAnimationFrame||(t.requestAnimationFrame=function(){return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){return t.setTimeout(function(){n(+new Date)},u[v])}}()),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(){return t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}())})(jQuery,this),function(n){function i(n){function t(){var t=n.getPlaceholder();t.width()!=0&&t.height()!=0&&(n.resize(),n.setupGrid(),n.draw())}function i(n){n.getPlaceholder().resize(t)}function r(n){n.getPlaceholder().unbind("resize",t)}n.hooks.bindEvents.push(i),n.hooks.shutdown.push(r)}var t={};n.plot.plugins.push({init:i,options:t,name:"resize",version:"1.0"})}(jQuery);
(function(n){function i(n,t){return t*Math.floor(n/t)}function r(n,t,i,r){var o,s,u;if(typeof n.strftime=="function")return n.strftime(t);var f=function(n,t){return n=""+n,t=""+(t==null?"0":t),n.length==1?t+n:n},h=[],c=!1,e=n.getHours(),l=e<12;for(i==null&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),r==null&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),o=e>12?e-12:e==0?12:e,s=0;s<t.length;++s)if(u=t.charAt(s),c){switch(u){case"a":u=""+r[n.getDay()];break;case"b":u=""+i[n.getMonth()];break;case"d":u=f(n.getDate());break;case"e":u=f(n.getDate()," ");break;case"h":case"H":u=f(e);break;case"I":u=f(o);break;case"l":u=f(o," ");break;case"m":u=f(n.getMonth()+1);break;case"M":u=f(n.getMinutes());break;case"q":u=""+(Math.floor(n.getMonth()/3)+1);break;case"S":u=f(n.getSeconds());break;case"y":u=f(n.getFullYear()%100);break;case"Y":u=""+n.getFullYear();break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"w":u=""+n.getDay()}h.push(u),c=!1}else u=="%"?c=!0:h.push(u);return h.join("")}function f(n){function u(n,t,i,r){n[t]=function(){return i[r].apply(i,arguments)}}var i={date:n},r,t;for(n.strftime!=undefined&&u(i,"strftime",n,"strftime"),u(i,"getTime",n,"getTime"),u(i,"setTime",n,"setTime"),r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],t=0;t<r.length;t++)u(i,"get"+r[t],n,"getUTC"+r[t]),u(i,"set"+r[t],n,"setUTC"+r[t]);return i}function u(n,t){if(t.timezone=="browser")return new Date(n);if(t.timezone&&t.timezone!="utc"){if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var i=new timezoneJS.Date;return i.setTimezone(t.timezone),i.setTime(n),i}return f(new Date(n))}return f(new Date(n))}function c(f){f.hooks.processOptions.push(function(f){n.each(f.getAxes(),function(n,f){var e=f.options;e.mode=="time"&&(f.tickGenerator=function(n){var d=[],r=u(n.min,e),k=0,a=e.tickSize&&e.tickSize[1]==="quarter"||e.minTickSize&&e.minTickSize[1]==="quarter"?h:s,c,l,f,b,p,o,v,w,y,g,nt,tt;for(e.minTickSize!=null&&(k=typeof e.tickSize=="number"?e.tickSize:e.minTickSize[0]*t[e.minTickSize[1]]),c=0;c<a.length-1;++c)if(n.delta<(a[c][0]*t[a[c][1]]+a[c+1][0]*t[a[c+1][1]])/2&&a[c][0]*t[a[c][1]]>=k)break;l=a[c][0],f=a[c][1],f=="year"&&(e.minTickSize!=null&&e.minTickSize[1]=="year"?l=Math.floor(e.minTickSize[0]):(b=Math.pow(10,Math.floor(Math.log(n.delta/t.year)/Math.LN10)),p=n.delta/t.year/b,l=p<1.5?1:p<3?2:p<7.5?5:10,l*=b),l<1&&(l=1)),n.tickSize=e.tickSize||[l,f],o=n.tickSize[0],f=n.tickSize[1],v=o*t[f],f=="second"?r.setSeconds(i(r.getSeconds(),o)):f=="minute"?r.setMinutes(i(r.getMinutes(),o)):f=="hour"?r.setHours(i(r.getHours(),o)):f=="month"?r.setMonth(i(r.getMonth(),o)):f=="quarter"?r.setMonth(3*i(r.getMonth()/3,o)):f=="year"&&r.setFullYear(i(r.getFullYear(),o)),r.setMilliseconds(0),v>=t.minute&&r.setSeconds(0),v>=t.hour&&r.setMinutes(0),v>=t.day&&r.setHours(0),v>=t.day*4&&r.setDate(1),v>=t.month*2&&r.setMonth(i(r.getMonth(),3)),v>=t.quarter*2&&r.setMonth(i(r.getMonth(),6)),v>=t.year&&r.setMonth(0),w=0,y=Number.NaN;do g=y,y=r.getTime(),d.push(y),f=="month"||f=="quarter"?o<1?(r.setDate(1),nt=r.getTime(),r.setMonth(r.getMonth()+(f=="quarter"?3:1)),tt=r.getTime(),r.setTime(y+w*t.hour+(tt-nt)*o),w=r.getHours(),r.setHours(0)):r.setMonth(r.getMonth()+o*(f=="quarter"?3:1)):f=="year"?r.setFullYear(r.getFullYear()+o):r.setTime(y+v);while(y<n.max&&y!=g);return d},f.tickFormatter=function(n,i){var a=u(n,i.options),v;if(e.timeformat!=null)return r(a,e.timeformat,e.monthNames,e.dayNames);var s=i.options.tickSize&&i.options.tickSize[1]=="quarter"||i.options.minTickSize&&i.options.minTickSize[1]=="quarter",o=i.tickSize[0]*t[i.tickSize[1]],h=i.max-i.min,c=e.twelveHourClock?" %p":"",l=e.twelveHourClock?"%I":"%H",f;return f=o<t.minute?l+":%M:%S"+c:o<t.day?h<2*t.day?l+":%M"+c:"%b %d "+l+":%M"+c:o<t.month?"%b %d":s&&o<t.quarter||!s&&o<t.year?h<t.year?"%b":"%b %Y":s&&o<t.year?h<t.year?"Q%q":"Q%q %Y":"%Y",v=r(a,f,e.monthNames,e.dayNames)})})})}var o={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},t={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:365.2425*864e5},e=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],s=e.concat([[3,"month"],[6,"month"],[1,"year"]]),h=e.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);n.plot.plugins.push({init:c,options:o,name:"time",version:"1.0"}),n.plot.formatDate=r,n.plot.dateGenerator=u})(jQuery);
function changeCategory(n,t,i,r,u){if(showSelectedCategory(n,u,r),i&&$("#categories"+tabNames.DASHBOARD.name).removeClass("current"),!t&&window.history&&history.pushState){var f=r?"&oid="+r:"";history.pushState({rallybound:!0,func:"showSelectedCategory",funcParam:n},null,tabUrl+n+f)}}function reloadCurrentCategory(){var n={},t;window.location.search.length>1&&(t=window.location.search.substring(1),rbParseQueryStrAndApplyToObj(t,n)),showSelectedCategory(n.tab,null,n.oid||null)}function showSelectedCategory(n,t,i){var r=tabNames[n.toUpperCase()],u,f;r||(r={name:n}),t||(t=r.onload),u=$("#selectedCategoryContainer"),$("#loader").show(),$("#ProfTabContainer > ul > li, #ProfTabContainer > ul > li > a").removeClass("current"),$("#hqNavContainer ul.hqMainNav > li, #hqNavContainer ul.hqMainNav > li > a").removeClass("current"),f=r.name,i&&(f+="-"+i),$("#categories"+f).parent().addClass("current"),setTimeout(function(){var f=function(){$("#loader").hide(),$("#contactBookPop #tblConatctBookList").remove(),$(".setForDashboard").css({"margin-top":"0px","padding-top":"0px"}),t&&t(),initialPageLoadsSectionLoadedFunc&&initialPageLoadsSectionLoadedFunc()},n,e;if(r.name==tabNames.MYPAGE.name){u.hide(),$("#middleWrap").show(),f();return}$("#middleWrap").hide(),window.innerWidth>992&&(n=$("#subBannerHolder").offset().top-150,$("html, body").scrollTop()<n&&$("html, body").animate({scrollTop:n},1e3)),e={category:r.name,loadContacts:contactsList.length<1,mid:pageMemberId,objectId:i,tabWasAlreadyLoaded:alreadyLoadedTabs[r.name]||!1},u.load(categoriesSelected,e,function(n,t){if(t=="error"){alert(jsTranslate("generalError"));return}if(n.substring(0,1)=="{"){n=JSON.parse(n),createErrorsPopAndShow(n.errors);return}alreadyLoadedTabs[r.name]=!0,u.show(),f(),typeof window.refreshSiteBuilder=="function"&&refreshSiteBuilder()})},500)}function showSelectedSubCategory(n,t){var i=n.split(","),r=$("#MainInner"+i[0]);setTimeout(function(){var i={categories:n,loadContacts:contactsList.length<1};$selectedCategoryContainer.load(urlSubCategoriesSelected,i,function(n,i){if(i=="error"){alert(jsTranslate("generalError"));return}t&&t()})},500)}function createErrorsPopAndShow(n){n&&n.error?createPopAndShow(jsTranslate("popTitle_Error"),n.error):createPopAndShow(jsTranslate("popTitle_Error"),jsTranslate("unexpectedError")+", "+jsTranslate("msg_makeSureLoggedIn"))}function findContactsByIDsAndCallFunction(n,t){for(var u,r,i=0;i<contactsList.length;i++){if(n.length<1)return;for(u=contactsList[i],r=0;r<n.length;r++)if(u.ContactID==n[r]){t(u,i),n.splice(r,1);break}}}function sendEmailToSingleContact(n){var t=n.closest(".wholeContactrow"),r=t.attr("id").indexOf("-")+1,i=t.attr("id").substring(r).split();if(i.length<1){createModalPopAndShow(jsTranslate("popTitle_contactBook"),"<div><fieldset><label>"+jsTranslate("contactBook_selectOne")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}showSelectedCategory("Email",function(){findContactsByIDsAndCallFunction(i,function(n){addSelectedContact(n)})})}function sendEmailToSelectedContacts(){var n=[];if($("#allContactsContainer .emailRowInput:checked").each(function(){n.push($(this).attr("data-id"))}),n.length<1){createModalPopAndShow(jsTranslate("popTitle_contactBook"),"<div><fieldset><label>"+jsTranslate("contactBook_selectOne")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_ok"))+'" class="btn" onclick="closePop(\'genericPop\'); return false;" /></div>');return}showSelectedCategory("Email",function(){findContactsByIDsAndCallFunction(n,function(n){addSelectedContact(n)})})}function doAddNewContact(n,t){$.post(urlAddContact,n,function(n){t&&t(n)})}function openContactBook(){showSelectedCategory("Tools")}function prepareContactsForEmailSend(){rtn="";for(var n in selectedContacts)rtn+=rtn==""?n:splitStr+n;return rtn}function addNewContactToContactsFromEmail(){var t,i,e,o;if(!donigAddInviteContact){donigAddInviteContact=!0;var r=$("#newContactInfo"),c=$("#selectedOuter"),u=r.children(".contactName"),f=r.children(".contactSalu"),n=u.val(),s=f.val(),h=$("#newContact").val().trim();if(!PFR.Validators.Email("newContact")){doingAddInviteContact=!1;return}for(n=n.split(" "),t="",i=0;i<n.length-1;i++)t!=""&&(t+=" "),t+=n[i];e=n[n.length-1],o={firstName:t,lastName:e,email:h,salu:s},doAddNewContact(o,function(n){addSelectedContact(n.contact),contactsList.push(n.contact),u.val(""),f.val("")})}}function addSelectedContact(n,t){var i=$("#selectedOuter"),u;if(i.children(".selectedContact").length||($("#emailTeamBtn").hide(),i.show(),emailWholeTeamEnabled=!1),!t)for(u in selectedContacts)if(u==n.ContactID)return;t||(selectedContacts[n.ContactID]=n);var f=n.FirstName,e=n.LastName,o=n.Email,r="";r=f!=null&&e!=null?f+" "+e:o,i.append('<span id="selectedContact-'+n.ContactID+'" class="tag selectedContact" style="float: left;">'+r+' <span><i class="icon-cross"></i>')}function removeSelectedContact(n){var t=$("#selectedOuter"),i=n.attr("id"),r=i.substring(i.indexOf("-")+1);delete selectedContacts[r],n.remove(),t.children(".selectedContact").length||($("#emailTeamBtn").show(),t.hide())}function quickFindContacts(n){var i=$("#contactQuickView"),f=$("#contactQuickView > ul"),r=$("#newContactInfo"),h=$("#selectedOuter"),u;if(f.empty(),!$(n).val().length){i.hide(),r.is(":visible")&&r.hide();return}if(filterContacts($(n).val()),filteredContacts.length>0&&!i.is(":visible")&&(i.show(),r.is(":visible")&&r.hide()),filteredContacts.length)for(u=0;u<filteredContacts.length;u++){var t=filteredContacts[u],e=t.FirstName!=null?t.FirstName:"",o=t.LastName!=null?t.LastName:"",s=t.Email!=null?t.Email:"";f.append('<li><div id="contact-'+u+'" class="foundContact"><span>'+e+" "+o+"</span> "+s+"</div></li>")}else i.is(":visible")&&i.hide(),r.show()}function filterContacts(n){var r,i;if(filteredContacts=[],n&&n.length>2)for(n=n.split(" "),r=0;r<contactsList.length;r++){var u=contactsList[r],f=u.FirstName||"",e=u.LastName||"",o=u.Email||"",t=[];for(i=0;i<n.length;i++){if(checkNeedsThisCompare(t,1)&&f.indexOf(n[i])==0){t.push(1);continue}if(checkNeedsThisCompare(t,2)&&e.indexOf(n[i])==0){t.push(2);continue}if(checkNeedsThisCompare(t,3)&&o.indexOf(n[i])==0){t.push(3);continue}}t.length==n.length&&filteredContacts.push(u)}}function checkNeedsThisCompare(n,t){for(var i=0;i<n.length;i++)if(n[i]==t)return!1;return!0}function quickFindContactsElmSearch(n){var t=$("#allContactsContainer"),i=$("#allContactsContainer .contactsRowCountainer"),r;if(i.removeClass("searchFound"),!n.val().length){t.removeClass("searchActive");return}r=(n.val()||"").split(" "),t.addClass("searchActive"),i.each(function(n){$me=$(this),setTimeout(function(n){return function(){var t=[];n.find(".elmToSearch").each(function(){t=t.concat($(this).text().split(" "))}),checkIfArrayConatinsQueryText(t,r)&&n.addClass("searchFound")}}($me),n+1)})}function checkIfArrayConatinsQueryText(n,t){for(var u=0,f,r,e,i=0;i<t.length;i++)for(f=t[i],r=0;r<n.length;r++)if(e=n[r],e.indexOf(f)==0){u++;break}return u==t.length}function makeContactEditable(n){var t=n.closest(".wholeContactrow");if(!t.hasClass("contactIsEditable")){t.addClass("contactIsEditable");var h=t.attr("id").indexOf("-")+1,i=t.attr("id").substring(h),c=t.children(".contactName"),f=t.children(".contactEmail"),e=t.children(".contactGreeting"),r=t.attr("data-firstName"),u=t.attr("data-lastName"),o=f.html().trim(),s=e.html().trim();c.html('<input id="editingContactName-'+i+'" class="editContactInput" data-oldValue="'+(u.length>0?u+", ":"")+r+'" type="text" value="'+(r.length>0?r+" ":"")+u+'">'),f.html('<input id="editingContactEmail-'+i+'" class="editContactInput" data-oldValue="'+o+'" type="text" value="'+o+'">'),e.html('<input id="editingContactGreeting-'+i+'" class="editContactInput" data-oldValue="'+s+'" type="text" value="'+s+'">')}}function makeContentNoneEditable(n){if(t&&t.length&&t.attr("id").length){var t=n.closest(".wholeContactrow"),o=t.attr("id")||"-".indexOf("-")+1,i=t.attr("id").substring(o),f=$("#editingContactName-"+i),r=$("#editingContactEmail-"+i),u=$("#editingContactGreeting-"+i),s=t.attr("data-firstName"),e=t.attr("data-lastName"),h=r.val(),c=u.val();f.parent().html((e.length>0?e+", ":"")+s),r.parent().html(h),u.parent().html(c),f.remove(),r.remove(),u.remove(),t.removeClass("contactIsEditable")}}function saveEditContact(n){for(var t=n.closest(".wholeContactrow"),s=t.attr("id").indexOf("-")+1,i=t.attr("id").substring(s),h=$("#editingContactName-"+i),c=$("#editingContactEmail-"+i),l=$("#editingContactGreeting-"+i),u=h.val().split(" "),a=getTextFromHtmlString(c.val()),v=l.val(),r="",o,e,f=0;f<u.length-1;f++)r!=""&&(r+=" "),r+=u[f];if(o=u[u.length-1],e={firstName:r,lastName:o,email:a,greeting:v},t.attr("id")=="contact-newContact"){addNewContactToContactsFromContacts(t,e);return}e.idParam=i,$.post(urlEditContact,e,function(n){n.success&&(makeContentNoneEditable(t),t.attr("data-firstName",r),t.attr("data-lastName",o),findContactsByIDsAndCallFunction(i.split(),function(t,i){contactsList[i]=n.contact}))})}function addNewContactToContactsFromContacts(n,t){doAddNewContact(t,function(t){t.success&&(n.attr("id","contact-"+t.contact.ContactID),$("#editingContactName-newContact").attr("id","editingContactName-"+t.contact.ContactID),$("#editingContactEmail-newContact").attr("id","editingContactEmail-"+t.contact.ContactID),$("#editingContactGreeting-newContact").attr("id","editingContactGreeting-"+t.contact.ContactID),n.attr("data-firstName",t.contact.FirstName),n.attr("data-lastName",t.contact.LastName),contactsList.push(t.contact),makeContentNoneEditable(n),isAddingNewContact=!1)})}function deleteSingleContact(n){var t=n.closest(".wholeContactrow"),i=t.attr("id").indexOf("-")+1,r=t.attr("id").substring(i);createModalPopAndShow(jsTranslate("popTitle_emailAddress"),"<div><fieldset><label>"+jsTranslate("emailAddress_deleteContactConfirm")+'</label></fieldset></div><div class="btnCont btnCenterCont" style="margin-top:10px;"><input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_yes"))+'" class="btn" onclick="closePop(\'genericPop\'); doDeleteContacts(\''+r+'\');">&nbsp;&nbsp;<input type="button" value="'+htmlAttributeSafe(jsTranslate("btn_no"))+'" class="btn" onclick="closePop(\'genericPop\');"></div>',!0)}function deleteSelectedContact(n,t){var i,r;if(n&&n.success)for(t=t.split(splitStr),i=0;i<t.length;i++)r=t[i],$("#contact-"+r).remove(),findContactsByIDsAndCallFunction(t,function(n,t){contactsList.splice(t,1)})}function addNewContact(){isAddingNewContact||(isAddingNewContact=!0,$("#allContactsContainer").prepend(createNewContactRow()),makeContactEditable($("#contact-newContact")))}function createNewContactRow(){return'<tr id="contact-newContact" data-firstName="" data-lastName="" class="contactsRowCountainer wholeContactrow tableRow"><td class="contactRow contactCheckBox contactRowInner"><input class="emailRowInput" type="checkbox" data-id=""/> </td><td class="contactRow contactName tableCol tableColSortFirstName contactRowInner elmToSearch"></td><td class="contactRow contactEmail tableCol tableColSortEmail "contactRowInner elmToSearch"></td><td class="contactRow contactDate tableCol tableColSortLastEmailed contactRowInner"></td><td class="contactRow contactDonated contactRowInner"></td><td class="contactRow contactGreeting contactRowInner elmToSearch"></td><td class="contactRow contactActions" contactRowInner><input class="sendEmailContact btnMail" type="button" value="'+htmlAttributeSafe(jsTranslate("btn_send"))+'"/> <input class="editContact btnEditNew" type="submit" value="'+htmlAttributeSafe(jsTranslate("btn_edit"))+'"/> <input class="saveContact btnSaveNew" type="submit" value="'+htmlAttributeSafe(jsTranslate("btn_save"))+'"/> <input class="deleteContact btnDelete" type="submit" value="'+htmlAttributeSafe(jsTranslate("btn_delete"))+'"/> </td></tr>'}function cmpManagerScope(){this.home={progressTaskCount:0,progressTaskCompleteCount:0,progressTaskCompletePercent:0}}function loadHqTasks(n,t){var i=new cmpManagerScope,r,u,f,e;for(r in n)u=n[r],f=createCampaignTasksListItem(r,u),t.append(f),i.home.progressTaskCount++,u.completed&&i.home.progressTaskCompleteCount++;e=Math.round(100/i.home.progressTaskCount),i.home.progressTaskCompletePercent=e*i.home.progressTaskCompleteCount,updatePercentTaskCompleted(i.home.progressTaskCompletePercent)}function updatePercentTaskCompleted(n){var t=$("#completedPercent");n>1?t.text(n):t.text("0")}function createCampaignTasksListItem(n,t){var r=$("<li />"),i=$('<div class="checkbox-mode checkbox-green rounded checkbox-inline" />'),u=$('<input class="hideCheckbox" value="" type="checkbox" disabled="true"/>').attr("id","hqProgressTask"+n),f=$("<label />").attr("for","hqProgressTask"+n).html(t.text);return t.completed&&u.prop("checked",!0),r.append(i),i.append(u),i.append(f),r}function deleteDonationFromHQ(){var n={donationID:deleteDonation};$.post(urlDeleteDonation,n,function(n){if(n.success){closePop("deleteDonationPop"),onPopClose=function(){location.reload()},$("#deleteDonationMsgPop").show(),setTimeout(function(){onPopClose()},3e3);return}PFR.Validators.Helper.showValidationError("#btndeleteDonationfromHQ",jsTranslate("generalError")+", "+jsTranslate("msg_pleaseRefresh"))})}function sendThankYouEmail(){if($("#btnLoaderSendThankYouEmail").show(),!thankYouEmailSending){thankYouEmailSending=!0,PFR.Validators.Helper.clearValidationError("#thankYouEmailMessage"),PFR.Validators.Helper.clearValidationError("#btnSendThankYouEmail");var n={donationID:thankYouDonation,userPersonalMessage:$("#thankYouEmailMessage").val()};if(!$.trim(n.userPersonalMessage).length){PFR.Validators.Helper.showValidationError("#thankYouEmailMessage",jsTranslate("email_personalMsgRequired")),thankYouEmailSending=!1,$("#btnLoaderSendThankYouEmail").hide();return}if(!PFR.Validators.NoHtml("#thankYouEmailMessage")){thankYouEmailSending=!1,$("#btnLoaderSendThankYouEmail").hide();return}$.post(urlSendDonorEmail,n,function(n){if(thankYouEmailSending=!1,$("#btnLoaderSendThankYouEmail").hide(),n.success){$("#thankYouEmailPop").modal("hide"),$("#thankYouEmailTd"+n.donationID).html("Email sent").hide().fadeIn("slow");return}PFR.Validators.Helper.showValidationError("#btnSendThankYouEmail",jsTranslate("generalError")+", "+jsTranslate("msg_pleaseRefresh"))})}}function showPersonalMassageBox(){$("#thankYouEmailTxtCont").html(function(n,t){return t.replace(/99/g,"{{Donation-Amount}}").replace("{{userPersonalMessage}}",'<div id="editTheArea">'+jsTranslate("email_personalMsg_Title")+'</div><textarea id="thankYouEmailMessage" class="personalMsg" rows="50" cols="50" placeholder="'+htmlAttributeSafe(jsTranslate("email_personalMsg_placeholder"))+'"></textarea>')}),$("#thankYouEmailTxtCont a").click(function(){return!1}),$("#thankYouEmailTxtCont #thankYouEmailMessage").fadeIn(300),$("#thankYouEmailTxtCont #editTheArea").hide()}function loadEmailTemp(){$("#thankYouEmailTxtCont").html($("#donorThankYouEmailBodyCont").html())}function initChart(n){function ht(n,t,i){return t<n+i&&t>n-i}function w(n,t,i,r){var u=$('<div id="tooltip">'+r+"</div>");u.css({top:t-45,border:"2px solid"+i}).appendTo("body"),u.css("left",n-u.outerWidth()/2+1),u.fadeIn(200)}function ot(){$.plot($("#flot-placeholder"),wt,bt),$("#flot-placeholder").UseTooltip()}function dt(){var t=new Date(r),n=+new Date(t.setMonth(t.getMonth()+1));e[n]={Total:l,Count:a},et.push([n,e[n].Total]),p[n]=e[n].Count,nt.push([n,yt.localeData().monthsShort(moment(n))])}function gt(){var t=new Date(i),n=+new Date(t.setFullYear(t.getFullYear()+1));f[n]={Total:c,Count:h},ut.push([n,f[n].Total]),y[n]=f[n].Count,v.push([n,moment(n).format("YYYY")])}var nt=[],v=[],pt=[],et=[],ut=[],ft={},p={},y={},f={},e={},yt=moment().locale(rbSiteLang),t=new Date(n.RegistrationDate),rt=new Date(n.CurrentDay),st=new Date(rt),ct=+new Date(st.setDate(st.getDate()-24)),lt=new Date(t.getFullYear(),t.getMonth(),1),vt=new Date(t.getFullYear(),0),r=+new Date(lt.setMonth(lt.getMonth()-1)),i=new Date(vt.setFullYear(vt.getFullYear()-1)),a=0,l=0,c=0,h=0,it,tt,o,u;for(t;t<=rt;t.setDate(t.getDate()+1))it=+new Date(t.getFullYear(),t.getMonth(),1),tt=+new Date(t.getFullYear(),0),i!=tt&&(i=tt,f[i]={Total:c,Count:h},c=0,h=0,ut.push([i,f[i].Total]),y[i]=f[i].Count,v.push([i,moment(i).format("YYYY")])),r!=it&&(r=it,e[r]={Total:l,Count:a},a=0,l=0,et.push([r,e[r].Total]),p[r]=e[r].Count,nt.push([r,yt.localeData().monthsShort(moment(r))])),o=+new Date(t),u=chartData.Donations[moment(o).format("l")],u||(u={Total:0,Count:0}),h+=u.Count,c+=u.Total,a+=u.Count,l+=u.Total,o>=ct&&(pt.push([o,u.Total]),ft[o]=u.Count);dt(),gt();var kt=rt.setHours(12),bt={series:{bars:{show:!0}},bars:{align:"center",barWidth:6912e4,lineWidth:0,fillColor:"#006a8c"},xaxis:{mode:"time",timeformat:"%d",tickSize:[1,"day"],labelWidth:3,axisLabel:"bars",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",max:kt,min:ct},yaxis:{show:!1},legend:{noColumns:1,labelBoxBorderColor:"#006a8c",position:"nw"},grid:{margin:{top:10,right:25,bottom:5,left:0},labelMargin:0,hoverable:!0,color:"#fff",borderWidth:0,backgroundColor:null}},s={series:{lines:{show:!0}},points:{radius:3,fill:!0,show:!0},xaxis:{mode:"time",tickSize:[1,"month"],ticks:nt,axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial"},yaxis:{tickLength:"full",show:!1},legend:{noColumns:1,labelBoxBorderColor:"#006a8c",position:"nw"},grid:{margin:15,labelMargin:0,hoverable:!0,color:"#fff",borderWidth:0,backgroundColor:null}},wt=[{data:pt,color:"#006a8c"}],g=[{data:et,color:"#006a8c"}];g[0].data.length>23&&(g=[{data:ut,color:"#006a8c"}],s.xaxis.tickSize=[1,"year"],s.xaxis.ticks=v);var d=null,at=null,k=null,b;$.fn.UseTooltip=function(){$(this).bind("plothover",function(n,t,i){var r,u,f,e;i?(at!=i.series.label||d!=i.dataIndex)&&(d=i.dataIndex,at=i.series.label,$("#tooltip").remove(),r=i.datapoint[0],u=i.datapoint[1],b=t.pageX,k=t.pageY,f=i.series.color,i.series.xaxis.options.axisLabel=="bars"?w(i.pageX,i.pageY,f,"<strong>"+ft[r]+" "+(ft[r]==1?jsTranslate("text_donation"):jsTranslate("text_donation_plural"))+"</strong><br> <strong> $"+u+"</strong>"):s.xaxis.ticks==v?w(i.pageX,i.pageY,f,"<strong>"+y[r]+" "+(y[r]==1?jsTranslate("text_donation"):jsTranslate("text_donation_plural"))+"</strong><br> <strong> $"+u+"</strong>"):w(i.pageX,i.pageY-15,f,"<strong>"+p[r]+" "+(p[r]==1?jsTranslate("text_donation"):jsTranslate("text_donation_plural"))+"</strong><br> <strong> $"+u+"</strong>")):(e=5,ht(b,t.pageX,e)&&ht(k,t.pageY,e)||($("#tooltip").fadeOut(200,function(){$(this).remove()}),d=null,b=null,k=null))})},$("#viewRecentChart").click(function(){ot()}),$("#viewAlltimeChart").click(function(){$.plot($("#flot-placeholder"),g,s),$("#flot-placeholder").UseTooltip()}),$(function(){ot()})}function isMobile(){return window.innerWidth<600}function addIdToListItem(){var t,n,i;for($(".hqMainNav").show(),t=$(".hqMainNav").children("li"),n=0;n<t.length;n++)i=n+1,$(t[n]).attr("id","hqMainNavLi-"+i)}function setNavBar(){for(var f=$(".hqMainNav").children("li"),e=$("#hqMainNavHamburger"),i=$("#hamburgerTabs"),r=$("#hqMobileMenuTrigger"),c=$("#hqCloseMobileMenu"),l=$("#hqMainNavHamburger .hqMainNavHamburgerHeader").width()+70,a=$("#mainNavContainer").offset().left+$("#mainNavContainer").width(),v=a-l,h,t=f.length-1;t>=0;t--){var o=t+1,n=f.closest("li#hqMainNavLi-"+o),u="hamburgerTab-"+o,s=i.find("li#"+u).length,y=n.offset().left+n.width();!isMobile()&&y>v?(s||n.clone().attr("id",u).prependTo(i),n.css("visibility","hidden")):(s&&$("li#"+u).remove(),n.css("visibility",""))}i.children().length?e.show():e.hide(),isMobile()?(r.length||$("#categoriesContainer").prepend('<a href="#" id="hqMobileMenuTrigger" class="hqNavIcon"></span></a><span id="js_mobileNavName">'+dashboardTabDashboardText+"</span>"),h=$("body").height()-r.outerHeight(),$("#hqNavContainer").css("height",h+"px")):(r.remove(),c.remove(),$("#hqNavContainer").css("height",""))}function closeHqMainMobileNav(){$("#hqNavContainer").removeClass("hqTransformContent"),$("#hqMobileMenuTrigger").removeClass("hqMobileNavIsOpen")}function openHqMainMobileNav(){$("#hqNavContainer").addClass("hqTransition").addClass("hqTransformContent")}function hqMobileMenuSticky(){$(window).scroll(function(){var t=$(this).scrollTop(),n=$("#categoriesContainer"),i=$("#dashboardOuterCont").offset().top;t>=i?(n.addClass("mobSticky"),$(".adminBarHeader").length&&n.addClass("withAdminBar")):t<i&&(n.removeClass("mobSticky"),n.removeClass("withAdminBar"))})}function changeInnerfundraisingResource(n,t){var i=$(n),r,u;i.hasClass("active")||(r="categories".length,u=i.attr("id").substring(r),doChangeInnerFundraisingResource(u,t,i))}function doChangeInnerFundraisingResource(n,t,i){var r={category:n,loadContacts:!1,mid:t};$("#fundraiserResourceMainInfo").load(categoriesSelected,r,function(t,r){if(r=="error"){alert(jsTranslate("generalError"));return}if(t.substring(0,1)=="{"){t=JSON.parse(t),createErrorsPopAndShow(t.errors);return}$(".fundraisingResourceLink li a").each(function(){$(this).hasClass("active")&&$(this).removeClass("active")}),i=i||$("#categories"+n),i.addClass("active")})}function clearFormValidations(n){n.find(":input").each(function(){PFR.Validators.Helper.clearValidationError($(this))})}function validateModalForm(n){for(var i=!0,t=0;t<n.length;t++)n[t].validate()||(i=!1);return i}function populateFormDataAndText(n,t,i){$.each(i.modalText,function(t,i){i||(i=""),$el=n.find('[data-populate-text="'+t+'"]'),$el.html(i)}),t.find('input[type="date"]').pickadate({format:"m/d/yyyy",max:new Date}),t.find("input,textarea").not('[type="submit"],[type="button"],[type="checkbox"]').val(""),$.each(i.formPrefill,function(n,i){i||(i=""),$field=t.find('input[name="'+n+'"]'),$field.val(i);var r=$field.pickadate("picker");r&&r.set("select",i)})}function showFormModal(n,t,i,r,u,f){var e=n.find("form");populateFormDataAndText(n,e,t),clearFormValidations(e);e.attr("action",i).off("submit").on("submit",function(){function i(){submitPopSent=!1,$formButtons.prop("disabled",!1),$btnLoader.removeClass("loading").removeClass("success")}var o,f;if(submitPopSent=!1,event.preventDefault(),!submitPopSent){submitPopSent=!0,e=$(this),$btnLoader=e.find(".btnWLoader"),$formButtons=e.find(".btnCont").find('.btn,button,input[type="submit"]'),$formButtons.prop("disabled",!0),$btnLoader.addClass("loading"),o=e.serialize();n.on("hide.bs.modal",function(n){submitPopSent&&n.preventDefault()});f=validateModalForm(r),f?$.post(e.attr("action"),o,function(r){if(r.success)if(submitPopSent=!1,$btnLoader.addClass("success"),typeof u=="function")setTimeout(function(){i(),n.modal("hide"),u(r,t)},700);else{n.on("hide.bs.modal",function(){window.location.reload()});n.find(".modal-body").html("<fieldset><label>"+t.modalText.success+"<br/><br/>"+jsTranslate("pageReload")+"</label></fieldset>"),setTimeout(function(){window.location.reload()},3e3)}else r.requireLogon?(alert(jsTranslate("error_ensureLogIn")),i()):r.errors?(showErrors(r.errors),i()):i()}).error(i):i()}});n.modal("show"),n.find(":focusable").first().focus(),typeof f=="function"&&f(n,t)}function switchToEnduranceTab(n,t){changeCategory("Endurance",!1,!0,n,function(){doEnduranceAction(n,t)})}var contactsList=[],alreadyLoadedTabs={},tabUrl=location.pathname+"?tab=",tabNames={MYPAGE:{name:"MyPage",onload:function(){window.imgDrop&&imgDrop.Init(),$("#categoriesMyPage").addClass("current")}},DASHBOARD:{name:"Dashboard",onload:function(){window.imgDrop&&imgDrop.Close(),loadEmailTemp(),loadFlotChart(),showPersonalMassageBox(),$("#categoriesDashboard").addClass("current")}},AUTOPOST:{name:"Share",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesShare").addClass("current")}},EMAIL:{name:"Email",onload:function(){window.imgDrop&&imgDrop.Close(),window.CKEDITOR&&CKEDITOR.instances&&CKEDITOR.env.isCompatible&&CKEDITOR.replace("message",{allowedContent:!0,removeButtons:window.allowUserEmailSrc?"":"Source"}),doTableInit($(".tableContSortableInit")),$("#categoriesEmail").addClass("current"),getContactIdsFromStr(contactIdsStr)}},SHARE:{name:"Share",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesShare").addClass("current")}},REPORTS:{name:"Reports",onload:function(){window.imgDrop&&imgDrop.Close(),loadEmailTemp(),showPersonalMassageBox(),$("#categoriesReports").addClass("current")}},MYINFO:{name:"MyInfo",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesMyInfo").addClass("current")}},CONTACTBOOK:{name:"ContactBook",onload:function(){window.imgDrop&&imgDrop.Close(),doTableInit($(".tableContSortableInit")),contactIdsStr&&updateContactBook(contactIdsStr.split(splitStr)),$("#categoriesContactBook").addClass("current")}},TEAM:{name:"Team",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesTeam").addClass("current")}},MYEVENTS:{name:"MyEvents",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesMyEvents").addClass("current")}},MYTEAMEVENTS:{name:"MyTeamEvents",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesMyTeamEvents").addClass("current")}},RECOMMITMENT:{name:"Recommitment",onload:function(){window.imgDrop&&imgDrop.Close(),$("#categoriesRecommitment").addClass("current")}}},redirectMemberID=$("#dashboardOuterCont").length==1?"%2f"+memberId:"%2f",redirectEventPath=encodeURIComponent(eventPath).toLowerCase(),hqRedirectedTabs={},addContactsType,initialPageLoadsSectionLoadedFunc,isAddingNewContact,thankYouDonation,thankYouEmailSending;hqRedirectedTabs[redirectEventPath+"%2fheadquarters"+redirectMemberID]="DASHBOARD",hqRedirectedTabs[redirectEventPath+"%2fheadquarters"]="DASHBOARD",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2findex"+redirectMemberID]="DASHBOARD",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2findex"]="DASHBOARD",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2ffundraising"+redirectMemberID]="REPORTS",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2ffundraising"]="REPORTS",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite"+redirectMemberID]="EMAIL",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite"]="EMAIL",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite"+redirectMemberID+"%3fvia%3demail"]="EMAIL",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite%3fvia%3demail"]="EMAIL",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite"+redirectMemberID+"%3fvia%3dsocial"]="SHARE",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite%3fvia%3dsocial"]="SHARE",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite"+redirectMemberID+"%3fvia%3dcontactbook"]="CONTACTBOOK",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2finvite%3fvia%3dcontactbook"]="CONTACTBOOK",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fsocialconnect"+redirectMemberID]="AUTOPOST",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fsocialconnect"]="AUTOPOST",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fteammembers"+redirectMemberID]="TEAM",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fteammembers"]="TEAM",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyinfo"+redirectMemberID]="MYINFO",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyinfo"]="MYINFO",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2frecommit"+redirectMemberID]="RECOMMITMENT",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2frecommit"]="RECOMMITMENT",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyevents"+redirectMemberID]="MYEVENTS",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyevents"]="MYEVENTS",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyevents"+redirectMemberID+"%3fteam%3dtrue"]="MYTEAMEVENTS",hqRedirectedTabs[redirectEventPath+"%2fheadquarters%2fmyevents%3fteam%3dtrue"]="MYTEAMEVENTS",addContactsType=!0;$(document).on("click touchstart","#dashboardOuterCont",function(n){var i,t,r,u,f,o;if($target=$(n.target),$target.closest("#contactQuickView").length||$("#contactQuickView").hide(),$target.closest("#newContactInfo").length||$("#newContactInfo").hide(),i=$("#pRCont"),i.length&&$target.closest("#mainNavContainer .hqMainNav").length){if(t=i.scope(),t.activeRegistrant&&t.activeRegistrant.isChanged&&!confirm(jsTranslate("unsavedChanges")))return r=$("#categories"+tabNames.MYINFO.name).parent(),r.addClass("current"),r.siblings().removeClass("current"),!1;t.$root&&t.$root.$destroy()}if(u=$target.closest(".categoriesItem"),u.length){var s="categories".length,h=u.attr("id").substring(s),e=h.split("-");return changeCategory(e[0],undefined,null,e[1]),!1}if($target.closest("#toolsCategoriesList").length&&changeCategory($target.text(),undefined),$target.hasClass("foundContact")){f=$target.attr("id"),o=f.substring(f.indexOf("-")+1),addSelectedContact(filteredContacts[o]);return}if($target.hasClass("selectedContact")){removeSelectedContact($target);return}if($("#filterContact").keypress(function(){quickFindContactsElmSearch($("#filterContact"));return}),$target.hasClass("editContact")){$(".btnEdit").hide(),$(".btnSave").show(),makeContactEditable($target);return}if($target.hasClass("saveContact")){$(".btnEdit").show(),$(".btnSave").hide(),$(".editContactInput").parent().effect("highlight",{color:"#a7ff8c"},600),saveEditContact($target);return}if($target.hasClass("deleteContact")){deleteSingleContact($target);return}if($target.hasClass("sendEmailContact")){sendEmailToSingleContact($target);return}$(".tableRow").mouseleave(function(){$(".btnEdit").show(),$(".btnSave").hide(),makeContentNoneEditable($target);return})});(function(){var u=window.history&&history.replaceState,n,f,e,o,i,s,h,t,c,r;if(qsParm.tab)n=tabNames[qsParm.tab.toUpperCase()]||{name:qsParm.tab},u=!1;else if(qsParm.fromHq){if(f=qsParm.fromHq.toLowerCase(),e=hqRedirectedTabs[f],e)n=tabNames[e];else{o=0;for(i in hqRedirectedTabs)f.indexOf(i)==0&&i.length>o&&(o=i.length,n=tabNames[hqRedirectedTabs[i]])}n||(n=tabNames.DASHBOARD),s=decodeURIComponent(qsParm.fromHq),h=s.indexOf("?"),h>-1&&(t={},c=s.substring(h+1),rbParseQueryStrAndApplyToObj(c,t),t.tab&&(n=tabNames[t.tab.toUpperCase()]),t.pop?$(function(){setTimeout(function(){rbDoShowPop(t.pop)},200)}):t.task&&(r=t.task,initialPageLoadsSectionLoadedFunc=function(){window["show"+r+"Pop"]?setTimeout(function(){window["show"+r+"Pop"]()},1):window["show"+r+"PopDashboard"]&&setTimeout(function(){window["show"+r+"PopDashboard"]()},1)}))}else location.pathname.indexOf("/Goal/")>-1&&(n=tabNames.MYPAGE,u=!1);n?(n!=tabNames.RECOMMITMENT||window.memberCanRecommit||(n=tabNames.DASHBOARD,u=!0),objectId=qsParm.oid||qsParm.idParam||qsParm.id,showSelectedCategory(n.name,null,objectId),u&&history.replaceState({rallybound:!0,func:"showSelectedCategory",funcParam:n.name},null,tabUrl+n.name)):location.href=tabUrl+tabNames.DASHBOARD.name})();var filteredContacts=[],selectedContacts={},emailWholeTeamEnabled=!1,donigAddInviteContact=!1;isAddingNewContact=!1,$(function(){if(!window.dontHijackAllPops){$("#popContainerBase").length||$('<div id="popContainerBase" class="modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"></div><div class="modal-footer"></div></div></div></div>').appendTo("body"),window.$openPop=$(),window.createModalPopAndShow=function(n,t,i){var e,r={header:n,body:t,footer:""},u=$("#popContainerBase").clone().attr("id","genericPop").addClass(e||"").appendTo("body"),f=u.children(".modal-dialog").children(".modal-content"),o=f.children(".modal-header").append("<h1 />");o.children("h1").append(r.header),f.children(".modal-body").append(r.body),f.children(".modal-footer").append(r.footer),u.modal("show"),$openPop=u,$(".close").show(),i?$(".close").hide():$(".close").show()};var n=closePop;window.closePop=function(t){t==$openPop.attr("id")?$openPop.modal("hide"):n.apply(this,arguments),$(".close").legend||$(".close").show()}}}),thankYouDonation=0,thankYouEmailSending=!1;
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.moment=t()}(this,function(){"use strict";function i(){return au.apply(null,arguments)}function wo(n){au=n}function fi(n){return"[object Array]"===Object.prototype.toString.call(n)}function yi(n){return n instanceof Date||"[object Date]"===Object.prototype.toString.call(n)}function uo(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function ot(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function bi(n,t){for(var i in t)ot(t,i)&&(n[i]=t[i]);return ot(t,"toString")&&(n.toString=t.toString),ot(t,"valueOf")&&(n.valueOf=t.valueOf),n}function ni(n,t,i,r){return df(n,t,i,r,!0).utc()}function ro(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(n){return null==n._pf&&(n._pf=ro()),n._pf}function ve(n){if(null==n._isValid){var t=o(n);n._isValid=!isNaN(n._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,n._strict&&(n._isValid=n._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return n._isValid}function ae(n){var t=ni(NaN);return null!=n?bi(o(t),n):o(t).userInvalidated=!0,t}function he(n,t){var u,i,r;if("undefined"!=typeof t._isAMomentObject&&(n._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(n._i=t._i),"undefined"!=typeof t._f&&(n._f=t._f),"undefined"!=typeof t._l&&(n._l=t._l),"undefined"!=typeof t._strict&&(n._strict=t._strict),"undefined"!=typeof t._tzm&&(n._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(n._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(n._offset=t._offset),"undefined"!=typeof t._pf&&(n._pf=o(t)),"undefined"!=typeof t._locale&&(n._locale=t._locale),ur.length>0)for(u in ur)i=ur[u],r=t[i],"undefined"!=typeof r&&(n[i]=r);return n}function kt(n){he(this,n),this._d=new Date(+n._d),er===!1&&(er=!0,i.updateOffset(this),er=!1)}function tt(n){return n instanceof kt||null!=n&&null!=n._isAMomentObject}function h(n){var t=+n,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function lf(n,t,i){for(var f=Math.min(n.length,t.length),e=Math.abs(n.length-t.length),u=0,r=0;f>r;r++)(i&&n[r]!==t[r]||!i&&h(n[r])!==h(t[r]))&&u++;return u+e}function af(){}function vf(n){return n?n.toLowerCase().replace("_","-"):n}function ls(n){for(var i,t,f,r,u=0;u<n.length;){for(r=vf(n[u]).split("-"),i=r.length,t=vf(n[u+1]),t=t?t.split("-"):null;i>0;){if(f=yf(r.slice(0,i).join("-")))return f;if(t&&t.length>=i&&lf(r,t,!0)>=i-1)break;i--}u++}return null}function yf(n){var t=null;if(!at[n]&&"undefined"!=typeof module&&module&&module.exports)try{t=wi._abbr,require("./locale/"+n),dt(t)}catch(i){}return at[n]}function dt(n,t){var i;return n&&(i="undefined"==typeof t?et(n):bf(n,t),i&&(wi=i)),wi._abbr}function bf(n,t){return null!==t?(t.abbr=n,at[n]||(at[n]=new af),at[n].set(t),dt(n),at[n]):(delete at[n],null)}function et(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return wi;if(!fi(n)){if(t=yf(n))return t;n=[n]}return ls(n)}function l(n,t){var i=n.toLowerCase();ti[i]=ti[i+"s"]=ti[t]=n}function y(n){if("string"==typeof n)return ti[n]||ti[n.toLowerCase()]}function kf(n){var i,t,r={};for(t in n)ot(n,t)&&(i=y(t),i&&(r[i]=n[t]));return r}function wt(n,t){return function(r){return null!=r?(le(this,n,r),i.updateOffset(this,t),this):ci(this,n)}}function ci(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function le(n,t,i){return n._d["set"+(n._isUTC?"UTC":"")+t](i)}function gf(n,t){var i;if("object"==typeof n)for(i in n)this.set(i,n[i]);else if(n=y(n),"function"==typeof this[n])return this[n](t);return this}function cr(n,t,i){for(var r=""+Math.abs(n),u=n>=0;r.length<t;)r="0"+r;return(u?i?"+":"":"-")+r}function r(n,t,i,r){var u=r;"string"==typeof r&&(u=function(){return this[r]()}),n&&(vt[n]=u),t&&(vt[t[0]]=function(){return cr(u.apply(this,arguments),t[1],t[2])}),i&&(vt[i]=function(){return this.localeData().ordinal(u.apply(this,arguments),n)})}function th(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ih(n){for(var i=n.match(tf),t=0,r=i.length;r>t;t++)i[t]=vt[i[t]]?vt[i[t]]:th(i[t]);return function(u){var f="";for(t=0;r>t;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function lr(n,t){return n.isValid()?(t=ne(t,n.localeData()),tr[t]||(tr[t]=ih(t)),tr[t](n)):n.localeData().invalidDate()}function ne(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(ei.lastIndex=0;i>=0&&ei.test(n);)n=n.replace(ei,r),ei.lastIndex=0,i-=1;return n}function t(n,t,i){sr[n]="function"==typeof t?t:function(n){return n&&i?i:t}}function uh(n,t){return ot(sr,n)?sr[n](t._strict,t._locale):new RegExp(eh(n))}function eh(n){return n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(n,t){var i,r=t;for("string"==typeof n&&(n=[n]),"number"==typeof t&&(r=function(n,i){i[t]=h(n)}),i=0;i<n.length;i++)dr[n[i]]=r}function ri(n,t){c(n,function(n,i,r,u){r._w=r._w||{},t(n,r._w,r,u)})}function oh(n,t,i){null!=t&&ot(dr,n)&&dr[n](t,i._a,i,n)}function wr(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function sh(n){return this._months[n.month()]}function is(n){return this._monthsShort[n.month()]}function ch(n,t,i){var r,u,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++)if((u=ni([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(f="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[r]=new RegExp(f.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[r].test(n))||i&&"MMM"===t&&this._shortMonthsParse[r].test(n)||!i&&this._monthsParse[r].test(n))return r}function ie(n,t){var i;return"string"==typeof t&&(t=n.localeData().monthsParse(t),"number"!=typeof t)?n:(i=Math.min(n.date(),wr(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function re(n){return null!=n?(ie(this,n),i.updateOffset(this,!0),this):ci(this,"Month")}function ke(){return wr(this.year(),this.month())}function br(n){var i,t=n._a;return t&&-2===o(n).overflow&&(i=t[d]<0||t[d]>11?d:t[w]<1||t[w]>wr(t[k],t[d])?w:t[a]<0||t[a]>24||24===t[a]&&(0!==t[st]||0!==t[ct]||0!==t[lt])?a:t[st]<0||t[st]>59?st:t[ct]<0||t[ct]>59?ct:t[lt]<0||t[lt]>999?lt:-1,o(n)._overflowDayOfYear&&(k>i||i>w)&&(i=w),o(n).overflow=i),n}function ue(n){i.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+n)}function p(n,t){var i=!0,r=n+"\n"+(new Error).stack;return bi(function(){return i&&(ue(r),i=!1),t.apply(this,arguments)},t)}function ge(n,t){rf[n]||(ue(t),rf[n]=!0)}function fe(n){var t,i,r=n._i,u=ts.exec(r);if(u){for(o(n).iso=!0,t=0,i=pr.length;i>t;t++)if(pr[t][1].exec(r)){n._f=pr[t][0]+(u[6]||" ");break}for(t=0,i=yr.length;i>t;t++)if(yr[t][1].exec(r)){n._f+=yr[t][0];break}r.match(pi)&&(n._f+="Z"),gi(n)}else n._isValid=!1}function to(n){var t=hh.exec(n._i);return null!==t?void(n._d=new Date(+t[1])):(fe(n),void(n._isValid===!1&&(delete n._isValid,i.createFromInputFallback(n))))}function io(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return 1970>n&&o.setFullYear(n),o}function kr(n){var t=new Date(Date.UTC.apply(null,arguments));return 1970>n&&t.setUTCFullYear(n),t}function ee(n){return oe(n)?366:365}function oe(n){return n%4==0&&n%100!=0||n%400==0}function fo(){return oe(this.year())}function ut(n,t,i){var u,f=i-t,r=i-n.day();return r>f&&(r-=7),f-7>r&&(r+=7),u=e(n).add(r,"d"),{week:Math.ceil(u.dayOfYear()/7),year:u.year()}}function oo(n){return ut(n,this._week.dow,this._week.doy).week}function so(){return this._week.dow}function co(){return this._week.doy}function lo(n){var t=this.localeData().week(this);return null==n?t:this.add(7*(n-t),"d")}function ao(n){var t=ut(this,1,4).week;return null==n?t:this.add(7*(n-t),"d")}function vo(n,t,i,r,u){var o,e,f=kr(n,0,1).getUTCDay();return f=0===f?7:f,i=null!=i?i:u,o=u-f+(f>r?7:0)-(u>f?7:0),e=7*(t-1)+(i-u)+o+1,{year:e>0?n:n-1,dayOfYear:e>0?e:ee(n-1)+e}}function yo(n){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==n?t:this.add(n-t,"d")}function pt(n,t,i){return null!=n?n:null!=t?t:i}function po(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function fr(n){var t,i,r,u,f=[];if(!n._d){for(r=po(n),n._w&&null==n._a[w]&&null==n._a[d]&&bo(n),n._dayOfYear&&(u=pt(n._a[k],r[k]),n._dayOfYear>ee(u)&&(o(n)._overflowDayOfYear=!0),i=kr(u,0,n._dayOfYear),n._a[d]=i.getUTCMonth(),n._a[w]=i.getUTCDate()),t=0;3>t&&null==n._a[t];++t)n._a[t]=f[t]=r[t];for(;7>t;t++)n._a[t]=f[t]=null==n._a[t]?2===t?1:0:n._a[t];24===n._a[a]&&0===n._a[st]&&0===n._a[ct]&&0===n._a[lt]&&(n._nextDay=!0,n._a[a]=0),n._d=(n._useUTC?kr:io).apply(null,f),null!=n._tzm&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[a]=24)}}function bo(n){var t,o,u,r,i,f,s;t=n._w,null!=t.GG||null!=t.W||null!=t.E?(i=1,f=4,o=pt(t.GG,n._a[k],ut(e(),1,4).year),u=pt(t.W,1),r=pt(t.E,1)):(i=n._locale._week.dow,f=n._locale._week.doy,o=pt(t.gg,n._a[k],ut(e(),i,f).year),u=pt(t.w,1),null!=t.d?(r=t.d,i>r&&++u):r=null!=t.e?t.e+i:i),s=vo(o,u,r,f,i),n._a[k]=s.year,n._dayOfYear=s.dayOfYear}function gi(n){if(n._f===i.ISO_8601)return void fe(n);n._a=[],o(n).empty=!0;for(var t,u,s,r=""+n._i,c=r.length,h=0,e=ne(n._f,n._locale).match(tf)||[],f=0;f<e.length;f++)u=e[f],t=(r.match(uh(u,n))||[])[0],t&&(s=r.substr(0,r.indexOf(t)),s.length>0&&o(n).unusedInput.push(s),r=r.slice(r.indexOf(t)+t.length),h+=t.length),vt[u]?(t?o(n).empty=!1:o(n).unusedTokens.push(u),oh(u,t,n)):n._strict&&!t&&o(n).unusedTokens.push(u);o(n).charsLeftOver=c-h,r.length>0&&o(n).unusedInput.push(r),o(n).bigHour===!0&&n._a[a]<=12&&n._a[a]>0&&(o(n).bigHour=void 0),n._a[a]=ko(n._locale,n._a[a],n._meridiem),fr(n),br(n)}function ko(n,t,i){var r;return null==i?t:null!=n.meridiemHour?n.meridiemHour(t,i):null!=n.isPM?(r=n.isPM(i),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function go(n){var t,f,u,r,i;if(0===n._f.length)return o(n).invalidFormat=!0,void(n._d=new Date(NaN));for(r=0;r<n._f.length;r++)i=0,t=he({},n),null!=n._useUTC&&(t._useUTC=n._useUTC),t._f=n._f[r],gi(t),ve(t)&&(i+=o(t).charsLeftOver,i+=10*o(t).unusedTokens.length,o(t).score=i,(null==u||u>i)&&(u=i,f=t));bi(n,f||t)}function lh(n){if(!n._d){var t=kf(n._i);n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],fr(n)}}function ov(n){var i,t=n._i,r=n._f;return n._locale=n._locale||et(n._l),null===t||void 0===r&&""===t?ae({nullInput:!0}):("string"==typeof t&&(n._i=t=n._locale.preparse(t)),tt(t)?new kt(br(t)):(fi(r)?go(n):r?gi(n):yi(t)?n._d=t:vh(n),i=new kt(br(n)),i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i))}function vh(n){var t=n._i;void 0===t?n._d=new Date:yi(t)?n._d=new Date(+t):"string"==typeof t?to(n):fi(t)?(n._a=uo(t.slice(0),function(n){return parseInt(n,10)}),fr(n)):"object"==typeof t?lh(n):"number"==typeof t?n._d=new Date(t):i.createFromInputFallback(n)}function df(n,t,i,r,u){var f={};return"boolean"==typeof i&&(r=i,i=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=u,f._l=i,f._i=n,f._f=t,f._strict=r,ov(f)}function e(n,t,i,r){return df(n,t,i,r,!1)}function cf(n,t){var r,i;if(1===t.length&&fi(t[0])&&(t=t[0]),!t.length)return e();for(r=t[0],i=1;i<t.length;++i)t[i][n](r)&&(r=t[i]);return r}function fa(){var n=[].slice.call(arguments,0);return cf("isBefore",n)}function ua(){var n=[].slice.call(arguments,0);return cf("isAfter",n)}function oi(n){var t=kf(n),i=t.year||0,r=t.quarter||0,u=t.month||0,f=t.week||0,e=t.day||0,o=t.hour||0,s=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*h+6e4*s+36e5*o,this._days=+e+7*f,this._months=+u+3*r+12*i,this._data={},this._locale=et(),this._bubble()}function rr(n){return n instanceof oi}function se(n,t){r(n,0,0,function(){var n=this.utcOffset(),i="+";return 0>n&&(n=-n,i="-"),i+cr(~~(n/60),2)+t+cr(~~n%60,2)})}function nr(n){var i=(n||"").match(pi)||[],u=i[i.length-1]||[],t=(u+"").match(ku)||["-",0,0],r=+(60*t[1])+h(t[2]);return"+"===t[0]?r:-r}function di(n,t){var r,u;return t._isUTC?(r=t.clone(),u=(tt(n)||yi(n)?+n:+e(n))-+r,r._d.setTime(+r._d+u),i.updateOffset(r,!1),r):e(n).local()}function ir(n){return 15*-Math.round(n._d.getTimezoneOffset()/15)}function ra(n,t){var r,u=this._offset||0;return null!=n?("string"==typeof n&&(n=nr(n)),Math.abs(n)<16&&(n=60*n),!this._isUTC&&t&&(r=ir(this)),this._offset=n,this._isUTC=!0,null!=r&&this.add(r,"m"),u!==n&&(!t||this._changeInProgress?ce(this,nt(n-u,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?u:ir(this)}function ia(n,t){return null!=n?("string"!=typeof n&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()}function ta(n){return this.utcOffset(0,n)}function wl(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(ir(this),"m")),this}function yl(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(nr(this._i)),this}function dl(n){return n=n?e(n).utcOffset():0,(this.utcOffset()-n)%60==0}function sa(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function fv(){if(this._a){var n=this._isUTC?ni(this._a):e(this._a);return this.isValid()&&lf(this._a,n.toArray())>0}return!1}function da(){return!this._isUTC}function ka(){return this._isUTC}function te(){return this._isUTC&&0===this._offset}function nt(n,t){var u,f,o,i=n,r=null;return rr(n)?i={ms:n._milliseconds,d:n._days,M:n._months}:"number"==typeof n?(i={},t?i[t]=n:i.milliseconds=n):(r=bu.exec(n))?(u="-"===r[1]?-1:1,i={y:0,d:h(r[w])*u,h:h(r[a])*u,m:h(r[st])*u,s:h(r[ct])*u,ms:h(r[lt])*u}):(r=wu.exec(n))?(u="-"===r[1]?-1:1,i={y:ft(r[2],u),M:ft(r[3],u),d:ft(r[4],u),h:ft(r[5],u),m:ft(r[6],u),s:ft(r[7],u),w:ft(r[8],u)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=ec(e(i.from),e(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),f=new oi(i),rr(n)&&ot(n,"_locale")&&(f._locale=n._locale),f}function ft(n,t){var i=n&&parseFloat(n.replace(",","."));return(isNaN(i)?0:i)*t}function wf(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+12*(t.year()-n.year()),n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function ec(n,t){var i;return t=di(t,n),n.isBefore(t)?i=wf(n,t):(i=wf(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function pf(n,t){return function(i,r){var u,f;return null===r||isNaN(+r)||(ge(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),f=i,i=r,r=f),i="string"==typeof i?+i:i,u=nt(i,r),ce(this,u,n),this}}function ce(n,t,r,u){var o=t._milliseconds,f=t._days,e=t._months;u=null==u?!0:u,o&&n._d.setTime(+n._d+o*r),f&&le(n,"Date",ci(n,"Date")+f*r),e&&ie(n,ci(n,"Month")+e*r),u&&i.updateOffset(n,f||e)}function yh(n){var i=n||e(),r=di(i,this).startOf("day"),t=this.diff(r,"days",!0),u=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.localeData().calendar(u,this,e(i)))}function nc(){return new kt(this)}function tl(n,t){var i;return t=y("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(n=tt(n)?n:e(n),+this>+n):(i=tt(n)?+n:+e(n),i<+this.clone().startOf(t))}function sl(n,t){var i;return t=y("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(n=tt(n)?n:e(n),+n>+this):(i=tt(n)?+n:+e(n),+this.clone().endOf(t)<i)}function pc(n,t,i){return this.isAfter(n,i)&&this.isBefore(t,i)}function ea(n,t){var i;return t=y(t||"millisecond"),"millisecond"===t?(n=tt(n)?n:e(n),+this==+n):(i=+e(n),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function b(n){return 0>n?Math.ceil(n):Math.floor(n)}function ah(n,t,i){var r,u,f=di(n,this),e=6e4*(f.utcOffset()-this.utcOffset());return t=y(t),"year"===t||"month"===t||"quarter"===t?(u=vc(this,f),"quarter"===t?u/=3:"year"===t&&(u/=12)):(r=this-f,u="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-e)/864e5:"week"===t?(r-e)/6048e5:r),i?u:b(u)}function vc(n,t){var r,f,u=12*(t.year()-n.year())+(t.month()-n.month()),i=n.clone().add(u,"months");return 0>t-i?(r=n.clone().add(u-1,"months"),f=(t-i)/(i-r)):(r=n.clone().add(u+1,"months"),f=(t-i)/(r-i)),-(u+f)}function yc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function uf(){var n=this.clone().utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():lr(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):lr(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function wc(n){var t=lr(this,n||i.defaultFormat);return this.localeData().postformat(t)}function bc(n,t){return this.isValid()?nt({to:this,from:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function kc(n){return this.from(e(),n)}function dc(n,t){return this.isValid()?nt({from:this,to:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function nl(n){return this.to(e(),n)}function hu(n){var t;return void 0===n?this._locale._abbr:(t=et(n),null!=t&&(this._locale=t),this)}function fu(){return this._locale}function il(n){switch(n=y(n)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===n&&this.weekday(0),"isoWeek"===n&&this.isoWeekday(1),"quarter"===n&&this.month(3*Math.floor(this.month()/3)),this}function rl(n){return n=y(n),void 0===n||"millisecond"===n?this:this.startOf(n).add(1,"isoWeek"===n?"week":n).subtract(1,"ms")}function ul(){return+this._d-6e4*(this._offset||0)}function fl(){return Math.floor(+this/1e3)}function el(){return this._offset?new Date(+this):this._d}function ol(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function ac(){return ve(this)}function gc(){return bi({},o(this))}function lc(){return o(this).overflow}function vi(n,t){r(0,[n,n.length],0,t)}function gr(n,t,i){return ut(e([n,11,31+t-i]),t,i).week}function ph(n){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==n?t:this.add(n-t,"y")}function wh(n){var t=ut(this,1,4).year;return null==n?t:this.add(n-t,"y")}function bh(){return gr(this.year(),1,4)}function sv(){var n=this.localeData()._week;return gr(this.year(),n.dow,n.doy)}function kh(n){return null==n?Math.ceil((this.month()+1)/3):this.month(3*(n-1)+this.month()%3)}function dh(n,t){if("string"==typeof n)if(isNaN(n)){if(n=t.weekdaysParse(n),"number"!=typeof n)return null}else n=parseInt(n,10);return n}function gh(n){return this._weekdays[n.day()]}function tc(n){return this._weekdaysShort[n.day()]}function hc(n){return this._weekdaysMin[n.day()]}function ic(n){var t,i,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=e([2e3,1]).day(t),r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(n))return t}function rc(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=n?(n=dh(n,this.localeData()),this.add(n-t,"d")):t}function uc(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==n?t:this.add(n-t,"d")}function fc(n){return null==n?this.day()||7:this.day(this.day()%7?n:n-7)}function iu(n,t){r(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ru(n,t){return t._meridiemParse}function oc(n){return"p"===(n+"").toLowerCase().charAt(0)}function sc(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"}function uu(n){r(0,[n,3],0,"millisecond")}function cc(){return this._isUTC?"UTC":""}function hl(){return this._isUTC?"Coordinated Universal Time":""}function cl(n){return e(1e3*n)}function ll(){return e.apply(null,arguments).parseZone()}function la(n,t,i){var r=this._calendar[n];return"function"==typeof r?r.call(t,i):r}function aa(n){var t=this._longDateFormat[n];return!t&&this._longDateFormat[n.toUpperCase()]&&(t=this._longDateFormat[n.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n]=t),t}function va(){return this._invalidDate}function ya(n){return this._ordinal.replace("%d",n)}function ou(n){return n}function pa(n,t,i,r){var u=this._relativeTime[i];return"function"==typeof u?u(n,t,i,r):u.replace(/%d/i,n)}function wa(n,t){var i=this._relativeTime[n>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)}function ba(n){var t,i;for(i in n)t=n[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function su(n,t,i,r){var u=et(),f=ni().set(r,t);return u[i](f,n)}function gt(n,t,i,r,u){if("number"==typeof n&&(t=n,n=void 0),n=n||"",null!=t)return su(n,t,i,u);for(var e=[],f=0;r>f;f++)e[f]=su(n,f,i,u);return e}function ga(n,t){return gt(n,t,"months",12,"month")}function nv(n,t){return gt(n,t,"monthsShort",12,"month")}function tv(n,t){return gt(n,t,"weekdays",7,"day")}function iv(n,t){return gt(n,t,"weekdaysShort",7,"day")}function rv(n,t){return gt(n,t,"weekdaysMin",7,"day")}function uv(){var n=this._data;return this._milliseconds=g(this._milliseconds),this._days=g(this._days),this._months=g(this._months),n.milliseconds=g(n.milliseconds),n.seconds=g(n.seconds),n.minutes=g(n.minutes),n.hours=g(n.hours),n.months=g(n.months),n.years=g(n.years),this}function tu(n,t,i,r){var u=nt(t,i);return n._milliseconds+=r*u._milliseconds,n._days+=r*u._days,n._months+=r*u._months,n._bubble()}function ev(n,t){return tu(this,n,t,1)}function ca(n,t){return tu(this,n,t,-1)}function ha(){var u,f,e,o=this._milliseconds,t=this._days,i=this._months,n=this._data,r=0;return n.milliseconds=o%1e3,u=b(o/1e3),n.seconds=u%60,f=b(u/60),n.minutes=f%60,e=b(f/60),n.hours=e%24,t+=b(e/24),r=b(lu(t)),t-=b(of(r)),i+=b(t/30),t%=30,r+=b(i/12),i%=12,n.days=t,n.months=i,n.years=r,this}function lu(n){return 400*n/146097}function of(n){return 146097*n/400}function al(n){var t,r,i=this._milliseconds;if(n=y(n),"month"===n||"year"===n)return t=this._days+i/864e5,r=this._months+12*lu(t),"month"===n?r:r/12;switch(t=this._days+Math.round(of(this._months/12)),n){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+n);}}function vl(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*h(this._months/12)}function it(n){return function(){return this.as(n)}}function pl(n){return n=y(n),this[n+"s"]()}function ht(n){return function(){return this._data[n]}}function bl(){return b(this.days()/7)}function kl(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function gl(n,t,i){var r=nt(n).abs(),h=yt(r.as("s")),f=yt(r.as("m")),e=yt(r.as("h")),o=yt(r.as("d")),s=yt(r.as("M")),c=yt(r.as("y")),u=h<rt.s&&["s",h]||1===f&&["m"]||f<rt.m&&["mm",f]||1===e&&["h"]||e<rt.h&&["hh",e]||1===o&&["d"]||o<rt.d&&["dd",o]||1===s&&["M"]||s<rt.M&&["MM",s]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+n>0,u[4]=i,kl.apply(null,u)}function oa(n,t){return void 0===rt[n]?!1:void 0===t?rt[n]:(rt[n]=t,!0)}function na(n){var t=this.localeData(),i=gl(this,!n,t);return n&&(i=t.pastFuture(+this,i)),t.postformat(i)}function si(){var r=bt(this.years()),u=bt(this.months()),f=bt(this.days()),n=bt(this.hours()),t=bt(this.minutes()),i=bt(this.seconds()+this.milliseconds()/1e3),e=this.asSeconds();return e?(0>e?"-":"")+"P"+(r?r+"Y":"")+(u?u+"M":"")+(f?f+"D":"")+(n||t||i?"T":"")+(n?n+"H":"")+(t?t+"M":"")+(i?i+"S":""):"P0D"}var au,wi,ur=i.momentProperties=[],er=!1,at={},ti={},tf=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ei=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,tr={},vt={},ff=/\d/,v=/\d\d/,ef=/\d{3}/,ki=/\d{4}/,ui=/[+-]?\d{6}/,s=/\d\d?/,ai=/\d{1,3}/,or=/\d{1,4}/,hi=/[+-]?\d{1,6}/,ho=/\d+/,li=/[+-]?\d+/,pi=/Z|[+-]\d\d:?\d\d/gi,eo=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sr={},dr={},k=0,d=1,w=2,a=3,st=4,ct=5,lt=6,vr,nf,gu,du,ku,bu,wu,yu,vu,hr,ar,cu,nu,sf,pu,eu,n,hf;r("M",["MM",2],"Mo",function(){return this.month()+1}),r("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)}),r("MMMM",0,0,function(n){return this.localeData().months(this,n)}),l("month","M"),t("M",s),t("MM",s,v),t("MMM",ii),t("MMMM",ii),c(["M","MM"],function(n,t){t[d]=h(n)-1}),c(["MMM","MMMM"],function(n,t,i,r){var u=i._locale.monthsParse(n,r,i._strict);null!=u?t[d]=u:o(i).invalidMonth=n});var we="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rf={};i.suppressDeprecationWarnings=!1;var ts=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hh=/^\/?Date\((\-?\d+)/i;i.createFromInputFallback=p("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),r(0,["YY",2],0,function(){return this.year()%100}),r(0,["YYYY",4],0,"year"),r(0,["YYYYY",5],0,"year"),r(0,["YYYYYY",6,!0],0,"year"),l("year","y"),t("Y",li),t("YY",s,v),t("YYYY",or,ki),t("YYYYY",hi,ui),t("YYYYYY",hi,ui),c(["YYYY","YYYYY","YYYYYY"],k),c("YY",function(n,t){t[k]=i.parseTwoDigitYear(n)}),i.parseTwoDigitYear=function(n){return h(n)+(h(n)>68?1900:2e3)},vr=wt("FullYear",!1),r("w",["ww",2],"wo","week"),r("W",["WW",2],"Wo","isoWeek"),l("week","w"),l("isoWeek","W"),t("w",s),t("ww",s,v),t("W",s),t("WW",s,v),ri(["w","ww","W","WW"],function(n,t,i,r){t[r.substr(0,1)]=h(n)}),nf={dow:0,doy:6},r("DDD",["DDDD",3],"DDDo","dayOfYear"),l("dayOfYear","DDD"),t("DDD",ai),t("DDDD",ef),c(["DDD","DDDD"],function(n,t,i){i._dayOfYear=h(n)}),i.ISO_8601=function(){},gu=p("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var n=e.apply(null,arguments);return this>n?this:n}),du=p("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var n=e.apply(null,arguments);return n>this?this:n}),se("Z",":"),se("ZZ",""),t("Z",pi),t("ZZ",pi),c(["Z","ZZ"],function(n,t,i){i._useUTC=!0,i._tzm=nr(n)}),ku=/([\+\-]|\d\d)/gi,i.updateOffset=function(){},bu=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wu=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,nt.fn=oi.prototype,yu=pf(1,"add"),vu=pf(-1,"subtract"),i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hr=p("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return void 0===n?this.localeData():this.locale(n)}),r(0,["gg",2],0,function(){return this.weekYear()%100}),r(0,["GG",2],0,function(){return this.isoWeekYear()%100}),vi("gggg","weekYear"),vi("ggggg","weekYear"),vi("GGGG","isoWeekYear"),vi("GGGGG","isoWeekYear"),l("weekYear","gg"),l("isoWeekYear","GG"),t("G",li),t("g",li),t("GG",s,v),t("gg",s,v),t("GGGG",or,ki),t("gggg",or,ki),t("GGGGG",hi,ui),t("ggggg",hi,ui),ri(["gggg","ggggg","GGGG","GGGGG"],function(n,t,i,r){t[r.substr(0,2)]=h(n)}),ri(["gg","GG"],function(n,t,r,u){t[u]=i.parseTwoDigitYear(n)}),r("Q",0,0,"quarter"),l("quarter","Q"),t("Q",ff),c("Q",function(n,t){t[d]=3*(h(n)-1)}),r("D",["DD",2],"Do","date"),l("date","D"),t("D",s),t("DD",s,v),t("Do",function(n,t){return n?t._ordinalParse:t._ordinalParseLenient}),c(["D","DD"],w),c("Do",function(n,t){t[w]=h(n.match(s)[0],10)}),ar=wt("Date",!0),r("d",0,"do","day"),r("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)}),r("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)}),r("dddd",0,0,function(n){return this.localeData().weekdays(this,n)}),r("e",0,0,"weekday"),r("E",0,0,"isoWeekday"),l("day","d"),l("weekday","e"),l("isoWeekday","E"),t("d",s),t("e",s),t("E",s),t("dd",ii),t("ddd",ii),t("dddd",ii),ri(["dd","ddd","dddd"],function(n,t,i){var r=i._locale.weekdaysParse(n);null!=r?t.d=r:o(i).invalidWeekday=n}),ri(["d","e","E"],function(n,t,i,r){t[r]=h(n)});var ws="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ps="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ys="Su_Mo_Tu_We_Th_Fr_Sa".split("_");r("H",["HH",2],0,"hour"),r("h",["hh",2],0,function(){return this.hours()%12||12}),iu("a",!0),iu("A",!1),l("hour","h"),t("a",ru),t("A",ru),t("H",s),t("h",s),t("HH",s,v),t("hh",s,v),c(["H","HH"],a),c(["a","A"],function(n,t,i){i._isPm=i._locale.isPM(n),i._meridiem=n}),c(["h","hh"],function(n,t,i){t[a]=h(n),o(i).bigHour=!0}),cu=/[ap]\.?m?\.?/i,nu=wt("Hours",!0),r("m",["mm",2],0,"minute"),l("minute","m"),t("m",s),t("mm",s,v),c(["m","mm"],st),sf=wt("Minutes",!1),r("s",["ss",2],0,"second"),l("second","s"),t("s",s),t("ss",s,v),c(["s","ss"],ct),pu=wt("Seconds",!1),r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),uu("SSS"),uu("SSSS"),l("millisecond","ms"),t("S",ai,ff),t("SS",ai,v),t("SSS",ai,ef),t("SSSS",ho),c(["S","SS","SSS","SSSS"],function(n,t){t[lt]=h(1e3*("0."+n))}),eu=wt("Milliseconds",!1),r("z",0,0,"zoneAbbr"),r("zz",0,0,"zoneName"),n=kt.prototype,n.add=yu,n.calendar=yh,n.clone=nc,n.diff=ah,n.endOf=rl,n.format=wc,n.from=bc,n.fromNow=kc,n.to=dc,n.toNow=nl,n.get=gf,n.invalidAt=lc,n.isAfter=tl,n.isBefore=sl,n.isBetween=pc,n.isSame=ea,n.isValid=ac,n.lang=hr,n.locale=hu,n.localeData=fu,n.max=du,n.min=gu,n.parsingFlags=gc,n.set=gf,n.startOf=il,n.subtract=vu,n.toArray=ol,n.toDate=el,n.toISOString=uf,n.toJSON=uf,n.toString=yc,n.unix=fl,n.valueOf=ul,n.year=vr,n.isLeapYear=fo,n.weekYear=ph,n.isoWeekYear=wh,n.quarter=n.quarters=kh,n.month=re,n.daysInMonth=ke,n.week=n.weeks=lo,n.isoWeek=n.isoWeeks=ao,n.weeksInYear=sv,n.isoWeeksInYear=bh,n.date=ar,n.day=n.days=rc,n.weekday=uc,n.isoWeekday=fc,n.dayOfYear=yo,n.hour=n.hours=nu,n.minute=n.minutes=sf,n.second=n.seconds=pu,n.millisecond=n.milliseconds=eu,n.utcOffset=ra,n.utc=ta,n.local=wl,n.parseZone=yl,n.hasAlignedHourOffset=dl,n.isDST=sa,n.isDSTShifted=fv,n.isLocal=da,n.isUtcOffset=ka,n.isUtc=te,n.isUTC=te,n.zoneAbbr=cc,n.zoneName=hl,n.dates=p("dates accessor is deprecated. Use date instead.",ar),n.months=p("months accessor is deprecated. Use month instead",re),n.years=p("years accessor is deprecated. Use year instead",vr),n.zone=p("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ia);var ss=n,os={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},es={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},us="Invalid date",ye="%d",rs=/\d{1,2}/,fs={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},u=af.prototype;u._calendar=os,u.calendar=la,u._longDateFormat=es,u.longDateFormat=aa,u._invalidDate=us,u.invalidDate=va,u._ordinal=ye,u.ordinal=ya,u._ordinalParse=rs,u.preparse=ou,u.postformat=ou,u._relativeTime=fs,u.relativeTime=pa,u.pastFuture=wa,u.set=ba,u.months=sh,u._months=we,u.monthsShort=is,u._monthsShort=pe,u.monthsParse=ch,u.week=oo,u._week=nf,u.firstDayOfYear=co,u.firstDayOfWeek=so,u.weekdays=gh,u._weekdays=ws,u.weekdaysMin=hc,u._weekdaysMin=ys,u.weekdaysShort=tc,u._weekdaysShort=ps,u.weekdaysParse=ic,u.isPM=oc,u._meridiemParse=cu,u.meridiem=sc,dt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,i=1===h(n%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return n+i}}),i.lang=p("moment.lang is deprecated. Use moment.locale instead.",dt),i.langData=p("moment.langData is deprecated. Use moment.localeData instead.",et);var g=Math.abs,hs=it("ms"),cs=it("s"),as=it("m"),vs=it("h"),bs=it("d"),ks=it("w"),ds=it("M"),gs=it("y"),nh=ht("milliseconds"),rh=ht("seconds"),fh=ht("minutes"),ns=ht("hours"),be=ht("days"),de=ht("months"),no=ht("years"),yt=Math.round,rt={s:45,m:45,h:22,d:26,M:11},bt=Math.abs,f=oi.prototype;return f.abs=uv,f.add=ev,f.subtract=ca,f.as=al,f.asMilliseconds=hs,f.asSeconds=cs,f.asMinutes=as,f.asHours=vs,f.asDays=bs,f.asWeeks=ks,f.asMonths=ds,f.asYears=gs,f.valueOf=vl,f._bubble=ha,f.get=pl,f.milliseconds=nh,f.seconds=rh,f.minutes=fh,f.hours=ns,f.days=be,f.weeks=bl,f.months=de,f.years=no,f.humanize=na,f.toISOString=si,f.toString=si,f.toJSON=si,f.locale=hu,f.localeData=fu,f.toIsoString=p("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",si),f.lang=hr,r("X",0,0,"unix"),r("x",0,0,"valueOf"),t("x",li),t("X",eo),c("X",function(n,t,i){i._d=new Date(1e3*parseFloat(n,10))}),c("x",function(n,t,i){i._d=new Date(h(n))}),i.version="2.10.3",wo(e),i.fn=ss,i.min=fa,i.max=ua,i.utc=ni,i.unix=cl,i.months=ga,i.isDate=yi,i.locale=dt,i.invalid=ae,i.duration=nt,i.isMoment=tt,i.weekdays=tv,i.parseZone=ll,i.localeData=et,i.isDuration=rr,i.monthsShort=nv,i.weekdaysMin=rv,i.defineLocale=bf,i.weekdaysShort=iv,i.normalizeUnits=y,i.relativeTimeThreshold=oa,hf=i}),moment.locale("fr",{monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_")}),moment.locale("en");
/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
!function(n){"function"==typeof define&&define.amd?define("picker",["jquery"],n):this.Picker=n(jQuery)}(function(n){function t(f,s,h,c){function k(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",l.component.nodes(a.open),y.box),y.wrap),y.frame),y.holder)}function g(){p.data(s,l).addClass(y.input).val(p.data("value")?l.get("select",v.format):f.value).on("focus."+a.id+" click."+a.id,d),v.editable||p.on("keydown."+a.id,function(n){var t=n.keyCode,i=/^(8|46)$/.test(t);return 27==t?(l.close(),!1):void((32==t||i||!a.open&&l.component.key[t])&&(n.preventDefault(),n.stopPropagation(),i?l.clear().close():l.open()))}),i(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"+(l._hidden?" "+l._hidden.id:"")})}function nt(){l.$root.on({focusin:function(n){l.$root.removeClass(y.focused),n.stopPropagation()},"mousedown click":function(t){var i=t.target;i!=l.$root.children()[0]&&(t.stopPropagation(),"mousedown"!=t.type||n(i).is(":input")||"OPTION"==i.nodeName||(t.preventDefault(),f.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var u=n(this),r=u.data(),e=u.hasClass(y.navDisabled)||u.hasClass(y.disabled),i=document.activeElement;i=i&&(i.type||i.href)&&i,(e||i&&!n.contains(l.$root[0],i))&&f.focus(),r.nav&&!e?l.set("highlight",l.component.item.highlight,{nav:r.nav}):t._.isInteger(r.pick)&&!e?l.set("select",r.pick).close(!0):r.clear&&l.clear().close(!0)}),i(l.$root[0],"hidden",!0)}function tt(){var i,t;v.hiddenName===!0?(i=f.name+"_hidden",t=f.name,f.name=""):(t=["string"==typeof v.hiddenPrefix?v.hiddenPrefix:"","string"==typeof v.hiddenSuffix?v.hiddenSuffix:"_submit"],t=i=t[0]+f.name+t[1]),l._hidden=n('<input type=hidden name="'+t+'"id="'+i+'"'+(p.data("value")||f.value?' value="'+l.get("select",v.formatSubmit)+'"':"")+">")[0],p.on("change."+a.id,function(){l._hidden.value=f.value?l.get("select",v.formatSubmit):""}).after(l._hidden)}function d(n){n.stopPropagation(),"focus"==n.type&&l.$root.addClass(y.focused),l.open()}if(!f)return t;var w=!1,a={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},v=h?n.extend(!0,{},h.defaults,c):c||{},y=n.extend({},t.klasses(),v.klass),p=n(f),b=function(){return this.start()},l=b.prototype={constructor:b,$node:p,start:function(){return a&&a.start?l:(a.methods={},a.start=!0,a.open=!1,a.type=f.type,f.autofocus=f==document.activeElement,f.type="text",f.readOnly=!v.editable,f.id=f.id||a.id,l.component=new h(l,v),l.$root=n(t._.node("div",k(),y.picker,'id="'+f.id+'_root"')),nt(),v.formatSubmit&&tt(),g(),v.container?n(v.container).append(l.$root):p.after(l.$root),l.on({start:l.component.onStart,render:l.component.onRender,stop:l.component.onStop,open:l.component.onOpen,close:l.component.onClose,set:l.component.onSet}).on({start:v.onStart,render:v.onRender,stop:v.onStop,open:v.onOpen,close:v.onClose,set:v.onSet}),w=o(l.$root.children()[0]),f.autofocus&&l.open(),l.trigger("start").trigger("render"))},render:function(n){return n?l.$root.html(k()):l.$root.find("."+y.box).html(l.component.nodes(a.open)),l.trigger("render")},stop:function(){return a.start?(l.close(),l._hidden&&l._hidden.parentNode.removeChild(l._hidden),l.$root.remove(),p.removeClass(y.input).removeData(s),setTimeout(function(){p.off("."+a.id)},0),f.type=a.type,f.readOnly=!1,l.trigger("stop"),a.methods={},a.start=!1,l):l},open:function(o){return a.open?l:(p.addClass(y.active),i(f,"expanded",!0),setTimeout(function(){l.$root.addClass(y.opened),i(l.$root[0],"hidden",!1)},0),o!==!1&&(a.open=!0,w&&r.css("overflow","hidden").css("padding-right","+="+u()),p.trigger("focus"),e.on("click."+a.id+" focusin."+a.id,function(n){var t=n.target;t!=f&&t!=document&&3!=n.which&&l.close(t===l.$root.children()[0])}).on("keydown."+a.id,function(i){var r=i.keyCode,u=l.component.key[r],e=i.target;27==r?l.close(!0):e!=f||!u&&13!=r?n.contains(l.$root[0],e)&&13==r&&(i.preventDefault(),e.click()):(i.preventDefault(),u?t._.trigger(l.component.key.go,l,[t._.trigger(u)]):l.$root.find("."+y.highlighted).hasClass(y.disabled)||l.set("select",l.component.item.highlight).close())})),l.trigger("open"))},close:function(n){return n&&(p.off("focus."+a.id).trigger("focus"),setTimeout(function(){p.on("focus."+a.id,d)},0)),p.removeClass(y.active),i(f,"expanded",!1),setTimeout(function(){l.$root.removeClass(y.opened+" "+y.focused),i(l.$root[0],"hidden",!0)},0),a.open?(a.open=!1,w&&r.css("overflow","").css("padding-right","-="+u()),e.off("."+a.id),l.trigger("close")):l},clear:function(){return l.set("clear")},set:function(t,i,r){var u,f,o=n.isPlainObject(t),e=o?t:{};if(r=o&&n.isPlainObject(i)?i:r||{},t){o||(e[t]=i);for(u in e)f=e[u],u in l.component.item&&(void 0===f&&(f=null),l.component.set(u,f,r)),("select"==u||"clear"==u)&&p.val("clear"==u?"":l.get(u,v.format)).trigger("change");l.render()}return r.muted?l:l.trigger("set",e)},get:function(n,i){if(n=n||"value",null!=a[n])return a[n];if("value"==n)return f.value;if(n in l.component.item){if("string"==typeof i){var r=l.component.get(n);return r?t._.trigger(l.component.formats.toString,l.component,[i,r]):""}return l.component.get(n)}},on:function(t,i){var r,f,e=n.isPlainObject(t),u=e?t:{};if(t){e||(u[t]=i);for(r in u)f=u[r],a.methods[r]=a.methods[r]||[],a.methods[r].push(f)}return l},off:function(){var n,t,i=arguments;for(n=0,namesCount=i.length;namesCount>n;n+=1)t=i[n],t in a.methods&&delete a.methods[t];return l},trigger:function(n,i){var r=a.methods[n];return r&&r.map(function(n){t._.trigger(n,l,[i])}),l}};return new b}function o(n){var t,i="position";return n.currentStyle?t=n.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(n)[i]),"fixed"==t}function u(){var t,i,u,f;return r.height()<=h.height()?0:(t=n('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=t[0].offsetWidth,t.css("overflow","scroll"),u=n('<div style="width:100%" />').appendTo(t),f=u[0].offsetWidth,t.remove(),i-f)}function i(t,i,r){if(n.isPlainObject(i))for(var u in i)f(t,u,i[u]);else f(t,i,r)}function f(n,t,i){n.setAttribute(("role"==t?"":"aria-")+t,i)}function s(t,i){var r,u,f;n.isPlainObject(t)||(t={attribute:i}),i="";for(r in t)u=("role"==r?"":"aria-")+r,f=t[r],i+=null==f?"":u+'="'+t[r]+'"';return i}var h=n(window),e=n(document),r=n(document.documentElement);return t.klasses=function(n){return n=n||"picker",{picker:n,opened:n+"--opened",focused:n+"--focused",input:n+"__input",active:n+"__input--active",holder:n+"__holder",frame:n+"__frame",wrap:n+"__wrap",box:n+"__box"}},t._={group:function(n){for(var i,u="",r=t._.trigger(n.min,n);r<=t._.trigger(n.max,n,[r]);r+=n.i)i=t._.trigger(n.item,n,[r]),u+=t._.node(n.node,i[0],i[1],i[2]);return u},node:function(t,i,r,u){return i?(i=n.isArray(i)?i.join(""):i,r=r?' class="'+r+'"':"",u=u?" "+u:"","<"+t+r+u+">"+i+"</"+t+">"):""},lead:function(n){return(10>n?"0":"")+n},trigger:function(n,t,i){return"function"==typeof n?n.apply(t,i||[]):n},digits:function(n){return/\d/.test(n[1])?2:1},isDate:function(n){return{}.toString.call(n).indexOf("Date")>-1&&this.isInteger(n.getDate())},isInteger:function(n){return{}.toString.call(n).indexOf("Number")>-1&&n%1==0},ariaAttr:s},t.extend=function(i,r){n.fn[i]=function(u,f){var e=this.data(i);return"picker"==u?e:e&&"string"==typeof u?t._.trigger(e[u],e,[f]):this.each(function(){var f=n(this);f.data(i)||new t(this,i,r,u)})},n.fn[i].defaults=r.defaults},t});
/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */
!function(n){"function"==typeof define&&define.amd?define(["picker","jquery"],n):n(Picker,jQuery)}(function(n,t){function r(n,t){var i=this,e=n.$node[0].value,r=n.$node.data("value"),u=r||e,o=r?t.formatSubmit:t.format,f=function(){return"rtl"===getComputedStyle(n.$root[0]).direction};i.settings=t,i.$node=n.$node,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(n){return n[0]===!0?n.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),u?i.set("select",u,{format:o}):i.set("select",null).set("highlight",i.item.now),i.key={40:7,38:-7,39:function(){return f()?-1:1},37:function(){return f()?1:-1},go:function(n){var t=i.item.highlight,r=new Date(t.year,t.month,t.date+n);i.set("highlight",[r.getFullYear(),r.getMonth(),r.getDate()],{interval:n}),this.render()}},n.on("render",function(){n.$root.find("."+t.klass.selectMonth).on("change",function(){var i=this.value;i&&(n.set("highlight",[n.get("view").year,i,n.get("highlight").date]),n.$root.find("."+t.klass.selectMonth).trigger("focus"))}),n.$root.find("."+t.klass.selectYear).on("change",function(){var i=this.value;i&&(n.set("highlight",[i,n.get("view").month,n.get("highlight").date]),n.$root.find("."+t.klass.selectYear).trigger("focus"))})}).on("open",function(){n.$root.find("button, select").attr("disabled",!1)}).on("close",function(){n.$root.find("button, select").attr("disabled",!0)})}var u=7,f=6,i=n._;r.prototype.set=function(n,t,i){var r=this,u=r.item;return null===t?("clear"==n&&(n="select"),u[n]=t,r):(u["enable"==n?"disable":"flip"==n?"enable":n]=r.queue[n].split(" ").map(function(u){return t=r[u](n,t,i)}).pop(),"select"==n?r.set("highlight",u.select,i):"highlight"==n?r.set("view",u.highlight,i):n.match(/^(flip|min|max|disable|enable)$/)&&(u.select&&r.disabled(u.select)&&r.set("select",u.select,i),u.highlight&&r.disabled(u.highlight)&&r.set("highlight",u.highlight,i)),r)},r.prototype.get=function(n){return this.item[n]},r.prototype.create=function(n,r,u){var f,e=this;return r=void 0===r?n:r,r==-1/0||1/0==r?f=r:t.isPlainObject(r)&&i.isInteger(r.pick)?r=r.obj:t.isArray(r)?(r=new Date(r[0],r[1],r[2]),r=i.isDate(r)?r:e.create().obj):r=i.isInteger(r)||i.isDate(r)?e.normalize(new Date(r),u):e.now(n,r,u),{year:f||r.getFullYear(),month:f||r.getMonth(),date:f||r.getDate(),day:f||r.getDay(),obj:f||r,pick:f||r.getTime()}},r.prototype.createRange=function(n,r){var f=this,u=function(n){return n===!0||t.isArray(n)||i.isDate(n)?f.create(n):n};return i.isInteger(n)||(n=u(n)),i.isInteger(r)||(r=u(r)),i.isInteger(n)&&t.isPlainObject(r)?n=[r.year,r.month,r.date+n]:i.isInteger(r)&&t.isPlainObject(n)&&(r=[n.year,n.month,n.date+r]),{from:u(n),to:u(r)}},r.prototype.withinRange=function(n,t){return n=this.createRange(n.from,n.to),t.pick>=n.from.pick&&t.pick<=n.to.pick},r.prototype.overlapRanges=function(n,t){var i=this;return n=i.createRange(n.from,n.to),t=i.createRange(t.from,t.to),i.withinRange(n,t.from)||i.withinRange(n,t.to)||i.withinRange(t,n.from)||i.withinRange(t,n.to)},r.prototype.now=function(n,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},r.prototype.navigate=function(n,i,r){var s,f,u,e,c=t.isArray(i),h=t.isPlainObject(i),o=this.item.view;if(c||h){for(h?(f=i.year,u=i.month,e=i.date):(f=+i[0],u=+i[1],e=+i[2]),r&&r.nav&&o&&o.month!==u&&(f=o.year,u=o.month),s=new Date(f,u+(r&&r.nav?r.nav:0),1),f=s.getFullYear(),u=s.getMonth();new Date(f,u,e).getMonth()!==u;)e-=1;i=[f,u,e]}return i},r.prototype.normalize=function(n){return n.setHours(0,0,0,0),n},r.prototype.measure=function(n,t){var r=this;return t?i.isInteger(t)&&(t=r.now(n,t,{rel:t})):t="min"==n?-1/0:1/0,t},r.prototype.viewset=function(n,t){return this.create([t.year,t.month,1])},r.prototype.validate=function(n,r,u){var c,l,v,y,f=this,a=r,e=u&&u.interval?u.interval:1,h=-1===f.item.enable,o=f.item.min,s=f.item.max,p=h&&f.item.disable.filter(function(n){if(t.isArray(n)){var u=f.create(n).pick;u<r.pick?c=!0:u>r.pick&&(l=!0)}return i.isInteger(n)}).length;if((!u||!u.nav)&&(!h&&f.disabled(r)||h&&f.disabled(r)&&(p||c||l)||!h&&(r.pick<=o.pick||r.pick>=s.pick)))for(h&&!p&&(!l&&e>0||!c&&0>e)&&(e*=-1);f.disabled(r)&&(Math.abs(e)>1&&(r.month<a.month||r.month>a.month)&&(r=a,e=e>0?1:-1),r.pick<=o.pick?(v=!0,e=1,r=f.create([o.year,o.month,o.date+(r.pick===o.pick?0:-1)])):r.pick>=s.pick&&(y=!0,e=-1,r=f.create([s.year,s.month,s.date+(r.pick===s.pick?0:1)])),!v||!y);)r=f.create([r.year,r.month,r.date+e]);return r},r.prototype.disabled=function(n){var r=this,u=r.item.disable.filter(function(u){return i.isInteger(u)?n.day===(r.settings.firstDay?u:u-1)%7:t.isArray(u)||i.isDate(u)?n.pick===r.create(u).pick:t.isPlainObject(u)?r.withinRange(u,n):void 0});return u=u.length&&!u.filter(function(n){return t.isArray(n)&&"inverted"==n[3]||t.isPlainObject(n)&&n.inverted}).length,-1===r.item.enable?!u:u||n.pick<r.item.min.pick||n.pick>r.item.max.pick},r.prototype.parse=function(n,t,r){var f=this,u={};return t&&"string"==typeof t?(r&&r.format||(r=r||{},r.format=f.settings.format),f.formats.toArray(r.format).map(function(n){var r=f.formats[n],e=r?i.trigger(r,f,[t,u]):n.replace(/^!/,"").length;r&&(u[n]=t.substr(0,e)),t=t.substr(e)}),[u.yyyy||u.yy,+(u.mm||u.m)-1,u.dd||u.d]):t},r.prototype.formats=function(){function n(n,t,i){var r=n.match(/\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(r)+1),r.length}function t(n){return n.match(/\w+/)[0].length}return{d:function(n,t){return n?i.digits(n):t.date},dd:function(n,t){return n?2:i.lead(t.date)},ddd:function(n,i){return n?t(n):this.settings.weekdaysShort[i.day]},dddd:function(n,i){return n?t(n):this.settings.weekdaysFull[i.day]},m:function(n,t){return n?i.digits(n):t.month+1},mm:function(n,t){return n?2:i.lead(t.month+1)},mmm:function(t,i){var r=this.settings.monthsShort;return t?n(t,r,i):r[i.month]},mmmm:function(t,i){var r=this.settings.monthsFull;return t?n(t,r,i):r[i.month]},yy:function(n,t){return n?2:(""+t.year).slice(2)},yyyy:function(n,t){return n?4:t.year},toArray:function(n){return n.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(n,t){var r=this;return r.formats.toArray(n).map(function(n){return i.trigger(r.formats[n],r,[0,t])||n.replace(/^!/,"")}).join("")}}}(),r.prototype.isDateExact=function(n,r){var u=this;return i.isInteger(n)&&i.isInteger(r)||"boolean"==typeof n&&"boolean"==typeof r?n===r:(i.isDate(n)||t.isArray(n))&&(i.isDate(r)||t.isArray(r))?u.create(n).pick===u.create(r).pick:t.isPlainObject(n)&&t.isPlainObject(r)?u.isDateExact(n.from,r.from)&&u.isDateExact(n.to,r.to):!1},r.prototype.isDateOverlap=function(n,r){var u=this,f=u.settings.firstDay?1:0;return i.isInteger(n)&&(i.isDate(r)||t.isArray(r))?(n=n%7+f,n===u.create(r).day+1):i.isInteger(r)&&(i.isDate(n)||t.isArray(n))?(r=r%7+f,r===u.create(n).day+1):t.isPlainObject(n)&&t.isPlainObject(r)?u.overlapRanges(n,r):!1},r.prototype.flipEnable=function(n){var t=this.item;t.enable=n||(-1==t.enable?1:-1)},r.prototype.deactivate=function(n,r){var f=this,u=f.item.disable.slice(0);return"flip"==r?f.flipEnable():r===!1?(f.flipEnable(1),u=[]):r===!0?(f.flipEnable(-1),u=[]):r.map(function(n){for(var e,r=0;r<u.length;r+=1)if(f.isDateExact(n,u[r])){e=!0;break}e||(i.isInteger(n)||i.isDate(n)||t.isArray(n)||t.isPlainObject(n)&&n.from&&n.to)&&u.push(n)}),u},r.prototype.activate=function(n,r){var f=this,u=f.item.disable,e=u.length;return"flip"==r?f.flipEnable():r===!0?(f.flipEnable(1),u=[]):r===!1?(f.flipEnable(-1),u=[]):r.map(function(n){for(var o,s,h,r=0;e>r;r+=1){if(s=u[r],f.isDateExact(s,n)){o=u[r]=null,h=!0;break}if(f.isDateOverlap(s,n)){t.isPlainObject(n)?(n.inverted=!0,o=n):t.isArray(n)?(o=n,o[3]||o.push("inverted")):i.isDate(n)&&(o=[n.getFullYear(),n.getMonth(),n.getDate(),"inverted"]);break}}if(o)for(r=0;e>r;r+=1)if(f.isDateExact(u[r],n)){u[r]=null;break}if(h)for(r=0;e>r;r+=1)if(f.isDateOverlap(u[r],n)){u[r]=null;break}o&&u.push(o)}),u.filter(function(n){return null!=n})},r.prototype.nodes=function(n){var r=this,t=r.settings,o=r.item,c=o.now,l=o.select,a=o.highlight,e=o.view,w=o.disable,s=o.min,h=o.max,b=function(n,r){return t.firstDay&&(n.push(n.shift()),r.push(r.shift())),i.node("thead",i.node("tr",i.group({min:0,max:u-1,i:1,node:"th",item:function(i){return[n[i],t.klass.weekdays,'scope=col title="'+r[i]+'"']}})))}((t.showWeekdaysFull?t.weekdaysFull:t.weekdaysShort).slice(0),t.weekdaysFull.slice(0)),v=function(n){return i.node("div"," ",t.klass["nav"+(n?"Next":"Prev")]+(n&&e.year>=h.year&&e.month>=h.month||!n&&e.year<=s.year&&e.month<=s.month?" "+t.klass.navDisabled:""),"data-nav="+(n||-1)+" "+i.ariaAttr({role:"button",controls:r.$node[0].id+"_table"})+' title="'+(n?t.labelMonthNext:t.labelMonthPrev)+'"')},y=function(){var u=t.showMonthsShort?t.monthsShort:t.monthsFull;return t.selectMonths?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(n){return[u[n],0,"value="+n+(e.month==n?" selected":"")+(e.year==s.year&&n<s.month||e.year==h.year&&n>h.month?" disabled":"")]}}),t.klass.selectMonth,(n?"":"disabled")+" "+i.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+t.labelMonthSelect+'"'):i.node("div",u[e.month],t.klass.month)},p=function(){var o=e.year,l=t.selectYears===!0?5:~~(t.selectYears/2),v,y;if(l){var c=s.year,a=h.year,u=o-l,f=o+l;return(c>u&&(f+=c-u,u=c),f>a)&&(v=u-c,y=f-a,u-=v>y?y:v,f=a),i.node("select",i.group({min:u,max:f,i:1,node:"option",item:function(n){return[n,0,"value="+n+(o==n?" selected":"")]}}),t.klass.selectYear,(n?"":"disabled")+" "+i.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+t.labelYearSelect+'"')}return i.node("div",o,t.klass.year)};return i.node("div",(t.selectYears?p()+y():y()+p())+v()+v(1),t.klass.header)+i.node("table",b+i.node("tbody",i.group({min:0,max:f-1,i:1,node:"tr",item:function(n){var f=t.firstDay&&0===r.create([e.year,e.month,1]).day?-7:0;return[i.group({min:u*n-e.day+f+1,max:function(){return this.min+u-1},i:1,node:"td",item:function(n){n=r.create([e.year,e.month,n+(t.firstDay?1:0)]);var u=l&&l.pick==n.pick,f=a&&a.pick==n.pick,o=w&&r.disabled(n)||n.pick<s.pick||n.pick>h.pick;return[i.node("div",n.date,function(i){return i.push(e.month==n.month?t.klass.infocus:t.klass.outfocus),c.pick==n.pick&&i.push(t.klass.now),u&&i.push(t.klass.selected),f&&i.push(t.klass.highlighted),o&&i.push(t.klass.disabled),i.join(" ")}([t.klass.day]),"data-pick="+n.pick+" "+i.ariaAttr({role:"gridcell",selected:u&&r.$node.val()===i.trigger(r.formats.toString,r,[t.format,n])?!0:null,activedescendant:f?!0:null,disabled:o?!0:null})),"",i.ariaAttr({role:"presentation"})]}})]}})),t.klass.table,'id="'+r.$node[0].id+'_table" '+i.ariaAttr({role:"grid",controls:r.$node[0].id,readonly:!0}))+i.node("div",i.node("button",t.today,t.klass.buttonToday,"type=button data-pick="+c.pick+(n?"":" disabled")+" "+i.ariaAttr({controls:r.$node[0].id}))+i.node("button",t.clear,t.klass.buttonClear,"type=button data-clear=1"+(n?"":" disabled")+" "+i.ariaAttr({controls:r.$node[0].id})),t.klass.footer)},r.defaults=function(n){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:n+"table",header:n+"header",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today"}}}(n.klasses().picker+"__"),n.extend("pickadate",r)});
/*!
 * Time picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/time.htm
 */
!function(n){"function"==typeof define&&define.amd?define(["picker","jquery"],n):n(Picker,jQuery)}(function(n,t){function r(n,t){var i=this,r=n.$node[0].value,u=n.$node.data("value"),f=u||r,e=u?t.formatSubmit:t.format;i.settings=t,i.$node=n.$node,i.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.interval=t.interval||30,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(n){return n[0]===!0?n.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),f?i.set("select",f,{format:e,fromValue:!!r}):i.set("select",null).set("highlight",i.item.now),i.key={40:1,38:-1,39:1,37:-1,go:function(n){i.set("highlight",i.item.highlight.pick+n*i.item.interval,{interval:n*i.item.interval}),this.render()}},n.on("render",function(){var r=n.$root.children(),i=r.find("."+t.klass.viewset);i.length&&(r[0].scrollTop=~~i.position().top-2*i[0].clientHeight)}).on("open",function(){n.$root.find("button").attr("disabled",!1)}).on("close",function(){n.$root.find("button").attr("disabled",!0)})}var e=24,u=60,o=12,f=e*u,i=n._;r.prototype.set=function(n,t,i){var r=this,u=r.item;return null===t?("clear"==n&&(n="select"),u[n]=t,r):(u["enable"==n?"disable":"flip"==n?"enable":n]=r.queue[n].split(" ").map(function(u){return t=r[u](n,t,i)}).pop(),"select"==n?r.set("highlight",u.select,i):"highlight"==n?r.set("view",u.highlight,i):"interval"==n?r.set("min",u.min,i).set("max",u.max,i):n.match(/^(flip|min|max|disable|enable)$/)&&("min"==n&&r.set("max",u.max,i),u.select&&r.disabled(u.select)&&r.set("select",u.select,i),u.highlight&&r.disabled(u.highlight)&&r.set("highlight",u.highlight,i)),r)},r.prototype.get=function(n){return this.item[n]},r.prototype.create=function(n,r,o){var s=this;return r=void 0===r?n:r,i.isDate(r)&&(r=[r.getHours(),r.getMinutes()]),t.isPlainObject(r)&&i.isInteger(r.pick)?r=r.pick:t.isArray(r)?r=+r[0]*u+ +r[1]:i.isInteger(r)||(r=s.now(n,r,o)),"max"==n&&r<s.item.min.pick&&(r+=f),"min"!=n&&"max"!=n&&(r-s.item.min.pick)%s.item.interval!=0&&(r+=s.item.interval),r=s.normalize(n,r,o),{hour:~~(e+r/u)%e,mins:(u+r%u)%u,time:(f+r)%f,pick:r}},r.prototype.createRange=function(n,r){var f=this,u=function(n){return n===!0||t.isArray(n)||i.isDate(n)?f.create(n):n};return i.isInteger(n)||(n=u(n)),i.isInteger(r)||(r=u(r)),i.isInteger(n)&&t.isPlainObject(r)?n=[r.hour,r.mins+n*f.settings.interval]:i.isInteger(r)&&t.isPlainObject(n)&&(r=[n.hour,n.mins+r*f.settings.interval]),{from:u(n),to:u(r)}},r.prototype.withinRange=function(n,t){return n=this.createRange(n.from,n.to),t.pick>=n.from.pick&&t.pick<=n.to.pick},r.prototype.overlapRanges=function(n,t){var i=this;return n=i.createRange(n.from,n.to),t=i.createRange(t.from,t.to),i.withinRange(n,t.from)||i.withinRange(n,t.to)||i.withinRange(t,n.from)||i.withinRange(t,n.to)},r.prototype.now=function(n,t){var e,f=this.item.interval,o=new Date,r=o.getHours()*u+o.getMinutes(),s=i.isInteger(t);return r-=r%f,e=0>t&&-f>=f*t+r,r+="min"==n&&e?0:f,s&&(r+=f*(e&&"max"!=n?t+1:t)),r},r.prototype.normalize=function(n,t){var i=this.item.interval,r=this.item.min&&this.item.min.pick||0;return t-="min"==n?0:(t-r)%i},r.prototype.measure=function(n,r,f){var o=this;return r?r===!0||i.isInteger(r)?r=o.now(n,r,f):t.isPlainObject(r)&&i.isInteger(r.pick)&&(r=o.normalize(n,r.pick,f)):r="min"==n?[0,0]:[e-1,u-1],r},r.prototype.validate=function(n,t,i){var r=this,u=i&&i.interval?i.interval:r.item.interval;return r.disabled(t)&&(t=r.shift(t,u)),t=r.scope(t),r.disabled(t)&&(t=r.shift(t,-1*u)),t},r.prototype.disabled=function(n){var r=this,u=r.item.disable.filter(function(u){return i.isInteger(u)?n.hour==u:t.isArray(u)||i.isDate(u)?n.pick==r.create(u).pick:t.isPlainObject(u)?r.withinRange(u,n):void 0});return u=u.length&&!u.filter(function(n){return t.isArray(n)&&"inverted"==n[2]||t.isPlainObject(n)&&n.inverted}).length,-1===r.item.enable?!u:u||n.pick<r.item.min.pick||n.pick>r.item.max.pick},r.prototype.shift=function(n,t){var i=this,r=i.item.min.pick,u=i.item.max.pick;for(t=t||i.item.interval;i.disabled(n)&&(n=i.create(n.pick+=t),!(n.pick<=r||n.pick>=u)););return n},r.prototype.scope=function(n){var t=this.item.min.pick,i=this.item.max.pick;return this.create(n.pick>i?i:n.pick<t?t:n)},r.prototype.parse=function(n,t,r){var s,c,l,f,o,h=this,e={};if(!t||"string"!=typeof t)return t;r&&r.format||(r=r||{},r.format=h.settings.format),h.formats.toArray(r.format).map(function(n){var r,u=h.formats[n],f=u?i.trigger(u,h,[t,e]):n.replace(/^!/,"").length;u&&(r=t.substr(0,f),e[n]=r.match(/^\d+$/)?+r:r),t=t.substr(f)});for(f in e)o=e[f],i.isInteger(o)?f.match(/^(h|hh)$/i)?(s=o,("h"==f||"hh"==f)&&(s%=12)):"i"==f&&(c=o):f.match(/^a$/i)&&o.match(/^p/i)&&("h"in e||"hh"in e)&&(l=!0);return(l?s+12:s)*u+c},r.prototype.formats={h:function(n,t){return n?i.digits(n):t.hour%o||o},hh:function(n,t){return n?2:i.lead(t.hour%o||o)},H:function(n,t){return n?i.digits(n):""+t.hour%24},HH:function(n,t){return n?i.digits(n):i.lead(t.hour%24)},i:function(n,t){return n?2:i.lead(t.mins)},a:function(n,t){return n?4:f/2>t.time%f?"a.m.":"p.m."},A:function(n,t){return n?2:f/2>t.time%f?"AM":"PM"},toArray:function(n){return n.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(n,t){var r=this;return r.formats.toArray(n).map(function(n){return i.trigger(r.formats[n],r,[0,t])||n.replace(/^!/,"")}).join("")}},r.prototype.isTimeExact=function(n,r){var u=this;return i.isInteger(n)&&i.isInteger(r)||"boolean"==typeof n&&"boolean"==typeof r?n===r:(i.isDate(n)||t.isArray(n))&&(i.isDate(r)||t.isArray(r))?u.create(n).pick===u.create(r).pick:t.isPlainObject(n)&&t.isPlainObject(r)?u.isTimeExact(n.from,r.from)&&u.isTimeExact(n.to,r.to):!1},r.prototype.isTimeOverlap=function(n,r){var u=this;return i.isInteger(n)&&(i.isDate(r)||t.isArray(r))?n===u.create(r).hour:i.isInteger(r)&&(i.isDate(n)||t.isArray(n))?r===u.create(n).hour:t.isPlainObject(n)&&t.isPlainObject(r)?u.overlapRanges(n,r):!1},r.prototype.flipEnable=function(n){var t=this.item;t.enable=n||(-1==t.enable?1:-1)},r.prototype.deactivate=function(n,r){var f=this,u=f.item.disable.slice(0);return"flip"==r?f.flipEnable():r===!1?(f.flipEnable(1),u=[]):r===!0?(f.flipEnable(-1),u=[]):r.map(function(n){for(var e,r=0;r<u.length;r+=1)if(f.isTimeExact(n,u[r])){e=!0;break}e||(i.isInteger(n)||i.isDate(n)||t.isArray(n)||t.isPlainObject(n)&&n.from&&n.to)&&u.push(n)}),u},r.prototype.activate=function(n,r){var f=this,u=f.item.disable,e=u.length;return"flip"==r?f.flipEnable():r===!0?(f.flipEnable(1),u=[]):r===!1?(f.flipEnable(-1),u=[]):r.map(function(n){for(var o,s,h,r=0;e>r;r+=1){if(s=u[r],f.isTimeExact(s,n)){o=u[r]=null,h=!0;break}if(f.isTimeOverlap(s,n)){t.isPlainObject(n)?(n.inverted=!0,o=n):t.isArray(n)?(o=n,o[2]||o.push("inverted")):i.isDate(n)&&(o=[n.getFullYear(),n.getMonth(),n.getDate(),"inverted"]);break}}if(o)for(r=0;e>r;r+=1)if(f.isTimeExact(u[r],n)){u[r]=null;break}if(h)for(r=0;e>r;r+=1)if(f.isTimeOverlap(u[r],n)){u[r]=null;break}o&&u.push(o)}),u.filter(function(n){return null!=n})},r.prototype.i=function(n,t){return i.isInteger(t)&&t>0?t:this.item.interval},r.prototype.nodes=function(n){var t=this,r=t.settings,u=t.item.select,f=t.item.highlight,e=t.item.view,o=t.item.disable;return i.node("ul",i.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(n){n=t.create(n);var s=n.pick,h=u&&u.pick==s,c=f&&f.pick==s,l=o&&t.disabled(n);return[i.trigger(t.formats.toString,t,[i.trigger(r.formatLabel,t,[n])||r.format,n]),function(n){return h&&n.push(r.klass.selected),c&&n.push(r.klass.highlighted),e&&e.pick==s&&n.push(r.klass.viewset),l&&n.push(r.klass.disabled),n.join(" ")}([r.klass.listItem]),"data-pick="+n.pick+" "+i.ariaAttr({role:"option",selected:h&&t.$node.val()===i.trigger(t.formats.toString,t,[r.format,n])?!0:null,activedescendant:c?!0:null,disabled:l?!0:null})]}})+i.node("li",i.node("button",r.clear,r.klass.buttonClear,"type=button data-clear=1"+(n?"":" disabled")+" "+i.ariaAttr({controls:t.$node[0].id})),"",i.ariaAttr({role:"presentation"})),r.klass.list,i.ariaAttr({role:"listbox",controls:t.$node[0].id}))},r.defaults=function(n){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:n+" "+n+"--time",holder:n+"__holder",list:n+"__list",listItem:n+"__list-item",disabled:n+"__list-item--disabled",selected:n+"__list-item--selected",highlighted:n+"__list-item--highlighted",viewset:n+"__list-item--viewset",now:n+"__list-item--now",buttonClear:n+"__button--clear"}}}(n.klasses().picker),n.extend("pickatime",r)});
function MSDList(n,t,i){var r=this;this._container=n,this._items=[],this._selectAllCheckboxLabel="All",this._width=110,this._height=24,this._textAlign="left",this._buttonTextAlign="center",this._rendered=!1,this._listVisible=!1,this._emptyMessage=jsTranslate("multiSelect_select"),this._allSelectedMessage=jsTranslate("multiSelect_allSelected"),this._emptyFilterMessage="[Type here to filter list]",this._filterVisible=!1,this._showSelectAllOption=!1,this._showSelectedCount=!0,this._animateListVisibility=!1,this._addNoneSelectedClass=!1,this._listID=t?t:"",i&&(this._useSingleArrayForSelectedItems=i.useSingleArrayForSelectedItems),this._containerNode=document.createElement("div"),this._selectedValuesNode=document.createElement("input"),this._selectedValuesNode.setAttribute("type","hidden"),this._inputSectionNode=document.createElement("div"),this._buttonSectionNode=document.createElement("div"),this._labelNode=document.createElement("div"),this._dropDownButton=document.createElement("input"),this._dropDownButton.setAttribute("type","button"),this._listNode=document.createElement("div"),this._listTableNode=document.createElement("table"),this._listTableHeaderNode=document.createElement("thead"),this._listTableBodyNode=document.createElement("tbody"),this._listTableHeaderRowNode=document.createElement("tr"),this._listTableHeaderRowCheckboxCellNode=document.createElement("td"),this._listTableHeaderRowLabelCellNode=document.createElement("td"),this._listTableHeaderFilterRowNode=document.createElement("tr"),this._listTableHeaderFilterCellNode=document.createElement("td"),this._filterBoxNode=document.createElement("input"),this._filterBoxNode.setAttribute("type","text"),this._selectAllCheckBoxNode=document.createElement("input"),this._selectAllCheckBoxNode.setAttribute("type","checkbox"),this._containerNode.appendChild(this._selectedValuesNode),this._containerNode.appendChild(this._inputSectionNode),this._containerNode.appendChild(this._buttonSectionNode),this._containerNode.appendChild(this._listNode),this._inputSectionNode.appendChild(this._labelNode),this._buttonSectionNode.appendChild(this._dropDownButton),this._listNode.appendChild(this._listTableNode),this._listTableNode.appendChild(this._listTableHeaderNode),this._listTableNode.appendChild(this._listTableBodyNode),this._listTableHeaderNode.appendChild(this._listTableHeaderFilterRowNode),this._listTableHeaderFilterRowNode.appendChild(this._listTableHeaderFilterCellNode),this._listTableHeaderFilterCellNode.appendChild(this._filterBoxNode),this._listTableHeaderNode.appendChild(this._listTableHeaderRowNode),this._listTableHeaderRowNode.appendChild(this._listTableHeaderRowCheckboxCellNode),this._listTableHeaderRowNode.appendChild(this._listTableHeaderRowLabelCellNode),this._showSelectAllOption&&this._listTableHeaderRowCheckboxCellNode.appendChild(this._selectAllCheckBoxNode),this._containerNode.className="MSDList fancySelect",this._containerNode.id="MSDList"+this._listID,this._inputSectionNode.className="MSDList_InputSection",this._buttonSectionNode.className="MSDList_ButtonSection fancyArrow",this._labelNode.className="MSDList_Label fancyLabel fancyLabelLeft",this._dropDownButton.className="MSDList_DropDownButton",this._listNode.className="MSDList_List",this._listTableNode.className="MSDList_ListTable",this._listTableHeaderNode.className="MSDList_ListTableHeader",this._listTableBodyNode.className="MSDList_ListTableBody",this._listTableHeaderRowNode.className="MSDList_ListTableHeaderRow MSDList_ListItemRow",this._listTableHeaderRowCheckboxCellNode.className="MSDList_ListTableHeaderRowCheckBoxCell MSDList_ListCheckBoxCell",this._listTableHeaderRowLabelCellNode.className="MSDList_ListTableHeaderRowLabelCell MSDList_ListLabelCell",this._listTableHeaderFilterRowNode.className="MSDList_ListTableHeaderFilterRow",this._listTableHeaderFilterCellNode.className="MSDList_ListTableHeaderFilterCell",this._filterBoxNode.className="MSDList_ListFilterBox_Empty",this._selectAllCheckBoxNode.className="MSDList_ListCheckBox",this._selectedValuesNode.setAttribute("name",this._container),this._selectedValuesNode.setAttribute("id",this._container),$(this._selectedValuesNode).data("msd",this),this._dropDownButton.setAttribute("value",""),this._listNode.style.display="none",this._listTableNode.setAttribute("cellspacing","0"),this._listTableNode.setAttribute("cellpadding","0"),this._listTableHeaderFilterCellNode.setAttribute("colspan","2"),this._filterBoxNode.setAttribute("value",this._emptyFilterMessage),this._labelNode.innerHTML=this._emptyMessage,this._showSelectAllOption&&(this._listTableHeaderRowLabelCellNode.innerHTML=this.getSelectAllLabel()),this._filterVisible||(this._listTableHeaderFilterRowNode.style.display="none"),String.prototype.toInt=function(){var n=parseInt(this);return isNaN(n)?0:n},this._dropDownButton.onclick=function(){r._listVisible?r.hideList():r.showList()},this._labelNode.onclick=function(){r._listVisible?r.hideList():r.showList()},this._selectAllCheckBoxNode.onclick=function(){r._selectAllCheckBoxNode.checked?r.selectAllItems():r.unselectAllItems()},this._listTableHeaderRowLabelCellNode.onclick=function(){this.parentNode.firstChild.firstChild.checked=!this.parentNode.firstChild.firstChild.checked,r._selectAllCheckBoxNode.onclick()},this._filterBoxNode.onfocus=function(){r._filterBoxNode.value==r._emptyFilterMessage&&r.setFilterValue(""),r._filterBoxNode.className="MSDList_ListFilterBox"},this._filterBoxNode.onblur=function(){r._filterBoxNode.value==""&&(r.setFilterValue(r._emptyFilterMessage),r._filterBoxNode.className="MSDList_ListFilterBox_Empty")},this._filterBoxNode.onkeypress=function(n){n.keyCode==13&&r.filterList()},this._filterBoxNode.onchange=function(){r.filterList()}}var theseFunctions={cStyle:function(n){var t,r={},f,u,i;if(window.getComputedStyle){for(f=function(n,t){return t.toUpperCase()},t=window.getComputedStyle(n),u=0;u<t.length;u++){var i=t[u],e=i.replace(/\-([a-z])/g,f),o=t.getPropertyValue(i);r[e]=o}return r}if(n.currentStyle){t=n.currentStyle;for(i in t)r[i]=t[i];return r}return $(n).css()},getWidth:function(n){var t=theseFunctions.cStyle(n);return isNaN(t.width.toInt())?this.clientWidth:t.width.toInt()},getHeight:function(n){var t=this.cStyle(n);return isNaN(t.height.toInt())?this.clientHeight:t.height.toInt()},getExtraWidth:function(n){var t=this.cStyle(n);return t.paddingLeft.toInt()+t.paddingRight.toInt()+t.marginLeft.toInt()+t.marginRight.toInt()+t.borderLeftWidth.toInt()+t.borderRightWidth.toInt()},getExtraHeight:function(n){var t=this.cStyle(n);return t.paddingTop.toInt()+t.paddingBottom.toInt()+t.marginTop.toInt()+t.marginBottom.toInt()+t.borderTopWidth.toInt()+t.borderBottomWidth.toInt()},setWidth:function(n,t){n.style.width=t+"px"},setHeight:function(n,t){n.style.height=t+"px"},setTextAlign:function(n,t){n.style.textAlign=t},setButtonTextAlign:function(n,t){n.style.textAlign=t},offsetY:function(n){for(var t=n.offsetTop;n=n.offsetParent;);return t},offsetX:function(n){for(var t=n.offsetLeft;n=n.offsetParent;);return t}},refreshThisMd5;MSDList.prototype.setContainer=function(n){this._container=n},MSDList.prototype.getContainer=function(){return this._container},MSDList.prototype.setSelectAllLabel=function(n){this._selectAllCheckboxLabel=n},MSDList.prototype.getSelectAllLabel=function(){return this._selectAllCheckboxLabel},MSDList.prototype.setEmptyMessage=function(n){this._emptyMessage=n},MSDList.prototype.getEmptyMessage=function(){return this._emptyMessage},MSDList.prototype.setDimension=function(n,t){this._width=n,this._height=t,this._rendered&&this._layout()},MSDList.prototype.getDimension=function(){return{width:this._width,height:this._height}},MSDList.prototype.setWidth=function(n){this._width=n,this._rendered&&this._layout()},MSDList.prototype.setTextAlign=function(n){this._textAlign=n,this._rendered&&this._layout()},MSDList.prototype.setButtonTextAlign=function(n){this._buttonTextAlign=n,this._rendered&&this._layout()},MSDList.prototype.getWidth=function(){return this._width},MSDList.prototype.setHeight=function(n){this._height=n,this._rendered&&this._layout()},MSDList.prototype.getHeight=function(){return this._height},MSDList.prototype.isRendered=function(){return this._rendered},MSDList.prototype.showList=function(){this._rendered==!0&&(this._listVisible=!0,this._animateListVisibility?$(this._listNode).slideDown(300):this._listNode.style.display="",MSDList._counter++,this._layoutList(),this.onShowSetFieldsetStyle&&$(this._containerNode).closest("fieldset").css("z-index","2"))},MSDList.prototype.hideList=function(){this._rendered==!0&&(this._listVisible=!1,this._animateListVisibility?$(this._listNode).slideUp(300):this._listNode.style.display="none",this.onHideRevertFieldsetStyle&&$(this._containerNode).closest("fieldset").attr("style",""))},MSDList.prototype.setEmptyFilterMessage=function(n){this._emptyFilterMessage=n},MSDList.prototype.getEmptyFilterMessage=function(){return this._emptyFilterMessage},MSDList.prototype.setFilterVisible=function(n){this._filterVisible=n,this._filterVisible?(this._listTableHeaderFilterRowNode.style.display="",this._layoutList()):(this._listTableHeaderFilterRowNode.style.display="none",this.setFilterValue(this._emptyFilterMessage),this.filterList())},MSDList.prototype.isFilterVisible=function(){return this._filterVisible},MSDList.prototype.setFilterValue=function(n){this._filterBoxNode.value=n,this.filterList()},MSDList.prototype.getFilterValue=function(){return this._filterBoxNode.value==this._emptyFilterMessage?"":this._filterBoxNode.value},MSDList.prototype.showSelectedCount=function(n){this._showSelectedCount=n,this._rendered&&this._layout()},MSDList.prototype.animateListVisibility=function(n){this._animateListVisibility=n},MSDList.prototype.addNoneSelectedClass=function(n){this._addNoneSelectedClass=n},MSDList.prototype.addItem=function(n,t){var i,r;return this.hasItem(n)?!1:(i={id:n,label:t,skey:t.toLowerCase(),tr:document.createElement("tr"),td1:document.createElement("td"),td2:document.createElement("td"),cbox:document.createElement("input")},i.cbox.setAttribute("type","checkbox"),i.cbox.setAttribute("name",this._container+"[]"),i.cbox.setAttribute("value",n),i.cbox.className="MSDList_ListCheckBox",i.tr.className="MSDList_ListItemRow MSDList_ListItemRow"+n,i.td1.className="MSDList_ListCheckBoxCell",i.td2.className="MSDList_ListLabelCell",i.td2.innerHTML=t,i.td1.appendChild(i.cbox),i.tr.appendChild(i.td1),i.tr.appendChild(i.td2),this._items.push(i),this._listTableBodyNode.appendChild(i.tr),this._updateSelection(),r=this,i.cbox.onclick=function(){r._updateSelection()},i.td2.onclick=function(){this.parentNode.firstChild.firstChild.checked=!this.parentNode.firstChild.firstChild.checked,r._updateSelection()},!0)},MSDList.prototype.removeItem=function(n){for(var i=-1,t=0;t<this._items.length;t++)this._items[t].id==n&&(i=t,this._listTableBodyNode.removeChild(this._items[t].tr));i>-1&&this._items.splice(i,1),this._updateSelection()},MSDList.prototype.removeAllItems=function(){for(var n=0;n<this._items.length;n++)this._listTableBodyNode.removeChild(this._items[n].tr);this._items=[],this._updateSelection()},MSDList.prototype.hasItem=function(n){for(var t=0;t<this._items.length;t++)if(this._items[t].id==n)return!0;return!1},MSDList.prototype.selectItem=function(n){for(var t=0;t<this._items.length;t++)this._items[t].id==n&&(this._items[t].cbox.checked=!0);this._updateSelection()},MSDList.prototype.unselectItem=function(n){for(var t=0;t<this._items.length;t++)this._items[t].id==n&&(this._items[t].cbox.checked=!1);this._updateSelection()},MSDList.prototype.unselectAllItems=function(){for(var n=0;n<this._items.length;n++)this._items[n].cbox.checked=!1;this._updateSelection()},MSDList.prototype.selectAllItems=function(){for(var n=0;n<this._items.length;n++)this._items[n].cbox.checked=!0;this._updateSelection()},MSDList.prototype.getSelectedItemsArray=function(){return this._useSingleArrayForSelectedItems?this.selectedItems?this.selectedItems.length=0:this.selectedItems=[]:this.selectedItems=[],this.selectedItems},MSDList.prototype.getSelectedItems=function(){for(var t=this.getSelectedItemsArray(),n=0;n<this._items.length;n++)this._items[n].cbox.checked&&t.push({id:this._items[n].id,label:this._items[n].label});return t},MSDList.prototype.render=function(){var n=document.getElementById(this._container),t;if(n){if(n.parentNode.insertBefore(this._containerNode,n),n.nodeName=="SELECT")for(t=0;t<n.children.length;t++)this.addItem(n.children[t].value,n.children[t].innerText||n.children[t].textContent),n.children[t].selected&&this.selectItem(n.children[t].value);n.parentNode.removeChild(n),this._layout(),this._updateSelection(),this._rendered=!0}else alert("The container element having ID: "+this._container+" not found in dom.")},MSDList.prototype.DoLayout=function(){this._layout()},MSDList.prototype._layout=function(){theseFunctions.setWidth(this._containerNode,this._width),theseFunctions.setHeight(this._containerNode,this._height),theseFunctions.setButtonTextAlign(this._containerNode,this._buttonTextAlign),theseFunctions.setHeight(this._buttonSectionNode,this._height),theseFunctions.setHeight(this._inputSectionNode,this._height-theseFunctions.getExtraHeight(this._inputSectionNode)),theseFunctions.setWidth(this._inputSectionNode,this._width-theseFunctions.getWidth(this._buttonSectionNode)-theseFunctions.getExtraWidth(this._buttonSectionNode)-theseFunctions.getExtraWidth(this._inputSectionNode)-theseFunctions.getExtraWidth(this._containerNode)),theseFunctions.setWidth(this._dropDownButton,theseFunctions.getWidth(this._buttonSectionNode)-theseFunctions.getExtraWidth(this._dropDownButton)),theseFunctions.setHeight(this._dropDownButton,theseFunctions.getHeight(this._buttonSectionNode)-theseFunctions.getExtraHeight(this._dropDownButton)),theseFunctions.setWidth(this._labelNode,theseFunctions.getWidth(this._inputSectionNode)-theseFunctions.getExtraWidth(this._labelNode)),theseFunctions.setHeight(this._labelNode,theseFunctions.getHeight(this._inputSectionNode)-theseFunctions.getExtraHeight(this._labelNode)),this._labelNode.style.lineHeight=theseFunctions.getHeight(this._labelNode)+"px",theseFunctions.setTextAlign(this._labelNode,this._textAlign),this._listVisible&&this._layoutList()},MSDList.prototype._layoutList=function(){this._listNode.style.top=theseFunctions.getHeight(this._containerNode)+theseFunctions.getExtraHeight(this._containerNode)+theseFunctions.offsetY(this._containerNode)+"px",this._listNode.style.left=theseFunctions.offsetX(this._containerNode)+"px",theseFunctions.setTextAlign(this._listNode,this._textAlign),theseFunctions.setWidth(this._listNode,this._width),this._filterVisible&&(theseFunctions.setWidth(this._filterBoxNode,theseFunctions.getWidth(this._listTableHeaderFilterCellNode)-theseFunctions.getExtraWidth(this._filterBoxNode)),theseFunctions.setHeight(this._filterBoxNode,theseFunctions.getHeight(this._listTableHeaderFilterCellNode)-theseFunctions.getExtraHeight(this._filterBoxNode))),this._listNode.style.zIndex=1e3+MSDList._counter},MSDList.prototype._updateSelection=function(){var i=this.getSelectedItems(),t=i.length,n;if(this._addNoneSelectedClass&&$(this._containerNode).removeClass("noneSelected"),t==this._items.length&&t>0?(this._showSelectAllOption&&(this._selectAllCheckBoxNode.checked=!0),this.showSelectedCount||(this._labelNode.innerHTML=this._allSelectedMessage)):t==0&&(this._showSelectAllOption&&(this._selectAllCheckBoxNode.checked=!1),this._labelNode.innerHTML=this._emptyMessage,this._addNoneSelectedClass&&$(this._containerNode).addClass("noneSelected")),t>0)for(this._selectAllCheckBoxNode.checked=!1,this._labelNode.innerHTML="",n=0;n<t&&n<20;n++)this._showSelectedCount?this._labelNode.innerHTML=t==1?i[n].label:t+" "+jsTranslate("multiSelect_selected"):(this._labelNode.innerHTML+=i[n].label,n<t-1&&n<20&&(this._labelNode.innerHTML+=", "));for(this._selectedValuesNode.value="",n=0;n<t;n++)this._selectedValuesNode.value+=i[n].id,n<t-1&&(this._selectedValuesNode.value+=",");this.onUpdateSelection&&this.onUpdateSelection()},MSDList.prototype.filterList=function(){var t=this.getFilterValue().toLowerCase(),n;if(t==""){for(n=0;n<this._items.length;n++)this._items[n].tr.style.display="";return!1}for(n=0;n<this._items.length;n++)this._items[n].tr.style.display=this._items[n].skey.indexOf(t)==-1?"none":"";return!0},MSDList._counter=0,refreshThisMd5="";
function setResizeIframe(n,t){var i="#"+n,f=$(i).contents().find("html"),r=f.find("#pRCont").find("> :visible").toArray().reduce(function(n,t){return n+t.scrollHeight},0),u;r>0&&($(i).height(t?"100vh":r+75+"px"),u=$(i).data("modalId"),window.parent.$("#"+u).find(".loading-indicator").hide()),resizeIframe(i);$(window).on("resize",function(){resizeIframe(i)})}function resizeIframe(n){$(n).css("max-height",$("body").height()-70)}function loadRoleRegModal(n,t,i,r){var u=$("#"+n);u.find(".loading-indicator").show(),$("#"+t).length||u.find(".modal-body").append('<iframe id="'+t+'" width="100%" height="auto" data-modal-id="'+n+'" onload="setResizeIframe(this.id, '+(r?"true":"false")+')" src="'+i+'"></iframe>'),u.modal("show"),setResizeIframe(t,r)};
